try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ee6b257d-0d8c-439d-94e2-e4359cfa4cd7",e._sentryDebugIdIdentifier="sentry-dbid-ee6b257d-0d8c-439d-94e2-e4359cfa4cd7")}catch(e){}"use strict";(()=>{var e={};e.id=9684,e.ids=[9684],e.modules={65372:e=>{e.exports=require("better-sqlite3-multiple-ciphers")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},61212:e=>{e.exports=require("async_hooks")},78893:e=>{e.exports=require("buffer")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},27920:e=>{e.exports=require("diagnostics_channel")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},20629:e=>{e.exports=require("fs/promises")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},85807:e=>{e.exports=require("module")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},96119:e=>{e.exports=require("perf_hooks")},35816:e=>{e.exports=require("process")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},74026:e=>{e.exports=require("string_decoder")},82452:e=>{e.exports=require("tls")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},6162:e=>{e.exports=require("worker_threads")},71568:e=>{e.exports=require("zlib")},74675:e=>{e.exports=require("node:assert")},92761:e=>{e.exports=require("node:async_hooks")},72254:e=>{e.exports=require("node:buffer")},17718:e=>{e.exports=require("node:child_process")},40027:e=>{e.exports=require("node:console")},6005:e=>{e.exports=require("node:crypto")},65714:e=>{e.exports=require("node:diagnostics_channel")},95953:e=>{e.exports=require("node:dns")},15673:e=>{e.exports=require("node:events")},87561:e=>{e.exports=require("node:fs")},88849:e=>{e.exports=require("node:http")},42725:e=>{e.exports=require("node:http2")},22286:e=>{e.exports=require("node:https")},85690:e=>{e.exports=require("node:inspector")},87503:e=>{e.exports=require("node:net")},70612:e=>{e.exports=require("node:os")},49411:e=>{e.exports=require("node:path")},38846:e=>{e.exports=require("node:perf_hooks")},39630:e=>{e.exports=require("node:querystring")},51747:e=>{e.exports=require("node:readline")},84492:e=>{e.exports=require("node:stream")},31764:e=>{e.exports=require("node:tls")},41041:e=>{e.exports=require("node:url")},47261:e=>{e.exports=require("node:util")},93746:e=>{e.exports=require("node:util/types")},24086:e=>{e.exports=require("node:worker_threads")},65628:e=>{e.exports=require("node:zlib")},69188:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{DELETE:()=>j,GET:()=>E,HEAD:()=>S,OPTIONS:()=>C,PATCH:()=>H,POST:()=>T,PUT:()=>_});var a=r(88622),o=r(54580),i=r(25187),s=r(38485),u=r(45219),c=r(48449),p=r(50838),l=r(22815),d=r(95403),f=r(34160),y=r(81256),m=r(65195),g=r(24839),h=r(14985),w=r(50651),x=e([i,s,u,p,f,m]);async function b(){return Response.json("",{status:s.ZI.getByProvider("Huggingface")?.apikey?200:401})}async function v(e){let{messages:t}=await e.json();t=await (0,p.Dz)({messages:t,provider:"Huggingface"});let r=e.headers.get("model");console.log({model:r});let n=e.headers.get("filePath"),a=e.headers.get("promptType"),o=await m.Z.getLanguage(),x=await m.Z.getIdeLanguage(),b=e.headers.get("fileName")??"",v="Chat",A=t[t.length-1],k=A?.codeSelection??"";if(a){v=a+"CodeGPT";let e=await (0,l.u)({promptType:a,cleanPromptText:A.content+k,language:x});e&&(t[t.length-1].content=e+A.content+k)}if(n){let e=JSON.stringify(await (0,i.getFileContent)(n),null,2);t[t.length-1].content+=`${n}

    ${e}`}if(!t.some(e=>"system"===e.role)){let e=await (0,c.Ox)({provider:"huggingface",model:r});t.unshift({role:"assistant",content:e||"I am a helpful programming expert assistant. If you ask me a question that is rooted in truth. Follow the user's instructions with precision and attention to detail. Provide the code in a single block. Minimize any additional text."})}let q=(0,y.q)(t.map(e=>e.content).join(""));try{let e=async(e,t)=>{let n=await fetch(e,t);return n.ok||(0,u.sendEvent)({eventName:v,provider:"HuggingFace",model:r||"OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5",promptTokens:q,totalTokens:q,statusCode:n.status}),n},i=s.ZI.getByProvider("Huggingface");if(!i?.apikey){let e=Error("You need to set your Azure details first.");throw e.status=401,e}let c=new g.LF(i?.apikey||"",{fetch:e}),l=s.vc.getByProvider("Huggingface");t=(0,p.VL)(t);let m=c.textGenerationStream({model:r||"OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5",inputs:(0,w.y7)(t),parameters:{max_new_tokens:4096,temperature:l?.temperature??.3,typical_p:.2,repetition_penalty:1,return_full_text:!1}}),x=(0,h.lu)(m,{onFinal:async e=>{let t=(0,y.q)(e);await (0,u.sendEvent)({eventName:v,provider:"HuggingFace",model:r??"",promptTokens:q,completionTokens:t,totalTokens:q+t,statusCode:200})}}),A=t.slice(0,-1).some(e=>e.content.includes(k));if(n||k&&(a||!A)){let e=await (0,f.VU)([`<p style='display: flex; align-items: center; gap: 0.5rem;'>${a?`<span class='command command-bordered command-with-icon' data-command='command'><span class='max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground'>${a}</span></span>`:""}${b?`<span class='command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden' data-id=${o} data-language=${o}><span class='max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground'>${b}</span></span>`:""}${n?`<span class='command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden' data-language=${n.split("/").pop()?.split(".").pop()}><span class='max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground'>${n.split("/").pop()}</span></span>`:""}</p>

`],x);return new d.w(e)}return new d.w(x)}catch(e){if((0,u.sendEvent)({eventName:v,provider:"HuggingFace",model:r||"OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5",promptTokens:q,totalTokens:q,statusCode:e.status??500}),e.message.includes("Invalid URL"))return Response.json({message:"Invalid URL",status:401},{status:400});return Response.json({message:e.message,status:e.status??500},{status:e.status??500})}}[i,s,u,p,f,m]=x.then?(await x)():x;let k={...o},q="workUnitAsyncStorage"in k?k.workUnitAsyncStorage:"requestAsyncStorage"in k?k.requestAsyncStorage:void 0;function A(e,t){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,r,n)=>{let o;try{let e=q?.getStore();o=e?.headers}catch(e){}return a.wrapRouteHandlerWithSentry(e,{method:t,parameterizedRoute:"/[port]/api/(providers)/huggingface",headers:o}).apply(r,n)}})}let E=A(void 0,"GET"),T=A(v,"POST"),_=A(void 0,"PUT"),H=A(void 0,"PATCH"),j=A(void 0,"DELETE"),S=A(b,"HEAD"),C=A(void 0,"OPTIONS");n()}catch(e){n(e)}})},42769:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>c,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d});var a=r(97988),o=r(7773),i=r(94049),s=r(69188),u=e([s]);s=(u.then?(await u)():u)[0];let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/[port]/api/(providers)/huggingface/route",pathname:"/[port]/api/huggingface",filename:"route",bundlePath:"app/[port]/api/(providers)/huggingface/route"},resolvedPagePath:"/Users/maol/WebstormProjects/Trabajo/codegpt-nextjs/app/[port]/api/(providers)/huggingface/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:f}=p,y="/[port]/api/(providers)/huggingface/route";function c(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}n()}catch(e){n(e)}})},97988:(e,t,r)=>{e.exports=r(30517)},95403:(e,t,r)=>{r.d(t,{w:()=>n});class n extends Response{constructor(e,t){super(e,{...t,status:200,headers:{"Content-Type":"text/plain; charset=utf-8","X-Experimental-Stream-Data":"false",...t?.headers}})}}},81256:(e,t,r)=>{r.d(t,{q:()=>a});var n=r(981);let a=(e,t)=>(0,n.b9)(t??"gpt-4").encode(e).length??0},24839:(e,t,r)=>{r.d(t,{LF:()=>X});var n=Object.defineProperty,a={};function o(e){return/^http(s?):/.test(e)||e.startsWith("/")}((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(a,{audioClassification:()=>g,audioToAudio:()=>x,automaticSpeechRecognition:()=>h,chatCompletion:()=>N,chatCompletionStream:()=>L,documentQuestionAnswering:()=>F,featureExtraction:()=>H,fillMask:()=>j,imageClassification:()=>b,imageSegmentation:()=>v,imageToImage:()=>T,imageToText:()=>A,objectDetection:()=>k,questionAnswering:()=>S,request:()=>d,sentenceSimilarity:()=>C,streamingRequest:()=>y,summarization:()=>O,tableQuestionAnswering:()=>$,tabularClassification:()=>M,tabularRegression:()=>G,textClassification:()=>P,textGeneration:()=>I,textGenerationStream:()=>U,textToImage:()=>q,textToSpeech:()=>w,tokenClassification:()=>D,translation:()=>R,visualQuestionAnswering:()=>W,zeroShotClassification:()=>z,zeroShotImageClassification:()=>_});var i=new Map,s="https://huggingface.co";async function u(e,t,r){if(o(e))return null;let n=`${e}:${t}`,a=i.get(n);if(a&&a.date<new Date(Date.now()-6e5)&&(i.delete(n),a=void 0),void 0===a){let o=await (r?.fetch??fetch)(`${s}/api/models/${e}?expand[]=pipeline_tag`,{headers:t?{Authorization:`Bearer ${t}`}:{}}).then(e=>e.json()).then(e=>e.pipeline_tag).catch(()=>null);if(!o)return null;a={task:o,date:new Date},i.set(n,{task:o,date:new Date}),i.size>1e3&&i.delete(i.keys().next().value)}return a.task}var c="https://api-inference.huggingface.co",p=null;async function l(e,t){let r;let{accessToken:n,endpointUrl:a,...i}=e,{model:u}=e,{forceTask:l,includeCredentials:d,taskHint:f,wait_for_model:y,use_cache:m,dont_load_model:g,chatCompletion:h}=t??{},w={};if(n&&(w.Authorization=`Bearer ${n}`),!u&&!p&&f){let e=await fetch(`${s}/api/tasks`);e.ok&&(p=await e.json())}if(!u&&p&&f){let e=p[f];e&&(u=e.models[0].id)}if(!u)throw Error("No model provided, and no default model found for this task");let x="data"in e&&!!e.data;x||(w["Content-Type"]="application/json"),y&&(w["X-Wait-For-Model"]="true"),!1===m&&(w["X-Use-Cache"]="false"),g&&(w["X-Load-Model"]="0");let b=(()=>{if(a&&o(u))throw TypeError("Both model and endpointUrl cannot be URLs");return o(u)?(console.warn("Using a model URL is deprecated, please use the `endpointUrl` parameter instead"),u):a||(l?`${c}/pipeline/${l}/${u}`:`${c}/models/${u}`)})();return h&&!b.endsWith("/chat/completions")&&(b+="/v1/chat/completions"),"string"==typeof d?r=d:!0===d&&(r="include"),{url:b,info:{headers:w,method:"POST",body:x?e.data:JSON.stringify({...i.model&&o(i.model)?function(e,t){let r=Array.isArray(t)?t:[t];return Object.assign({},...Object.keys(e).filter(e=>!r.includes(e)).map(t=>{if(void 0!==e[t])return{[t]:e[t]}}))}(i,"model"):i}),...r&&{credentials:r},signal:t?.signal}}}async function d(e,t){let{url:r,info:n}=await l(e,t),a=await (t?.fetch??fetch)(r,n);if(t?.retry_on_error!==!1&&503===a.status&&!t?.wait_for_model)return d(e,{...t,wait_for_model:!0});if(!a.ok){if(a.headers.get("Content-Type")?.startsWith("application/json")){let r=await a.json();if([400,422,404,500].includes(a.status)&&t?.chatCompletion)throw Error(`Server ${e.model} does not seem to support chat completion. Error: ${r.error}`);if(r.error)throw Error(JSON.stringify(r.error))}throw Error("An error occurred while fetching the blob")}return a.headers.get("Content-Type")?.startsWith("application/json")?await a.json():await a.blob()}function f(){return{data:"",event:"",id:"",retry:void 0}}async function*y(e,t){var r;let n,a,o,i;let{url:s,info:u}=await l({...e,stream:!0},t),c=await (t?.fetch??fetch)(s,u);if(t?.retry_on_error!==!1&&503===c.status&&!t?.wait_for_model)return yield*y(e,{...t,wait_for_model:!0});if(!c.ok){if(c.headers.get("Content-Type")?.startsWith("application/json")){let r=await c.json();if([400,422,404,500].includes(c.status)&&t?.chatCompletion)throw Error(`Server ${e.model} does not seem to support chat completion. Error: ${r.error}`);if(r.error)throw Error(r.error)}throw Error(`Server response contains error: ${c.status}`)}if(!c.headers.get("content-type")?.startsWith("text/event-stream"))throw Error("Server does not support event stream content type, it returned "+c.headers.get("content-type"));if(!c.body)return;let p=c.body.getReader(),d=[],m=(r=function(e,t,r){let n=f(),a=new TextDecoder;return function(o,i){if(0===o.length)r?.(n),n=f();else if(i>0){let r=a.decode(o.subarray(0,i)),s=i+(32===o[i+1]?2:1),u=a.decode(o.subarray(s));switch(r){case"data":n.data=n.data?n.data+"\n"+u:u;break;case"event":n.event=u;break;case"id":e(n.id=u);break;case"retry":let c=parseInt(u,10);isNaN(c)||t(n.retry=c)}}}}(()=>{},()=>{},e=>{d.push(e)}),i=!1,function(e){void 0===n?(n=e,a=0,o=-1):n=function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(n,e);let t=n.length,s=0;for(;a<t;){i&&(10===n[a]&&(s=++a),i=!1);let e=-1;for(;a<t&&-1===e;++a)switch(n[a]){case 58:-1===o&&(o=a-s);break;case 13:i=!0;case 10:e=a}if(-1===e)break;r(n.subarray(s,e),o),s=a,o=-1}s===t?n=void 0:0!==s&&(n=n.subarray(s),a-=s)});try{for(;;){let{done:e,value:t}=await p.read();if(e)return;for(let e of(m(t),d))if(e.data.length>0){if("[DONE]"===e.data)return;let t=JSON.parse(e.data);if("object"==typeof t&&null!==t&&"error"in t)throw Error(t.error);yield t}d=[]}}finally{p.releaseLock()}}var m=class extends TypeError{constructor(e){super(`Invalid inference output: ${e}. Use the 'request' method with the same parameters to do a custom call with no type checking.`),this.name="InferenceOutputError"}};async function g(e,t){let r=await d(e,{...t,taskHint:"audio-classification"});if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e.label&&"number"==typeof e.score)))throw new m("Expected Array<{label: string, score: number}>");return r}async function h(e,t){let r=await d(e,{...t,taskHint:"automatic-speech-recognition"});if("string"!=typeof r?.text)throw new m("Expected {text: string}");return r}async function w(e,t){let r=await d(e,{...t,taskHint:"text-to-speech"});if(!(r&&r instanceof Blob))throw new m("Expected Blob");return r}async function x(e,t){let r=await d(e,{...t,taskHint:"audio-to-audio"});if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e.label&&"string"==typeof e.blob&&"string"==typeof e["content-type"])))throw new m("Expected Array<{label: string, blob: string, content-type: string}>");return r}async function b(e,t){let r=await d(e,{...t,taskHint:"image-classification"});if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e.label&&"number"==typeof e.score)))throw new m("Expected Array<{label: string, score: number}>");return r}async function v(e,t){let r=await d(e,{...t,taskHint:"image-segmentation"});if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e.label&&"string"==typeof e.mask&&"number"==typeof e.score)))throw new m("Expected Array<{label: string, mask: string, score: number}>");return r}async function A(e,t){let r=(await d(e,{...t,taskHint:"image-to-text"}))?.[0];if("string"!=typeof r?.generated_text)throw new m("Expected {generated_text: string}");return r}async function k(e,t){let r=await d(e,{...t,taskHint:"object-detection"});if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e.label&&"number"==typeof e.score&&"number"==typeof e.box.xmin&&"number"==typeof e.box.ymin&&"number"==typeof e.box.xmax&&"number"==typeof e.box.ymax)))throw new m("Expected Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return r}async function q(e,t){let r=await d(e,{...t,taskHint:"text-to-image"});if(!(r&&r instanceof Blob))throw new m("Expected Blob");return r}function E(e){if(globalThis.Buffer)return globalThis.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),globalThis.btoa(t.join(""))}}async function T(e,t){let r;r=e.parameters?{...e,inputs:E(new Uint8Array(e.inputs instanceof ArrayBuffer?e.inputs:await e.inputs.arrayBuffer()))}:{accessToken:e.accessToken,model:e.model,data:e.inputs};let n=await d(r,{...t,taskHint:"image-to-image"});if(!(n&&n instanceof Blob))throw new m("Expected Blob");return n}async function _(e,t){let r={...e,inputs:{image:E(new Uint8Array(e.inputs.image instanceof ArrayBuffer?e.inputs.image:await e.inputs.image.arrayBuffer()))}},n=await d(r,{...t,taskHint:"zero-shot-image-classification"});if(!(Array.isArray(n)&&n.every(e=>"string"==typeof e.label&&"number"==typeof e.score)))throw new m("Expected Array<{label: string, score: number}>");return n}async function H(e,t){let r=e.model?await u(e.model,e.accessToken,t):void 0,n=await d(e,{...t,taskHint:"feature-extraction",..."sentence-similarity"===r&&{forceTask:"feature-extraction"}}),a=(e,t,r=0)=>!(r>t)&&(e.every(e=>Array.isArray(e))?e.every(e=>a(e,t,r+1)):e.every(e=>"number"==typeof e));if(!(Array.isArray(n)&&a(n,3,0)))throw new m("Expected Array<number[][][] | number[][] | number[] | number>");return n}async function j(e,t){let r=await d(e,{...t,taskHint:"fill-mask"});if(!(Array.isArray(r)&&r.every(e=>"number"==typeof e.score&&"string"==typeof e.sequence&&"number"==typeof e.token&&"string"==typeof e.token_str)))throw new m("Expected Array<{score: number, sequence: string, token: number, token_str: string}>");return r}async function S(e,t){let r=await d(e,{...t,taskHint:"question-answering"});if(!("object"==typeof r&&r&&"string"==typeof r.answer&&"number"==typeof r.end&&"number"==typeof r.score&&"number"==typeof r.start))throw new m("Expected {answer: string, end: number, score: number, start: number}");return r}async function C(e,t){let r=e.model?await u(e.model,e.accessToken,t):void 0,n=await d(e,{...t,taskHint:"sentence-similarity",..."feature-extraction"===r&&{forceTask:"sentence-similarity"}});if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))throw new m("Expected number[]");return n}async function O(e,t){let r=await d(e,{...t,taskHint:"summarization"});if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e?.summary_text)))throw new m("Expected Array<{summary_text: string}>");return r?.[0]}async function $(e,t){let r=await d(e,{...t,taskHint:"table-question-answering"});if(!("string"==typeof r?.aggregator&&"string"==typeof r.answer&&Array.isArray(r.cells)&&r.cells.every(e=>"string"==typeof e)&&Array.isArray(r.coordinates)&&r.coordinates.every(e=>Array.isArray(e)&&e.every(e=>"number"==typeof e))))throw new m("Expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}");return r}async function P(e,t){let r=(await d(e,{...t,taskHint:"text-classification"}))?.[0];if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e?.label&&"number"==typeof e.score)))throw new m("Expected Array<{label: string, score: number}>");return r}function B(e){return Array.isArray(e)?e:[e]}async function I(e,t){let r=B(await d(e,{...t,taskHint:"text-generation"}));if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e?.generated_text)))throw new m("Expected Array<{generated_text: string}>");return r?.[0]}async function*U(e,t){yield*y(e,{...t,taskHint:"text-generation"})}async function D(e,t){let r=B(await d(e,{...t,taskHint:"token-classification"}));if(!(Array.isArray(r)&&r.every(e=>"number"==typeof e.end&&"string"==typeof e.entity_group&&"number"==typeof e.score&&"number"==typeof e.start&&"string"==typeof e.word)))throw new m("Expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>");return r}async function R(e,t){let r=await d(e,{...t,taskHint:"translation"});if(!(Array.isArray(r)&&r.every(e=>"string"==typeof e?.translation_text)))throw new m("Expected type Array<{translation_text: string}>");return r?.length===1?r?.[0]:r}async function z(e,t){let r=B(await d(e,{...t,taskHint:"zero-shot-classification"}));if(!(Array.isArray(r)&&r.every(e=>Array.isArray(e.labels)&&e.labels.every(e=>"string"==typeof e)&&Array.isArray(e.scores)&&e.scores.every(e=>"number"==typeof e)&&"string"==typeof e.sequence)))throw new m("Expected Array<{labels: string[], scores: number[], sequence: string}>");return r}async function N(e,t){let r=await d(e,{...t,taskHint:"text-generation",chatCompletion:!0});if(!("object"==typeof r&&Array.isArray(r?.choices)&&"number"==typeof r?.created&&"string"==typeof r?.id&&"string"==typeof r?.model&&"string"==typeof r?.system_fingerprint&&"object"==typeof r?.usage))throw new m("Expected ChatCompletionOutput");return r}async function*L(e,t){yield*y(e,{...t,taskHint:"text-generation",chatCompletion:!0})}async function F(e,t){let r={...e,inputs:{question:e.inputs.question,image:E(new Uint8Array(e.inputs.image instanceof ArrayBuffer?e.inputs.image:await e.inputs.image.arrayBuffer()))}},n=B(await d(r,{...t,taskHint:"document-question-answering"}))?.[0];if(!("string"==typeof n?.answer&&("number"==typeof n.end||void 0===n.end)&&("number"==typeof n.score||void 0===n.score)&&("number"==typeof n.start||void 0===n.start)))throw new m("Expected Array<{answer: string, end?: number, score?: number, start?: number}>");return n}async function W(e,t){let r={...e,inputs:{question:e.inputs.question,image:E(new Uint8Array(e.inputs.image instanceof ArrayBuffer?e.inputs.image:await e.inputs.image.arrayBuffer()))}},n=(await d(r,{...t,taskHint:"visual-question-answering"}))?.[0];if(!("string"==typeof n?.answer&&"number"==typeof n.score))throw new m("Expected Array<{answer: string, score: number}>");return n}async function G(e,t){let r=await d(e,{...t,taskHint:"tabular-regression"});if(!(Array.isArray(r)&&r.every(e=>"number"==typeof e)))throw new m("Expected number[]");return r}async function M(e,t){let r=await d(e,{...t,taskHint:"tabular-classification"});if(!(Array.isArray(r)&&r.every(e=>"number"==typeof e)))throw new m("Expected number[]");return r}var X=class{accessToken;defaultOptions;constructor(e="",t={}){for(let[r,n]of(this.accessToken=e,this.defaultOptions=t,Object.entries(a)))Object.defineProperty(this,r,{enumerable:!1,value:(r,a)=>n({...r,accessToken:e},{...t,...a})})}endpoint(e){return new J(e,this.accessToken,this.defaultOptions)}},J=class{constructor(e,t="",r={}){for(let[n,o]of Object.entries(a))Object.defineProperty(this,n,{enumerable:!1,value:(n,a)=>o({...n,accessToken:t,endpointUrl:e},{...r,...a})})}}},50651:(e,t,r)=>{r.d(t,{y7:()=>n});function n(e){return e.map(({content:e,role:t})=>{if("user"===t)return`<|prompter|>${e}<|endoftext|>`;if("function"===t)throw Error("OpenAssistant does not support function calls.");if("system"!==t)return`<|assistant|>${e}<|endoftext|>`;throw Error("OpenAssistant does not support system messages.")}).join("")+"<|assistant|>"}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[2355,8622,8341,8823,6703,5538,2806,981,3474,1485,4985,5203,4554,5370,3228,3536],()=>r(42769));module.exports=n})();
//# sourceMappingURL=route.js.map