try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="448aaecc-ca5c-47c9-9070-edf6fae55746",e._sentryDebugIdIdentifier="sentry-dbid-448aaecc-ca5c-47c9-9070-edf6fae55746")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3,263],{82548:function(e,t,a){Promise.resolve().then(a.bind(a,94421)),Promise.resolve().then(a.bind(a,49945)),Promise.resolve().then(a.bind(a,19415)),Promise.resolve().then(a.bind(a,2814)),Promise.resolve().then(a.bind(a,42646)),Promise.resolve().then(a.bind(a,75009)),Promise.resolve().then(a.bind(a,39078)),Promise.resolve().then(a.bind(a,7843)),Promise.resolve().then(a.bind(a,30351)),Promise.resolve().then(a.bind(a,94696)),Promise.resolve().then(a.bind(a,35721)),Promise.resolve().then(a.bind(a,88090)),Promise.resolve().then(a.bind(a,86436))},50870:function(e,t,a){"use strict";a.d(t,{j:function(){return n}}),a(6431);var n=(0,a(61474).$)("cb8707d39cee2d6b73f7d2a0c3a37eb9243fb61d")},3414:function(e,t,a){"use strict";a.d(t,{P:function(){return i}});var n=a(79702),s=a(52627),l=a(72301),r=a(34811);let o=async e=>{let{provider:t,port:a}=e;if(!t.toLowerCase().includes("codegpt"))return{agents:[],marketplace:[]};try{let e=await s.Z.get("http://localhost:54112/".concat(a,"/api/").concat(t));return e.data?{...e.data}:{agents:[],marketplace:[]}}catch(e){return console.error("error fetching agents",e),{agents:[],marketplace:[]}}};function i(){let e=(0,n.Y)(e=>e.selectedProvider),t=(0,l.usePathname)().split("/")[1],{data:a,mutate:s,isLoading:i,isValidating:d}=(0,r.ZP)("/api/agents/",()=>o({provider:e,port:t}),{shouldRetryOnError:!0,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0});return{agents:a,isLoading:i||d,mutate:s}}},43088:function(e,t,a){"use strict";a.d(t,{T:function(){return o}});var n=a(79702),s=a(72301),l=a(34811);let r=async e=>{let{provider:t,port:a}=e;return(await fetch("http://localhost:54112/".concat(a,"/api/").concat(t),{method:"HEAD"})).ok};function o(){let e=(0,n.Y)(e=>e.selectedProvider),t=(0,s.usePathname)().split("/")[1],{data:a,mutate:o}=(0,l.ZP)("/api/agents/".concat(e),()=>r({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:6e4});return{isConnected:a,mutate:o}}},73915:function(e,t,a){"use strict";a.d(t,{Z:function(){return l},v:function(){return o}});var n=a(72301),s=a(34811);let l=null,r=async e=>{let{port:t}=e;return fetch("http://localhost:54112/".concat(t,"/api/codegptplusbeta/me")).then(async e=>{var t;let a=await e.json();return l={...a,loggedIn:!!(null==a?void 0:null===(t=a.org)||void 0===t?void 0:t.name)}})};function o(){let e=(0,n.usePathname)().split("/")[1],{data:t,mutate:a}=(0,s.ZP)("userData",()=>r({port:e}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0,fallbackData:{dailyUsage:-1,dailyMaxUsage:-1,user:{username:"",fullName:"",avatarUrl:"",email:"",status:""},org:{name:"",image:""},plan:"",loggedIn:!0}});return{userData:t,mutate:a}}},54650:function(e,t,a){"use strict";a.d(t,{J:function(){return l},W:function(){return s}});var n=a(11698);let s=[{id:"manual",title:"Select code",description:"Manually choose the code and files"},{id:"deepinsights",title:"Deep insights",description:"We enrich responses with code knowledge graphs"}],l=(0,n.Ue)(e=>({files:[],setFiles:t=>{e(()=>({files:t}))},selectedContextLevel:{id:s[0].id,display:s[0].title},setSelectedContextLevel:t=>{e(()=>({selectedContextLevel:{id:t.id,display:t.title}}))}}))},58512:function(e,t,a){"use strict";a.d(t,{c:function(){return n}});let n=(0,a(11698).Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t})),message:{title:"",description:"",subtitle:"",actions:null,provider:"",type:"alert"},setErrorMessage:t=>{let{title:a,description:n,subtitle:s,actions:l,type:r,provider:o}=t;return e(()=>({message:{title:a||"System Message",description:n||"",subtitle:s||"",actions:l||null,provider:o||"",type:r||"alert"}}))}}))},20686:function(e,t,a){"use strict";a.d(t,{i:function(){return l}});var n=a(11698),s=a(42350);let l=(0,n.Ue)()((0,s.tJ)(e=>({themeFontSize:13,setThemeFontSize:t=>e({themeFontSize:t})}),{name:"theme-font-settings-storage"}))},94696:function(e,t,a){"use strict";a.d(t,{CodeBlock:function(){return D}});var n=a(57437),s=a(86148);a(6431);var l=a(61474);(0,l.$)("eb17aafe73188efdd4322e1ac378547afa56072b"),(0,l.$)("a32dbcc756608e5f055c7f1697d66d93788dcb53");var r=a(86155);let o=(e,t)=>{try{return r.Z.highlight(e,{language:t}).value}catch(t){return r.Z.highlight(e,{language:"plaintext"}).value}};var i=a(2265),d=e=>{let{language:t,value:a}=e,s=(0,i.useCallback)(()=>{let e=a.slice(0,8e3),t=a.indexOf("\n",8e3);return -1!==t&&(e=a.slice(0,t)),a.length>8e3?e+"\n...".concat(a.split("\n").length-e.split("\n").length," lines truncated\n"):a},[a])(),l=(0,i.useMemo)(()=>o(s,t),[s,t]);return(0,n.jsx)("code",{className:"direction-ltr word-spacing-normal word-break-normal tab-size[2] hyphens-none whitespace-pre text-left",dangerouslySetInnerHTML:{__html:l},"data-sentry-component":"CodeBlockContent","data-sentry-source-file":"code-block-content.tsx"})};a(3439),a(89866);var c=a(27902),u=a(74094);let m=(0,a(3809).j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});i.forwardRef((e,t)=>{let{className:a,variant:s,size:l,...r}=e;return(0,n.jsx)(u.f,{ref:t,className:(0,c.cn)(m({variant:s,size:l,className:a})),...r})}).displayName=u.f.displayName;var p=a(7591);let x=i.createContext({size:"default",variant:"default"});i.forwardRef((e,t)=>{let{className:a,variant:s,size:l,children:r,...o}=e;return(0,n.jsx)(p.fC,{ref:t,className:(0,c.cn)("flex items-center justify-center gap-1",a),...o,children:(0,n.jsx)(x.Provider,{value:{variant:s,size:l},children:r})})}).displayName=p.fC.displayName,i.forwardRef((e,t)=>{let{className:a,children:s,variant:l,size:r,...o}=e,d=i.useContext(x);return(0,n.jsx)(p.ck,{ref:t,className:(0,c.cn)(m({variant:d.variant||l,size:d.size||r}),a),...o,children:s})}).displayName=p.ck.displayName;var f=a(28514);a(79725),a(83570);var h=a(36457);a(85853);var g=a(33308);function v(e){var t;let{language:a}=e,s=g.a2.find(e=>e.value.toLowerCase()===a.toLowerCase()||e.label.toLowerCase()===a.toLowerCase());return(0,n.jsxs)("span",{className:"flex items-center gap-1","data-sentry-component":"LanguageLabel","data-sentry-source-file":"language-label.tsx",children:[(0,n.jsx)("span",{style:{height:"1rem"},"data-language":null==s?void 0:s.label}),(0,n.jsx)("span",{className:"text-xs",children:null!==(t=null==s?void 0:s.label)&&void 0!==t?t:a})]})}var y=a(45700),b=a(32431),j=a.n(b),w=e=>{let{children:t,colors:a,speed:s=3,className:l="",borderWidth:r=2,visible:o}=e;if(!o)return(0,n.jsx)("div",{children:t});let i={backgroundImage:"linear-gradient(90deg, ".concat(a.join(", "),")"),backgroundSize:"".concat(100*a.length,"% 100%"),animation:"shine ".concat(s,"s linear infinite")};return(0,n.jsxs)("div",{style:{padding:r},"data-sentry-component":"ShinyBorder","data-sentry-source-file":"shiny-border.tsx",className:j().dynamic([["3fc1908d8822f9e5",[100*a.length]]])+" "+"relative ".concat(l),children:[(0,n.jsx)("div",{style:i,className:j().dynamic([["3fc1908d8822f9e5",[100*a.length]]])+" absolute inset-0 rounded-[inherit]"}),(0,n.jsx)("div",{className:j().dynamic([["3fc1908d8822f9e5",[100*a.length]]])+" relative overflow-hidden rounded-[inherit] bg-background",children:t}),(0,n.jsx)(j(),{id:"3fc1908d8822f9e5",dynamic:[100*a.length],children:"@-webkit-keyframes shine{to{background-position:".concat(100*a.length,"% 0}}@-moz-keyframes shine{to{background-position:").concat(100*a.length,"% 0}}@-o-keyframes shine{to{background-position:").concat(100*a.length,"% 0}}@keyframes shine{to{background-position:").concat(100*a.length,"% 0}}")})]})},N=a(77752);a(77073);var k=a(88725),C=a(96609),z=a(50226),S=a(68344),M=a(3548),P=a(24886),A=a(11082),L=a(98115),I=a(7805);let _=["javascript","typescript","js","ts","typescriptreact"],D=e=>{let{language:t,value:a,isRunning:l=!1,isUserMessage:r=!1}=e,o=["bash","sh","zsh","ksh","terminal","cmd","powershell"].includes(t=_.includes(t.toLowerCase())?"tsx":t),[u,m]=(0,i.useState)(!1),[p,x]=(0,i.useState)(r),[g,b]=(0,i.useState)(!1),j=(0,i.useRef)(null),D=(0,i.useRef)(null),{inView:T}=(0,C.S1)(j),[O]=(0,i.useState)(l),{isLoading:R,messages:Z}=(0,i.useContext)(y.p),[F,E]=(0,i.useState)(""),[V,H]=(0,i.useState)(!1),{theme:B}=(0,h.F)();(0,i.useEffect)(()=>{D.current&&!g&&b(D.current.scrollHeight>=384)},[g,a]),(0,i.useEffect)(()=>{R||x(!0)},[R]);let q=()=>{(0,s.zp)(a).then(()=>{m(!0),setTimeout(()=>{m(!1)},2e3)})};return(0,n.jsx)(w,{colors:["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--foreground))"],speed:2,className:"rounded-xl",borderWidth:2,visible:O,"data-sentry-element":"ShinyBorder","data-sentry-component":"CodeBlock","data-sentry-source-file":"code-block.tsx",children:(0,n.jsxs)("div",{className:(0,c.cn)("chat codeblock group w-full overflow-auto whitespace-pre-wrap break-words text-sm","dark"===B?"darkmode":"lightmode"),children:[(0,n.jsxs)("header",{ref:j,className:"z-10 flex items-center justify-between border-b border-content3 bg-content1/90 px-2 py-1.5 text-xs text-default-500 backdrop-blur-sm",children:[(0,n.jsx)("span",{className:"language-label font-sans text-[15px]",children:(0,n.jsx)(v,{language:t,"data-sentry-element":"LanguageLabel","data-sentry-source-file":"code-block.tsx"})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[!r&&"vscode"===N.L_&&!o&&!1,(0,n.jsx)(k.e,{content:"Copy code",classNames:{content:"bg-content2"},"data-sentry-element":"Tooltip","data-sentry-source-file":"code-block.tsx",children:(0,n.jsx)("button",{className:"flex size-4 items-center justify-center text-default-500 opacity-0 transition-all group-hover:opacity-100",onClick:()=>{q(),(0,f.q)({eventName:"copyCode",code_language:t,codeLinesNumber:a.split("\n").length}),I.Am.success("Code copied to clipboard",{duration:3e3,dismissible:!0,closeButton:!0})},children:u?(0,n.jsx)(z.Z,{className:"size-3 shrink-0"}):(0,n.jsx)(S.Z,{className:"size-3 shrink-0"})})}),(0,n.jsx)(k.e,{content:"Insert code",classNames:{content:"bg-content2"},"data-sentry-element":"Tooltip","data-sentry-source-file":"code-block.tsx",children:(0,n.jsx)("button",{className:"flex size-4 items-center justify-center text-default-500 opacity-50 transition-all group-hover:opacity-100",onClick:()=>{o?(0,s.qu)(a).catch(()=>{console.error("Error inserting code")}):(0,s.Nq)(a).catch(()=>{console.error("Error inserting code")}),(0,f.q)({eventName:"insertCode",code_language:t,codeLinesNumber:a.split("\n").length}),I.Am.success("Code inserted",{duration:3e3,dismissible:!0,closeButton:!0})},children:o?(0,n.jsx)(M.Z,{className:"size-3 shrink-0"}):(0,n.jsx)(P.Z,{className:"size-3 shrink-0"})})})]})]}),(0,n.jsx)("div",{ref:D,className:(0,c.cn)("direction-ltr word-spacing-normal word-break-normal tab-size[2] z-0 m-0 overflow-auto hyphens-none whitespace-pre p-3 text-left leading-6",p?r?"max-h-28":"max-h-80":"max-h-full"),children:(0,n.jsx)(d,{language:t,value:a,"data-sentry-element":"CodeBlockContent","data-sentry-source-file":"code-block.tsx"})}),!R&&g&&(0,n.jsx)("div",{className:"flex items-center justify-center rounded-b-md border-t border-content3 py-1",children:(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(k.e,{content:p?"Show code":"Collapse",classNames:{content:"bg-content2"},children:(0,n.jsx)("button",{className:"mx-auto flex size-4 items-center justify-center text-default-500",onClick:()=>{x(!p),setTimeout(()=>{j.current&&!1===p&&!T&&j.current.scrollIntoView({behavior:"instant",block:"start",inline:"start"})},100)},children:p?(0,n.jsx)(A.Z,{className:"size-3 shrink-0"}):(0,n.jsx)(L.Z,{className:"size-3 shrink-0"})})})})})]})})}},25326:function(e,t,a){"use strict";a.d(t,{J:function(){return m}});var n=a(57437),s=a(94696),l=a(2265),r=a(36376);let o=(0,l.memo)(r.U,(e,t)=>e.children===t.children&&e.className===t.className);var i=a(39078),d=a(33308),c=a(46046),u=a(99353);let m=e=>{let{content:t,isLoading:a,isUserMessage:l=!1}=e;return(0,n.jsx)("div",{className:"prose-h3:text-md prose prose-slate mx-auto w-full min-w-full dark:prose-zinc dark:prose-invert prose-h1:text-xl prose-h2:text-lg prose-pre:bg-inherit prose-pre:p-0 prose-ol:pl-4 prose-ul:pl-4","data-sentry-component":"MarkdownRender","data-sentry-source-file":"markdown.tsx",children:(0,n.jsx)(o,{rehypePlugins:[[c.Z]],remarkPlugins:[u.Z],allowedElements:["div","a","p","h1","h2","h3","h4","h5","h6","ol","ul","li","code","pre","strong","em","del","u","img","b","i","blockquote","br","hr","span","table","thead","tbody","tr","th","td","caption","colgroup"],skipHtml:!0,urlTransform:e=>e,unwrapDisallowed:!0,components:{code(e){var t,a;let{node:r,inline:o,className:i,children:c,...u}=e,m=null==i?void 0:i.replaceAll("language-",""),p=d.a2.find(e=>e.value===m),x=String(c);return"undefined"===x?null:!o&&i?(0,n.jsx)(s.CodeBlock,{language:null!==(a=null!==(t=null==p?void 0:p.label)&&void 0!==t?t:m)&&void 0!==a?a:"",value:x,isUserMessage:l}):(0,n.jsx)("span",{className:"inline-block h-fit whitespace-break-spaces rounded-md bg-default/40 px-1.5 font-mono font-normal leading-snug text-default-700",children:x})},a(e){let{node:t,children:a}=e;return(0,n.jsx)(i.CustomLink,{isExternal:!0,"attr-type":"link","attr-href":t.properties.href,href:t.properties.href,className:"cursor-pointer underline",children:a})}},"data-sentry-element":"MemoizedReactMarkdown","data-sentry-source-file":"markdown.tsx",children:t})})}},94421:function(e,t,a){"use strict";let n;a.d(t,{default:function(){return ap}});var s=a(57437),l=a(86148);a(6431);var r=a(61474),o=(0,r.$)("b2a9bd8d29b4fae0adbafb37f618b47f1e70a54e"),i=(0,r.$)("881dba192ed7ca8143716ef02a10daf515be6bb0"),d=(0,r.$)("c44e67e4628464ee0f00765beb0671f6bf39d6d8"),c=(0,r.$)("99ca52fdf9b7d9cc311bb125c4b124a7e5b763fb"),u=(0,r.$)("f6a2fbc13cf006b1a063a606eda2bd9203000d6e"),m=a(45700),p=a(25326);(0,r.$)("77e36785c07bd474b2f45277581096de280d7f21");var x=(0,r.$)("52b1caa808ecf32cbcf2870c5954878c8438d52d");function f(e){var t;let{image:a}=e;return(0,s.jsx)("div",{className:"mb-2 grid gap-2","data-sentry-component":"InputImagePreview","data-sentry-source-file":"input-image-preview.tsx",children:(0,s.jsx)("div",{className:"grid max-w-48 gap-4",children:(0,s.jsxs)("div",{className:"relative grid grid-flow-col items-center justify-start gap-2 overflow-hidden rounded-lg border border-content3 p-2",children:[(0,s.jsx)("div",{className:"relative size-8 overflow-hidden rounded-lg",children:(0,s.jsx)("div",{className:"relative h-full w-full overflow-hidden",style:{backgroundImage:"url(".concat(a.base64,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),(0,s.jsxs)("p",{className:"relative grid w-full gap-0.5 overflow-hidden truncate",children:[(0,s.jsxs)("span",{className:"text-xs text-default-500",children:[(0,s.jsx)("span",{className:"uppercase",children:a.name&&a.name.includes(".")?null===(t=a.name)||void 0===t?void 0:t.split(".")[1]:""}),"Image"]}),(0,s.jsx)("span",{className:"justify-end overflow-hidden text-ellipsis text-left text-xs",children:a.name})]})]})})})}var h=a(27902),g=a(3809),v=a(2265);let y=(0,g.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),b=v.forwardRef((e,t)=>{let{className:a,variant:n,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,h.cn)(y({variant:n}),a),...l})});b.displayName="Alert",v.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h5",{ref:t,className:(0,h.cn)("mb-1 font-medium leading-none tracking-tight",a),...n})}).displayName="AlertTitle";let j=v.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,h.cn)("text-sm [&_p]:leading-relaxed",a),...n})});j.displayName="AlertDescription";var w=a(11698);let N=(0,w.Ue)(e=>({currentProgress:0,setCurrentProgress:t=>e({currentProgress:t}),currentProgressMessage:"",setCurrentProgressMessage:t=>e({currentProgressMessage:t}),isIndexing:!1,setIsIndexing:t=>e({isIndexing:t})}));var k=a(5703),C=a(77073),z=a(36076),S=a(7805);function M(e){return e.map((e,t)=>{let a=[],n="user"===e.role,l=!1,r="";return e.display.forEach((e,o)=>{"string"==typeof e?l?r+=e:(r=e,l=!0):(l&&(a.push((0,s.jsx)(p.J,{content:r,isUserMessage:n},"".concat(t,"-").concat(o,"-markdown"))),r=""),a.push((0,v.cloneElement)(e,{key:"".concat(t,"-").concat(o,"-element")})),l=!1)}),l&&a.push((0,s.jsx)(p.J,{content:r,isUserMessage:n},"".concat(t,"-markdown"))),{...e,display:a}})}let P=e=>{let t,{message:a,value:n}=e;if(n.display){if((0,v.isValidElement)(n.display)){var s,l,r,o;let e=null===(l=n.display)||void 0===l?void 0:null===(s=l.props)||void 0===s?void 0:s.id;if(console.log({newDisplayId:e}),e){let s=null==a?void 0:null===(r=a.display)||void 0===r?void 0:r.findIndex(t=>{var a;return(0,v.isValidElement)(t)&&(null==t?void 0:null===(a=t.props)||void 0===a?void 0:a.id)===e});-1!==s&&(null==a?void 0:null===(o=a.display)||void 0===o?void 0:o[s])&&((t=[...a.display])[s]=n.display)}}t||(t=[...a.display,n.display])}return t||(t=[...a.display]),t},A=e=>{let{onFinish:t,onError:a,provider:n,initialHistoryId:r}=e,[o,d]=(0,v.useState)([]),[c,u]=(0,v.useState)(r),[m,h]=(0,v.useState)({}),[g,y]=(0,v.useState)(""),[w,A]=(0,v.useState)(!1),L=(0,v.useRef)(""),I=(0,v.useRef)(!1),_=(0,v.useRef)(""),D=(0,v.useRef)(!1),T=(0,v.useRef)(""),O=(0,v.useRef)({base64:"",name:""}),R=(0,v.useRef)([]),Z=(0,v.useRef)(""),F=(0,v.useRef)(""),{setSelectedTab:E,setIsModalOpen:V,selectedGraph:H}=(0,k.B)(),{isIndexing:B}=N();(0,v.useEffect)(()=>{d([]),i().then(e=>{u(e)}),A(!1),I.current=!1,_.current="",D.current=!1,T.current="",O.current={base64:"",name:""},R.current=[],Z.current="",F.current="",L.current=""},[n]),(0,v.useEffect)(()=>{if(!w&&o.length>0){let e=o[o.length-1];"assistant"===e.role&&0===e.display.length&&d(o.slice(0,o.length-2))}},[o,w]);let q=()=>{y(""),A(!1),I.current=!1},G=async e=>{let r,{text:i,model:u,externalMessages:m,fromMarketplace:h=!1,customPromptType:g="",image:v,files:w=[],contextLevel:N,codeSelection:k,promptType:G,statusId:U}=e;if(I.current)return;I.current=!0,A(!0);let Y=await (0,l.us)();if(u||(u=Y.id),"deepinsights"===N&&!(null==H?void 0:H.id)){V(!0),E("deepinsights"),d(o.slice(0,o.length-1));return}_.current=u,D.current=h||!1,T.current=g||"",O.current=v||{base64:"",name:""},R.current=w||[],Z.current=k||"",F.current=G||"",L.current=N||"";try{var K,J,W,$;r=[...m||o,{role:"user",display:[...(null==v?void 0:v.base64)?[(0,s.jsx)(f,{image:v},"".concat(o.length,"-").concat(i.length,"-user-message-image"))]:[],(0,s.jsx)("span",{children:i},"".concat(o.length,"-").concat(i.length,"-user-message")),...k?[(0,s.jsx)(p.J,{content:k,isUserMessage:!0},"".concat(o.length,"-").concat(i.length,"-user-message-code-selection"))]:[]],content:"".concat(i," ").concat(k||"")},{role:"assistant",display:[...B&&"codebase"===N?[(0,s.jsx)(b,{variant:"default",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(z.Z,{className:"size-5 text-amber-500"}),(0,s.jsxs)(j,{className:"text-sm text-default-500",children:["Note: codebase not indexed yet. Results are much better when indexed."," ",(0,s.jsx)("p",{className:"cursor-pointer text-default-400 underline underline-offset-2",onClick:()=>V(!0),children:"Currently indexing."})]})]})},"".concat(o.length,"-codebase-not-indexed"))]:[]],content:""}],d(r);let e=(0,C.e_)(r);for await(let t of(console.log({normalizedMessages:e}),y("Connecting..."),K=x({provider:n||"codegptplusbeta",messages:e,model:u,fromMarketplace:h||u===Y.id,customPromptType:g,image:null==v?void 0:v.base64,files:w,contextLevel:N,codeSelection:k,promptType:G,statusId:U,historyId:c}),{[Symbol.asyncIterator]:function(){return{current:K,async next(){let{iteratorResult:e,next:t}=await this.current;return t?this.current=t:e.done=!0,e}}}})){if(!I.current)break;let e=t.error;if(e){if(q(),(0===r.length||""===r[r.length-1].content)&&d(o.slice(0,o.length-1)),"codegptplusbeta"!==n)S.Am.error(e,{unstyled:!0});else{let t=e,n=500,s="";try{let a=JSON.parse(e);t=null!==(J=a.message)&&void 0!==J?J:e,n=null!==(W=Number(a.status))&&void 0!==W?W:500,s=null!==($=a.code)&&void 0!==$?$:""}catch(e){}let l=Error(JSON.stringify({message:t,status:n,code:s}));a&&a(l);return}}let s=r.length-1;r=r.map((e,a)=>{if(a===s){t.currentState&&y(t.currentState);let a=P({message:e,value:t});return{...e,display:a,content:t.content?e.content+t.content:e.content}}return e}),d(M(r))}t&&t(r)}catch(e){a&&a(e)}finally{y(""),A(!1),I.current=!1}return r?M(r):o},U=async e=>{A(!0),o.pop();let t=o.pop();d(o);let a=null==t?void 0:t.content;return await G({text:(a||"").replace(Z.current,""),model:_.current,fromMarketplace:D.current,customPromptType:T.current,image:O.current,files:R.current,contextLevel:L.current,codeSelection:Z.current})};return{messages:o,setMessages:d,handleSubmit:G,stop:q,reload:U,isLoading:w,currentState:g,historyId:c,setHistoryId:u,modelHistory:m,setModelHistory:h}};var L=a(38361),I=a(73987);let _=L.fC,D=L.xz,T=L.ZA;L.Uv;let O=L.Tr;L.Ee;let R=v.forwardRef((e,t)=>{let{className:a,inset:n,children:l,...r}=e;return(0,s.jsxs)(L.fF,{ref:t,className:(0,h.cn)("focus:bg-accent data-[state=open]:bg-accent flex cursor-default select-none items-center gap-2 rounded-medium px-2 py-1.5 text-sm outline-none [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a,"hover:bg-content3"),...r,children:[l,(0,s.jsx)(I.XCv,{className:"ml-auto"})]})});R.displayName=L.fF.displayName;let Z=v.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(L.tu,{ref:t,className:(0,h.cn)("text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border bg-content1 p-1 shadow-lg dark:bg-content2",a),...n})});Z.displayName=L.tu.displayName;let F=v.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...l}=e;return(0,s.jsx)(L.Uv,{children:(0,s.jsx)(L.VY,{ref:t,sideOffset:n,className:(0,h.cn)("text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-medium border bg-content1 p-1 shadow-md dark:bg-content2","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});F.displayName=L.VY.displayName;let E=v.forwardRef((e,t)=>{let{className:a,inset:n,...l}=e;return(0,s.jsx)(L.ck,{ref:t,className:(0,h.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-medium px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",a,"hover:bg-content3"),...l})});E.displayName=L.ck.displayName,v.forwardRef((e,t)=>{let{className:a,children:n,checked:l,...r}=e;return(0,s.jsxs)(L.oC,{ref:t,className:(0,h.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-medium py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...r,children:[n,(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(L.wU,{children:(0,s.jsx)(I.nQG,{className:"size-3.5 w-3.5"})})})]})}).displayName=L.oC.displayName,v.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,s.jsxs)(L.Rk,{ref:t,className:(0,h.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-medium py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[n,(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(L.wU,{children:(0,s.jsx)(I.nQG,{className:"size-3.5 w-3.5 fill-current"})})})]})}).displayName=L.Rk.displayName;let V=v.forwardRef((e,t)=>{let{className:a,inset:n,...l}=e;return(0,s.jsx)(L.__,{ref:t,className:(0,h.cn)("px-2 py-1.5 text-xs capitalize text-default-400",n&&"pl-8",a),...l})});V.displayName=L.__.displayName;let H=v.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(L.Z0,{ref:t,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});H.displayName=L.Z0.displayName;var B=a(3414),q=a(54650),G=a(17036),U=a(79702),Y=a(28514),K=a(19979),J=a(88822),W=a(44608),$=a(40844),Q=a(24656),X=a(6896),ee=a(83728),et=a(50226);function ea(e){let{title:t,items:a,onItemClick:n,type:l,customNoItems:r}=e,[o,i]=(0,v.useState)(""),d=(0,v.useMemo)(()=>a.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())),[a,o]);return(0,s.jsx)(Z,{className:"w-56 select-none p-0","data-sentry-element":"DropdownMenuSubContent","data-sentry-component":"SearchableSubMenu","data-sentry-source-file":"searchable-submenu.tsx",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-full w-full",children:[(0,s.jsx)("div",{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2",children:(0,s.jsx)(ee.Z,{className:"size-4 text-muted-foreground","data-sentry-element":"SearchIcon","data-sentry-source-file":"searchable-submenu.tsx"})}),(0,s.jsx)("input",{type:"text",placeholder:"Search ".concat(t.toLowerCase(),"..."),value:o,onChange:e=>i(e.target.value),className:"h-9 w-full border-b bg-transparent py-2 pl-9 pr-3 text-sm focus:outline-none"})]}),(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto p-1",children:0===d.length?(0,s.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:r||"No ".concat(t.toLowerCase()," found.")}):("agent"===l?d:d.slice(0,10)).map(e=>{let t=e.name.includes(".")?e.name.split(".").at(-1):null;return(0,s.jsxs)("div",{className:"inline-flex w-full cursor-pointer items-center gap-2 overflow-hidden rounded-small p-2 hover:bg-content3 ".concat(t&&"file"===l&&"command-with-icon"),...t&&"file"===l&&{"data-language":t,"data-id":t},onClick:()=>n(e),children:["agent"===l&&(0,s.jsx)(X.J,{disableSkeleton:!0,src:(null==e?void 0:e.image)||"/logotypes/custom.png",alt:null==e?void 0:e.name,loading:"eager",classNames:{wrapper:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,s.jsx)("span",{className:"w-full truncate text-xs",children:null==e?void 0:e.name}),(null==e?void 0:e.isSelected)&&(0,s.jsx)(et.Z,{className:"ml-auto size-4"})]},e.id)})})]})})}function en(e){var t;let{filesList:a}=e,{files:n,setFiles:r}=(0,q.J)(),{agents:o,mutate:i}=(0,B.P)(),{agents:d}=(0,G.X)(e=>e),{setCurrentProviderModel:c}=(0,U.o)(),{setSelectedProvider:u}=(0,U.Y)();return(0,v.useEffect)(()=>{i().then(e=>{e||i()})},[i]),(0,s.jsx)("div",{className:"select-none","data-sentry-component":"ContextDropdown","data-sentry-source-file":"context-dropdown.tsx",children:(0,s.jsxs)(_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsx)(D,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"context-dropdown.tsx",children:(0,s.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500",onClick:()=>{(0,Y.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:"contextSelectorDropdownButton"})},children:[(0,s.jsx)(J.Z,{className:"size-3 shrink-0","data-sentry-element":"Plus","data-sentry-source-file":"context-dropdown.tsx"}),(0,s.jsx)("span",{className:"whitespace-nowrap pr-0.5",children:"Add Context"})]})}),(0,s.jsx)(F,{className:"w-56",side:"top",sideOffset:10,alignOffset:-6,align:"start","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"context-dropdown.tsx",children:(0,s.jsxs)(T,{"data-sentry-element":"DropdownMenuGroup","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsxs)(O,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsxs)(R,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsx)(W.Z,{className:"!size-3","data-sentry-element":"HashIcon","data-sentry-source-file":"context-dropdown.tsx"}),(0,s.jsx)("span",{className:"text-xs",children:"Files"})]}),(0,s.jsx)(ea,{title:"Files",type:"file",items:a.map(e=>({id:e.id,name:e.display,isSelected:n.some(t=>t.path===e.id)})),onItemClick:e=>{let t=e.id,a=t.split("/").pop()||t;n.some(e=>e.path===t)?r(n.filter(e=>e.path!==t)):r([...n,{name:a,path:t}]),(0,Y.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:"addFileToContextDropdown"})},"data-sentry-element":"SearchableSubMenu","data-sentry-source-file":"context-dropdown.tsx"})]}),(0,s.jsxs)(O,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsxs)(R,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsx)($.Z,{className:"!size-3","data-sentry-element":"BotIcon","data-sentry-source-file":"context-dropdown.tsx"}),(0,s.jsx)("span",{className:"text-xs",children:"My agents"})]}),(0,s.jsx)(ea,{title:"My agents",type:"agent",items:(null==o?void 0:null===(t=o.agents)||void 0===t?void 0:t.map(e=>({id:e.id,name:e.name,image:e.image,isSelected:!1})))||[],customNoItems:(0,s.jsxs)("button",{className:"mx-auto flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border border-content4 bg-content3 px-1 py-0.5 text-xs leading-normal text-default-500 shadow hover:text-default-700",onClick:()=>{(0,l.Yo)("https://app.codegpt.co/es/agents"),(0,Y.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:"Create your agent"})},children:[(0,s.jsx)(J.Z,{className:"size-3"}),"Create your agent"]}),onItemClick:e=>{null!=e&&e.is_frozen||(c("codegptplusbeta",{id:e.id,label:e.name,fromMarketplace:!1,image:e.image,description:"",welcome:null==e?void 0:e.welcome,prompt_library:null==e?void 0:e.prompt_library}),u("codegptplusbeta"),(0,K.$)(),(0,Y.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:e.name+"ContextDropdownUserAgent"}))},"data-sentry-element":"SearchableSubMenu","data-sentry-source-file":"context-dropdown.tsx"})]}),(0,s.jsxs)(O,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsxs)(R,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"context-dropdown.tsx",children:[(0,s.jsx)(Q.Z,{className:"!size-3","data-sentry-element":"BookTextIcon","data-sentry-source-file":"context-dropdown.tsx"}),(0,s.jsx)("span",{className:"text-xs",children:"Docs"})]}),(0,s.jsx)(ea,{title:"Docs",type:"agent",items:((null==d?void 0:d.flatMap(e=>e||[]))||[]).filter(e=>{var t;return!(null==e?void 0:null===(t=e.tags)||void 0===t?void 0:t.some(e=>e.toLowerCase().startsWith("llm")))}).map(e=>({id:e.id,name:e.name,image:e.image,isSelected:!1})),onItemClick:e=>{null!=e&&e.is_frozen||(c("codegptplusbeta",{id:e.id,label:e.name,fromMarketplace:!0,image:e.image,description:"",welcome:null==e?void 0:e.welcome,prompt_library:null==e?void 0:e.prompt_library}),u("codegptplusbeta"),(0,K.$)(),(0,Y.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:e.name+"ContextDropdownMarketplaceAgent"}))},"data-sentry-element":"SearchableSubMenu","data-sentry-source-file":"context-dropdown.tsx"})]})]})})]})})}let es=e=>{let{trigger:t,data:a,onAdd:n}=e;return null};var el=a(63726);let er=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}},eo=(0,v.forwardRef)((e,t)=>{let{placeholder:a,onChange:n,onKeyDown:r,children:o,input:i,setInput:d}=e,[c,u]=(0,v.useState)([]),[m,p]=(0,v.useState)(0),[x,f]=(0,v.useState)(-1),[h,g]=(0,v.useState)(""),[y,b]=(0,v.useState)({bottom:0,left:0}),j=(0,v.useRef)(null),w=(0,v.useRef)([]),[N,k]=(0,v.useState)([""]),[C,z]=(0,v.useState)(0);(0,v.useImperativeHandle)(t,()=>j.current);let S=er(j,t),M=(0,v.useMemo)(()=>v.Children.toArray(o).filter(Boolean).filter(e=>v.isValidElement(e)&&e.type===es).map(e=>({trigger:e.props.trigger,data:e.props.data,onAdd:e.props.onAdd})),[o]);(0,v.useEffect)(()=>{let e=()=>{if(!j.current)return;let e=j.current,t=e.selectionStart,a=e.value.slice(0,t),n=e.value.slice(t),s=M.map(e=>e.trigger),l=new RegExp("(^|\\s)(".concat(s.join("|"),")\\S*$")),r=a.match(l);if(r&&(""===n||/\s/.test(n[0]))){let t=r[2],s=r.index+r[1].length,l=a.slice(s+1).toLowerCase();if("/"===t&&a+n!==t+l)return;let o=M.find(e=>e.trigger===t);if(o){let a=o.data.filter(e=>e.display.toLowerCase().includes(l));if(1===a.length&&a[0].display.toLowerCase()===l)u([]),f(-1),g("");else{u(a),f(s),p(0),g(t);let n=e.getBoundingClientRect(),l=Math.min(Math.max(...a.map(e=>8*e.display.length+40)),320),r=window.innerWidth,o=n.left;n.left+l>r&&(o=n.left-l),b({bottom:window.innerHeight-n.top,left:o})}}}else u([]),f(-1),g("")},t=j.current;return null==t||t.addEventListener("select",e),null==t||t.addEventListener("input",e),()=>{null==t||t.removeEventListener("select",e),null==t||t.removeEventListener("input",e)}},[y,M]),(0,v.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&(u([]),f(-1),g(""))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,v.useEffect)(()=>{j.current&&j.current.focus()},[]);let P=e=>{if(-1!==x&&j.current){var t;let a=j.current,s=a.value.slice(0,x),l=a.value.slice(a.selectionStart),r="/"===h?"".concat(s).concat(h).concat(e.display," ").concat(l):"".concat(s);d(r),a.value=r;let o=x+h.length+e.display.length+1;a.setSelectionRange(o,o),u([]),f(-1),g("");let i=M.find(e=>e.trigger===h);null==i||null===(t=i.onAdd)||void 0===t||t.call(i,e),null==n||n(r)}},A=e=>{let t=N.slice(0,C+1);t.push(e),k(t),z(t.length-1)},L=()=>{if(C>0){z(C-1);let e=N[C-1];j.current&&(d(e),j.current.value=e),null==n||n(e)}},I=()=>{if(C<N.length-1){z(C+1);let e=N[C+1];j.current&&(d(e),j.current.value=e),null==n||n(e)}};return(0,s.jsxs)("div",{className:"relative h-full",children:[(0,s.jsx)("textarea",{ref:S,className:"mentions h-full max-h-[calc(100%-2px)] w-full resize-none overflow-auto bg-transparent px-1 text-sm text-foreground",onChange:e=>{e.preventDefault();let t=e.target.value;d(t),A(t),null==n||n(t)},onKeyDown:e=>{if(c.length>0&&("ArrowDown"===e.key?(e.preventDefault(),p(e=>{var t;let a=(e+1)%c.length;return null===(t=w.current[a])||void 0===t||t.scrollIntoView({block:"nearest"}),a})):"ArrowUp"===e.key?(e.preventDefault(),p(e=>{var t;let a=(e-1+c.length)%c.length;return null===(t=w.current[a])||void 0===t||t.scrollIntoView({block:"nearest"}),a})):"Enter"===e.key&&c.length>0?(e.preventDefault(),P(c[m])):"Escape"===e.key&&(u([]),f(-1),g(""))),0===c.length){if("z"===e.key&&(e.metaKey||e.ctrlKey)&&e.shiftKey?(e.preventDefault(),I()):"z"===e.key&&(e.metaKey||e.ctrlKey)?(e.preventDefault(),L()):"v"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,l.M1)().then(t=>{let{selectionStart:a,selectionEnd:n}=e.target,s=i.substring(0,null!=a?a:i.length)+t+i.substring(null!=n?n:i.length);d(s),j.current&&(j.current.value=s)})),"x"===e.key&&(e.metaKey||e.ctrlKey)){e.preventDefault();let{selectionStart:t,selectionEnd:a}=e.target,n=i.substring(null!=t?t:i.length,null!=a?a:i.length);(0,l.zp)(n);let s=i.substring(0,null!=t?t:i.length)+i.substring(null!=a?a:i.length);d(s),j.current&&(j.current.value=s)}else null==r||r(e)}},placeholder:a}),c.length>0&&i.trim()&&(0,s.jsxs)("div",{className:"fixed z-[9999] max-h-56 w-full max-w-80 overflow-auto rounded-medium border bg-content2 p-2 shadow-md",style:{bottom:"".concat(y.bottom,"px"),left:"".concat(y.left,"px")},children:[(0,s.jsx)("div",{className:"bg-content2 py-1 text-xs uppercase text-default-500",children:"Short cuts"}),c.slice(0,10).map((e,t)=>{let a=e.display.includes(".")?e.display.split(".").at(-1):null;return(0,s.jsx)("div",{ref:e=>{w.current[t]=e},className:"flex cursor-pointer items-center rounded-small p-2 ".concat(t===m?"bg-foreground/10":""," ").concat(a&&"command-with-icon"),...a&&{"data-language":a,"data-id":a},onMouseDown:()=>P(e),onMouseEnter:()=>p(t),children:(0,s.jsxs)("div",{className:"".concat(a?"ml-1":""," flex items-center gap-2"),children:[e.avatar&&(0,s.jsx)(el.default,{src:e.avatar,alt:e.display,className:"size-4 rounded-full"}),(0,s.jsx)("span",{className:"text-sm",children:e.display})]})},e.id)})]})]})});eo.displayName="MentionTextarea";var ei=e=>{let{agents:t,selectedModelOrAgent:a}=e,{setCurrentProviderModel:n}=(0,U.o)(),{setSelectedProvider:l}=(0,U.Y)();return t.map(e=>(0,s.jsx)(E,{className:"cursor-pointer rounded-md hover:bg-content3",onClick:()=>{null!=e&&e.is_frozen||(n("codegptplusbeta",{id:e.id,label:e.name,fromMarketplace:!0,image:e.image,description:"",welcome:null==e?void 0:e.welcome,prompt_library:null==e?void 0:e.prompt_library}),l("codegptplusbeta"),(0,K.$)(),(0,Y.q)({eventName:"clickOver",groupBy:"modelSelectorDropdown",target:e.name+"ModelDropdownMarketplaceAgent"}))},children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(X.J,{disableSkeleton:!0,src:e.image||"/logotypes/custom.png",alt:e.name,loading:"eager",classNames:{wrapper:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,s.jsx)("span",{className:"relative w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-xs leading-tight",children:e.name})]}),(null==a?void 0:a.id)===e.id&&(0,s.jsx)(et.Z,{className:"size-4"})]})},e.id))},ed=a(82720),ec=a(96326);function eu(e){var t;let{selectedModelOrAgent:a,isLoading:n}=e,[r,o]=(0,v.useState)([]),{isPopoverOpen:i,setIsPopoverOpen:d}=(0,U.Y)(),c=(0,v.useRef)(null),[u,m]=(0,v.useState)("top");(0,v.useEffect)(()=>{(0,l.Qn)().then(o)},[]),(0,v.useEffect)(()=>{if(!c.current)return;let e=c.current,t=()=>{if(!c.current)return;let{top:e}=c.current.getBoundingClientRect();m(e<window.innerHeight/2?"bottom":"top")},a=new ResizeObserver(t);return a.observe(c.current),window.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e&&a.unobserve(e),a.disconnect(),window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[]);let p=(0,v.useMemo)(()=>r.filter(e=>e.reasoning),[r]),x=(0,v.useMemo)(()=>r.filter(e=>!e.reasoning),[r]);return(0,s.jsx)("div",{className:"select-none","data-sentry-component":"ModelDropdown","data-sentry-source-file":"model-dropdown.tsx",children:(0,s.jsxs)(_,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"model-dropdown.tsx",children:[(0,s.jsx)(D,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"model-dropdown.tsx",children:(0,s.jsxs)("button",{ref:c,className:"flex shrink-0 cursor-pointer select-none items-center gap-2 rounded-md py-0.5 text-xs leading-normal text-default-500",disabled:i||n,onClick:()=>{(0,Y.q)({eventName:"clickOver",groupBy:"modelSelectorDropdown",target:"modelDropdownButton"})},children:[n?(0,s.jsx)(ed.Z,{size:3,color:"current"}):(null==a?void 0:a.label)&&(0,s.jsx)("div",{className:"h-3.5 w-3.5 shrink-0 rounded-full",children:(0,s.jsx)(X.J,{loading:"eager",disableSkeleton:!0,src:a&&(null==a?void 0:a.image)?null==a?void 0:a.image:(0,h.k)(null==a?void 0:a.label),alt:null!==(t=null==a?void 0:a.label)&&void 0!==t?t:"model",className:"h-3.5 w-3.5 shrink-0 rounded-full"})}),(0,s.jsxs)("div",{className:"relative flex w-full items-center justify-center gap-2 overflow-hidden text-start lowercase",children:[(0,s.jsx)("span",{className:"w-full truncate text-xs",children:(null==a?void 0:a.label.length)>0?null==a?void 0:a.label:"Select Your AI"}),(0,s.jsx)(ec.Z,{className:"size-4 shrink-0 text-default-500","data-sentry-element":"ChevronUpDownIcon","data-sentry-source-file":"model-dropdown.tsx"})]})]})}),(0,s.jsxs)(F,{className:"w-56",side:u,sideOffset:10,alignOffset:-6,align:"start","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"model-dropdown.tsx",children:[x.length>0&&(0,s.jsx)(ei,{agents:x,selectedModelOrAgent:a}),p.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H,{className:"bg-content3"}),(0,s.jsx)(V,{children:"Reasoning Models"}),(0,s.jsx)(ei,{agents:p,selectedModelOrAgent:a})]}),(0,s.jsx)("button",{className:"w-full cursor-pointer bg-transparent px-2 py-1.5 text-right text-xs text-default-400 underline underline-offset-2 hover:bg-transparent hover:text-default-500",onClick:()=>{(0,Y.q)({eventName:"clickOver",groupBy:"modelSelectorDropdown",target:"3rdPartyModelsDropdownOpenModal"}),d(!0)},children:"View More"})]})]})})}var em=a(73915),ep=a(77752),ex=a(64263);let ef=async()=>{if(n)return n;try{return n=await (0,ep.Wr)()}catch(e){return n=Object.keys(ex.prompts.english)}},eh=async()=>{var e;let t=await ef();return[...em.Z&&(null===em.Z||void 0===em.Z?void 0:null===(e=em.Z.plan)||void 0===e?void 0:e.toLowerCase())!=="free"?[{id:"codeBuilder",display:"Code Builder"},{id:"planning",display:"Planning"}]:[],...t.map(e=>{var t;return{id:e,display:(null==e?void 0:null===(t=e.at(0))||void 0===t?void 0:t.toUpperCase())+(null==e?void 0:e.slice(1))}})]},eg=async()=>[...await (0,l.yR)()].map(e=>{let t=e.split("/"),a=t.length>3?".../".concat(t[t.length-3],"/").concat(t[t.length-2],"/").concat(t[t.length-1]):e;return{id:e,display:a}}),ev=async()=>{var e;return[...em.Z&&(null===em.Z||void 0===em.Z?void 0:null===(e=em.Z.plan)||void 0===e?void 0:e.toLowerCase())!=="free"?[{id:"manual",display:"Select code"},{id:"deepinsights",display:"Deep insights"}]:[]]};var ey=a(34811);let eb=async()=>new Promise(async e=>{setTimeout(async()=>{e(await (0,l.gp)().catch(()=>!1))},500)});function ej(){let{data:e,mutate:t,isLoading:a,isValidating:n}=(0,ey.ZP)("/autoSelect",()=>eb(),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:6e4});return{isAutoSelectEnabled:e,isLoading:null!=a?a:n,mutate:()=>new Promise(e=>{setTimeout(()=>{t().then(t=>{e(t)})},300)})}}let ew=(0,w.Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}));var eN=a(33308),ek=a(87549),eC=a(54567),ez=a(88725),eS=a(28400),eM=a(77948),eP=a(82489),eA=a(84697),eL=a(43088);let eI=(0,w.Ue)(e=>({image:{base64:"",name:""},setImage:t=>{let{base64:a,name:n}=t;return e({image:{base64:a,name:n}})},showTooltip:!1,setShowTooltip:t=>e({showTooltip:t})}));var e_=a(10466),eD=a(40213),eT=a(4746),eO=a(95538),eR=a(31423),eZ=a(45123),eF=a(66589),eE=a(92883);function eV(e){var t,a;let{isLoading:n}=e,{selectedProvider:r,setSelectedProvider:o}=(0,U.Y)(),{userData:i}=(0,em.v)(),{mutate:d}=(0,eL.T)(),c=(0,e_.U)(e=>e.setOpen),{image:u,setImage:m,setShowTooltip:p}=eI(),{loginFromEventSource:x}=(0,eD.R)(),f=async e=>{let t=e[0],a=t.name.split(".").pop(),n=t.name;if(["png","jpg","jpeg","webp"].includes("image/"+a)){S.Am.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await new Promise((e,a)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=e=>a(e)});m({base64:e,name:n}),p(!0)}catch(e){S.Am.error("Error uploading file")}},h=()=>{(0,Y.q)({eventName:"clickOver",target:"uploadImage"})},{getInputProps:g,open:v}=(0,eF.uI)({onDrop:f,multiple:!1,useFsAccessApi:!1,noClick:!0,accept:{"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],..."ollama"!==r&&{"image/webp":[".webp"]}}});return["codegptplusbeta","ollama"].includes(r)?(null==i?void 0:null===(t=i.plan)||void 0===t?void 0:t.toLowerCase())!=="free"?(0,s.jsxs)("button",{onClick:()=>{h(),u.base64?m({base64:"",name:""}):v()},disabled:n,className:"relative flex w-[1.4rem] shrink-0 cursor-pointer select-none items-center justify-center gap-1 overflow-hidden rounded-md border text-xs leading-normal","data-sentry-component":"UploadImageButton","data-sentry-source-file":"upload-image-button.tsx",children:[(0,s.jsx)("input",{...g(),className:"hidden"}),u.base64?(0,s.jsx)(eR.Z,{className:"size-3 shrink-0 text-red-400/80"}):(0,s.jsx)(eZ.Z,{className:"size-3 shrink-0 text-default-700"})]}):(0,s.jsx)(ez.e,{classNames:{content:"bg-content2",base:"p-4 bg-transparent"},offset:0,content:(0,s.jsxs)("div",{className:"grid max-w-xs gap-4 px-1 py-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs font-bold uppercase",children:"Vision"}),(0,s.jsx)(eE.RO,{})]}),(0,s.jsx)("span",{className:"text-md text-default-500",children:"Upload an image to use as a prompt for the model. Only available in CodeGPT and Ollama model providers."}),(0,s.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,s.jsx)(eO.A,{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 text-xs leading-normal",size:"sm",onPress:async()=>{var e;x({type:"signup"}),(0,Y.q)({eventName:"ads",object:"adButton",message:"Vision ".concat((null==i?void 0:null===(e=i.plan)||void 0===e?void 0:e.includes("trial"))?"Upgrade":"SignUp")})},children:(null==i?void 0:null===(a=i.plan)||void 0===a?void 0:a.includes("trial"))?"Upgrade":"Sign Up"}),(0,s.jsx)(eO.A,{variant:"bordered",className:"w-fit border",size:"sm",onPress:()=>{(0,l.os)("https://docs.codegpt.co/docs/tutorial-features/vision")},children:"Learn more"})]})]}),"data-sentry-element":"Tooltip","data-sentry-component":"UploadImageButton","data-sentry-source-file":"upload-image-button.tsx",children:(0,s.jsx)("button",{onClick:()=>{h(),"codegptplusbeta"!==r&&((0,K.$)(),o("codegptplusbeta"),d().then(()=>{c(!0)}))},className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500",children:(0,s.jsx)(eT.Z,{className:"size-3.5 shrink-0","data-sentry-element":"PhotoIcon","data-sentry-source-file":"upload-image-button.tsx"})})}):null}function eH(e){var t;let a=eN.a2.find(t=>t.value===e);return null!==(t=null==a?void 0:a.label)&&void 0!==t?t:e}function eB(e){var t,a,n;let{onSubmit:r,isLoading:o,stop:i,clearChat:d,currentModel:c,modelState:u,providerState:m,rounded:p,placeholder:x}=e,[f,h]=(0,v.useState)([]),g=(0,v.useRef)(""),[y,b]=(0,v.useState)([]),{files:j,setFiles:w,selectedContextLevel:N,setSelectedContextLevel:k}=(0,q.J)(),[C,z]=(0,v.useState)([]),[S,M]=(0,v.useState)(""),P=(0,eS.Nr)(S,500),[A,L]=(0,v.useState)(null),I=ew(e=>e.setOpen),{isAutoSelectEnabled:_}=ej(),{selectedProvider:D}=(0,U.Y)(),T="codegptplusbeta"===D,{userData:O}=(0,em.v)(),R=(0,v.useRef)(null),[Z,F]=(0,v.useState)({id:"",label:"",image:"",description:"",fromMarketplace:!1});(0,v.useEffect)(()=>{""===Z.id&&(0,l.us)().then(e=>{F(e)})},[null==Z?void 0:Z.id]);let E=(null===(t=u[m])||void 0===t?void 0:t.id)?u[m]:Z,V=(0,v.useCallback)(async()=>{var e,t,a,n,s,i,d,c;if(o)return;let u=(null==A?void 0:null===(e=A.selectedText)||void 0===e?void 0:e.trim().length)>0,m="```".concat(null!==(d=null==A?void 0:A.language)&&void 0!==d?d:"md","\n").concat(null==A?void 0:null===(a=A.selectedText)||void 0===a?void 0:null===(t=a.replaceAll(/\t/g,""))||void 0===t?void 0:t.trim(),"\n```\n"),p=["planning","codebuilder","stackoverflow"].includes(g.current.toLowerCase()),x="";"manual"!==N.id&&""!==N.id&&T&&(x=N.id),(await (0,l.Qn)()).some(e=>!e.reasoning&&e.id===E.id)&&0===j.length&&!u&&""===x&&(x="codebase"),console.log({externalInput:(null==A?void 0:null===(n=A.selectedText)||void 0===n?void 0:n.trim().length)>0?"".concat(S,"\n"):null!=S?S:"",hasSelection:u,codeSelection:m});let f=null!==(c=null===(s=R.current)||void 0===s?void 0:s.value)&&void 0!==c?c:"";r({...u?{codeSelection:m}:{},externalInput:(null==A?void 0:null===(i=A.selectedText)||void 0===i?void 0:i.trim().length)>0?"".concat(S,"\n"):null!=S?S:"",chatRequestOptions:{options:{headers:{"Content-Type":"application/json",...g.current&&!p?{promptType:g.current}:{},...p?{customPromptType:g.current.toLowerCase()}:{},...x?{contextLevel:x}:{},...j.length>0?{files:j}:{}}}}}).then(e=>{!e&&(M(f),R.current&&(R.current.value=f))}),g.current="",_||L(null),M(""),R.current&&(R.current.value="")},[j,null==A?void 0:A.language,null==A?void 0:A.selectedText,S,_,T,o,r,N.id]);return(0,v.useEffect)(()=>{let e=async e=>{let{selectedText:t,promptType:a}=e.data;if(!t){L(null);return}L(e.data),"selection"!==a&&"copyFromTerminal"!==a&&(g.current=a,V())};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[V]),(0,v.useEffect)(()=>{let e=()=>{eh().then(e=>{h(e)}),eg().then(e=>{b(e)}),ev().then(e=>{z(e)})};e(),setTimeout(()=>{e()},1e3)},[null==O?void 0:O.loggedIn]),(0,v.useEffect)(()=>{0===S.trim().length&&(g.current="")},[P,S]),(0,s.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-2 text-sm","data-sentry-component":"MessageTextarea","data-sentry-source-file":"message-textarea.tsx",children:(0,s.jsxs)("div",{className:"relative grid h-full w-full grid-rows-[auto_1fr_auto] bg-content1 text-foreground dark:bg-content2 ".concat(p?"rounded-xl border border-content3 dark:shadow-[-10rem_-3rem_10rem_-3rem_#7a00ff30,10rem_-3rem_10rem_-3rem_#dd00ff30,0_1rem_1rem_-0.5rem_#0c161e38,0_0px_0px_1px_rgba(255,255,255,.01)]":"border-t border-content3"),children:[(0,s.jsxs)("div",{className:"relative z-10 flex w-full items-center gap-2 overflow-hidden overflow-x-auto p-2 text-xs text-default-500 ".concat(p?"rounded-t-xl":"backdrop-blur-sm"),children:[(0,s.jsx)(en,{filesList:y,"data-sentry-element":"ContextDropdown","data-sentry-source-file":"message-textarea.tsx"}),"deepinsights"===N.id&&(0,s.jsx)(ez.e,{content:"Use code graph to enhance the AI context",children:(0,s.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500",children:[(0,s.jsx)(eM.Z,{className:"size-3"}),(0,s.jsx)("span",{className:"shrink-0 overflow-hidden text-ellipsis whitespace-pre break-words",children:N.display}),(0,s.jsx)("span",{onClick:()=>{k(q.W[0])},children:(0,s.jsx)(eP.Z,{className:"size-3 shrink-0 cursor-pointer"})})]})}),A&&(0,s.jsxs)("button",{"data-type":"userFile",className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500","data-id":eH(null!==(a=null==A?void 0:A.language)&&void 0!==a?a:"md"),"data-language":eH(null!==(n=null==A?void 0:A.language)&&void 0!==n?n:"md"),children:[(0,s.jsx)("span",{className:"shrink-0 overflow-hidden text-ellipsis whitespace-pre break-words",children:null==A?void 0:A.fileName}),(0,s.jsx)("span",{className:"ml-auto flex items-center gap-1",children:A.from&&(0,s.jsxs)(s.Fragment,{children:[A.from.line+1,":",A.to.line]})}),(0,s.jsx)("span",{onClick:()=>{L(null)},children:(0,s.jsx)(eP.Z,{className:"size-3 shrink-0 cursor-pointer"})})]}),(0,s.jsx)("div",{className:"flex w-full select-none gap-2 overflow-x-auto py-1 scrollbar-hide",children:j.map(e=>{let{name:t,path:a,fromLine:n,toLine:l}=e,r=a.split("/"),o=r.length>3?".../".concat(r[r.length-3],"/").concat(r[r.length-2],"/").concat(r[r.length-1]):a;return(0,s.jsx)(ez.e,{content:o,children:(0,s.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500","data-language":a.split(".").pop(),children:[(0,s.jsx)("p",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-nowrap",children:t}),(0,s.jsxs)("span",{className:"ml-auto flex items-center gap-1 text-xs",children:[(n||l)&&(0,s.jsxs)(s.Fragment,{children:[(null!=n?n:0)+1,":",(null!=l?l:0)+1]}),(0,s.jsx)("span",{onClick:()=>{w(j.filter(e=>e.path!==a))},children:(0,s.jsx)(eP.Z,{className:"size-3 shrink-0 cursor-pointer"})})]})]})},a)})}),(0,s.jsx)("div",{className:"ml-auto flex",children:(0,s.jsx)(ez.e,{content:"Configuration","data-sentry-element":"Tooltip","data-sentry-source-file":"message-textarea.tsx",children:(0,s.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border border-transparent p-0.5 text-xs leading-normal hover:border-content4",disabled:o,onClick:()=>{(0,Y.q)({eventName:"clickOver",target:"openProviderSettingsTextarea"}),I(!0)},children:(0,s.jsx)(ek.Z,{className:"size-4 shrink-0","data-sentry-element":"Cog6ToothIcon","data-sentry-source-file":"message-textarea.tsx"})})})})]}),(0,s.jsx)("div",{className:"editor h-full min-h-10 w-full overflow-auto px-2 py-1 transition-all",children:(0,s.jsxs)(eo,{ref:R,placeholder:x,input:S,setInput:M,onChange:e=>{M(e)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),V())},"data-sentry-element":"MentionTextarea","data-sentry-source-file":"message-textarea.tsx",children:[(0,s.jsx)(es,{trigger:"/",data:f,onAdd:e=>{g.current=e.id},"data-sentry-element":"Mention","data-sentry-source-file":"message-textarea.tsx"}),(0,s.jsx)(es,{trigger:"#",data:y,onAdd:e=>{let t=e.id,a=t.split("/").pop()||t;j.some(e=>e.path===t)||w([...j,{name:a,path:t}])},"data-sentry-element":"Mention","data-sentry-source-file":"message-textarea.tsx"}),T?(0,s.jsx)(es,{trigger:"@",data:C,onAdd:e=>{k({id:e.id,title:e.display,description:""})}}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between p-2",children:[(0,s.jsx)(eu,{selectedModelOrAgent:E,isLoading:o,"data-sentry-element":"ModelDropdown","data-sentry-source-file":"message-textarea.tsx"}),(0,s.jsx)("div",{className:"flex justify-end gap-2",children:o?o&&(0,s.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 text-xs leading-normal",disabled:!o,onClick:async()=>{i(),g.current=""},children:[(0,s.jsx)(eC.Z,{className:"h-4 w-4 shrink-0 text-red-400/80"}),(0,s.jsx)("span",{className:"text-red-400/80",children:"Stop"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eV,{isLoading:o}),(0,s.jsxs)("button",{onClick:()=>V(),className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 text-xs leading-normal",disabled:o||!S,children:[(0,s.jsx)(eA.Z,{className:"size-3"}),"Send"]})]})})]})]})})}var eq=a(43608),eG=a(89866),eU=a(72301);let eY=async e=>{let{provider:t,port:a}=e,n={maxTokens:512,temperature:0,windowMemory:10},s=await fetch("http://localhost:54112/".concat(a,"/api/").concat(t,"/config")).then(e=>e.json()).catch(()=>n);return{...n,...s}};var eK=a(55470),eJ=a(46374),eW=a(79627),e$=a(98752);function eQ(){var e,t,a;let{configuration:n,mutate:r}=function(){let e=(0,U.Y)(e=>e.selectedProvider),t=(0,eU.usePathname)().split("/")[1],{data:a,mutate:n,isLoading:s,isValidating:l}=(0,ey.ZP)("/api/agents/".concat(e,"/config"),()=>eY({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:0});return{configuration:a,isLoading:null!=s?s:l,mutate:()=>new Promise(e=>{setTimeout(()=>{n().then(t=>{e(t)})},300)})}}(),o=(0,U.Y)(e=>e.selectedProvider),i=eq.Z[o],{isAutoSelectEnabled:d,mutate:c}=ej(),u=null!==(t=null==n?void 0:n.temperature)&&void 0!==t?t:0,m=null!==(a=null==n?void 0:n.windowMemory)&&void 0!==a?a:10,[p,x]=(0,v.useState)(!1),[f,g]=(0,v.useState)(u?u>.7?"creative":u>.2?"balanced":"precise":"precise"),[y,b]=(0,v.useState)(!1),{isOpen:j,setOpen:w}=ew();(0,v.useEffect)(()=>{b(o.toLowerCase().includes("codegpt"))},[o]);let N=async(e,t)=>{x(!0),(0,Y.q)({eventName:"changeValue",target:t,value:e.toString()}),"MaxTokens"===t&&await (0,l.af)(e.toString(),o),"Temperature"===t&&await (0,l.MQ)(e.toString(),o),"WindowMemory"===t&&await (0,l.Dz)(e.toString(),o),r().then(()=>{S.Am.success("Configuration updated"),x(!1)})};return(0,s.jsx)(eG.Vq,{open:j,onOpenChange:w,"data-sentry-element":"Dialog","data-sentry-component":"SetConfigurationModal","data-sentry-source-file":"set-configuration-modal.tsx",children:(0,s.jsxs)(eG.cZ,{"data-sentry-element":"DialogContent","data-sentry-source-file":"set-configuration-modal.tsx",children:[(0,s.jsxs)(eG.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"set-configuration-modal.tsx",children:[(0,s.jsxs)(eG.$N,{className:"flex items-center gap-2","data-sentry-element":"DialogTitle","data-sentry-source-file":"set-configuration-modal.tsx",children:[(0,s.jsx)(ek.Z,{className:"h-6 w-6 shrink-0 text-default-500","data-sentry-element":"Cog6ToothIcon","data-sentry-source-file":"set-configuration-modal.tsx"}),"Global Configuration"]}),(0,s.jsx)(eG.Be,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"set-configuration-modal.tsx",children:"Configure global parameters here"})]}),(0,s.jsx)("div",{className:"grid gap-8",children:(0,s.jsx)(eJ.i,{isSelected:d,onValueChange:async()=>{(0,Y.q)({eventName:"clickOver",target:"optionMenuActiveListeningButton"}),await (0,l.KC)(!d),await c()},classNames:{base:(0,h.cn)("inline-flex w-full max-w-md flex-row-reverse items-start","justify-between cursor-pointer rounded-md gap-2 p-4 border","data-[selected=true]:border"),wrapper:"p-0 h-5 w-9 overflow-visible",thumb:(0,h.cn)("w-4 h-4","group-data-[hover=true]:border-primary","group-data-[selected=true]:ms-5","group-data-[pressed=true]:w-5","group-data-[selected]:group-data-[pressed]:ms-4")},"data-sentry-element":"Switch","data-sentry-source-file":"set-configuration-modal.tsx",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{children:"Enable current file context"}),(0,s.jsx)("p",{className:"text-tiny text-default-400",children:"When enabled, the AI will be able to understand the current file open in the IDE"})]})})}),!y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eW.j,{}),(0,s.jsxs)(eG.fK,{children:[(0,s.jsxs)(eG.$N,{className:"flex items-center gap-2",children:[(0,s.jsx)(ek.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),i.name," Settings"]}),(0,s.jsx)(eG.Be,{children:"Ensure to properly configure your providers parameters here"})]}),(0,s.jsx)(eW.j,{}),(0,s.jsxs)("div",{className:"grid gap-8 pt-4",children:[i.temperature&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(e$.L,{isDisabled:p,label:(0,s.jsxs)("p",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("span",{children:"Conversation Style"}),(0,s.jsx)("span",{children:"|"}),(0,s.jsx)("span",{children:f})]}),"aria-label":"Temperature",color:"primary",minValue:0,maxValue:1,step:.01,defaultValue:u,classNames:{label:"capitalize"},onChangeEnd:e=>{g(Number(e)?Number(e)>.7?"creative":Number(e)>.2?"balanced":"precise":"precise"),N(Number(e),"Temperature")}}),(0,s.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[(0,s.jsx)(eK.Z,{className:"h-4 w-4 shrink-0"}),"The temperature or creativity of the AI model. Higher values can lead to more creative responses but may be less precise."]})]}),(0,s.jsx)(eW.j,{})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(e$.L,{isDisabled:p,label:"Memory","aria-label":"windowMemory",minValue:0,maxValue:y?10:100,defaultValue:m,onChangeEnd:e=>N(Number(e),"WindowMemory")}),(0,s.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[(0,s.jsx)(eK.Z,{className:"h-4 w-4 shrink-0"}),"Number of previous messages to consider when generating a response."]})]})]}),i.config_info_link&&i.config_info_link.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eW.j,{}),(0,s.jsx)(eG.cN,{children:(0,s.jsx)("p",{className:"mx-auto w-full text-center text-xs text-default-500",children:null===(e=i.config_info_link)||void 0===e?void 0:e.map((e,t)=>(0,s.jsx)("span",{children:e.label&&(0,s.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>(0,l.Yo)(e.link),children:e.label})},t))})})]})]})]})})}var eX=a(38093);let e0=e=>(0,s.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...e,"data-sentry-element":"svg","data-sentry-component":"CheckIcon","data-sentry-source-file":"check.tsx",children:(0,s.jsx)("polyline",{points:"20 6 9 17 4 12","data-sentry-element":"polyline","data-sentry-source-file":"check.tsx"})}),e1=async e=>{let{port:t}=e;return new Promise(async e=>{setTimeout(async()=>{let a={isEnabled:!1,maxTokens:500,provider:"CodeGPT Plus",model:"Plus",delay:1200},n=await fetch("http://localhost:54112/".concat(t,"/api/autocomplete/config")).then(e=>e.json()).catch(()=>a);e({...a,...n})},500)})};function e2(){let e=(0,eU.usePathname)().split("/")[1],{data:t,mutate:a,isLoading:n,isValidating:s}=(0,ey.ZP)("/api/autocomplete/config",()=>e1({port:e}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:6e4});return{configuration:t,isLoading:null!=n?n:s,mutate:()=>new Promise(e=>{setTimeout(()=>{a().then(t=>{e(t)})},300)})}}var e5=a(24574);let e4=(0,w.Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}));var e3=a(39381),e8=a(49355),e6=a(92021);function e7(){var e;let[t,a]=(0,v.useState)(""),[n,r]=(0,v.useState)(!1),[o,i]=(0,v.useState)(0),[d,c]=(0,v.useState)(""),{providers:u,mutate:m}=(0,e5.k)(),{configuration:p,mutate:x}=e2(),{isOpen:f,setOpen:h}=e4(),g=-1!==u.findIndex(e=>{var t,a;return e.link===(null==p?void 0:null===(t=p.provider)||void 0===t?void 0:t.toLowerCase())&&(null===(a=e.installedModels)||void 0===a?void 0:a.includes(null==p?void 0:p.model))}),y=u.flatMap(e=>{var t,a;return(null==e?void 0:null===(t=e.autocompleteModels2)||void 0===t?void 0:t.length)?e.autocompleteModels2.map(t=>({provider:e.name,model:t.id,label:t.label,link:e.link})):(null==e?void 0:null===(a=e.autocompleteModels)||void 0===a?void 0:a.length)?e.autocompleteModels.map(t=>({provider:e.name,model:t,link:e.link})):[]}),b=async(e,t)=>{console.log({value:e,type:t}),a(t),"Model"===t&&e.currentKey&&await (0,l.wb)(e.currentKey),"Enabled"===t&&await (0,l.mt)(e),"MaxTokens"===t&&await (0,l.Fc)(e),"Delay"===t&&await (0,l.$v)(e),x().then(()=>a(""))},j=async e=>{var t;if(!await (0,l._f)()){S.Am.error("Ollama is not running,",{duration:3e3,action:(0,s.jsx)(eO.A,{color:"default",variant:"light",size:"sm",className:"h-auto p-1 underline",onPress:()=>{(0,l.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})});return}r(!0),c(e);let a=S.Am.loading((0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[(0,s.jsxs)("span",{children:["Downloading ",e," model"]}),(0,s.jsx)("button",{onClick:()=>S.Am.dismiss(a),children:"x"})]})),n=null===(t=(await fetch("http://localhost:54112/1/api/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})).body)||void 0===t?void 0:t.getReader();if(!n)throw Error("No reader available");let d=new TextDecoder;(async()=>{for(;;){let{done:e,value:t}=await n.read();if(e)break;let s=d.decode(t);try{s.includes('{"status":"success"}')&&(S.Am.success("Model downloaded successfully"),100!==o&&i(100),m(),S.Am.dismiss(a),setTimeout(()=>{r(!1),i(0),c("")},5e3));let{completed:e,total:t}=JSON.parse(s);if(e&&t){let a=Math.floor(parseInt(e)/parseInt(t)*100);a!==o&&i(a)}}catch(e){}}})()},w=null===(e=y.find(e=>(0,ep.Xz)(e.provider)===(null==p?void 0:p.provider)))||void 0===e?void 0:e.provider;return(0,s.jsx)(eG.Vq,{open:f,onOpenChange:h,"data-sentry-element":"Dialog","data-sentry-component":"SetAutocompleteConfigurationModal","data-sentry-source-file":"set-autocomplete-configuration-modal.tsx",children:(0,s.jsxs)(eG.cZ,{className:"","data-sentry-element":"DialogContent","data-sentry-source-file":"set-autocomplete-configuration-modal.tsx",children:[(0,s.jsxs)(eG.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"set-autocomplete-configuration-modal.tsx",children:[(0,s.jsx)(eG.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"set-autocomplete-configuration-modal.tsx",children:"AI code auto-completion"}),(0,s.jsx)(eG.Be,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"set-autocomplete-configuration-modal.tsx",children:"Predict and offer code suggestions as you program in the editor"})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsx)("section",{className:"grid w-full",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("p",{className:"grid text-sm",children:[(0,s.jsx)("span",{children:"Status"}),(0,s.jsx)("span",{className:"text-xs text-default-500",children:(null==p?void 0:p.isEnabled)?"Enabled":"Disabled"})]}),"Enabled"===t?(0,s.jsx)(eO.A,{size:"sm",variant:"bordered",isLoading:"Enabled"===t,endContent:(0,s.jsx)("span",{children:"Loading"})}):(0,s.jsx)(eJ.i,{isDisabled:"Enabled"===t,color:"primary",onValueChange:()=>b(!(null==p?void 0:p.isEnabled),"Enabled"),isSelected:null==p?void 0:p.isEnabled,startContent:(0,s.jsx)(e0,{className:"h-3 shrink-0"})})]})})}),(null==p?void 0:p.isEnabled)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eW.j,{}),(0,s.jsxs)("section",{className:"grid gap-2",children:[(0,s.jsx)("p",{className:"text-sm",children:"AI Model"}),(0,s.jsx)(e3.g,{placeholder:"Completion Model",selectedKeys:["".concat(w," - ").concat(null==p?void 0:p.model)],className:"w-full",classNames:{popoverContent:"pointer-events-auto",trigger:"border bg-content3 shadow"},fullWidth:!0,isLoading:"Model"===t,onSelectionChange:e=>b(e,"Model"),"aria-label":"Completion Model",renderValue:()=>{var e;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eX.T,{provider:null!==(e=null==p?void 0:p.provider)&&void 0!==e?e:"codegpt",className:"border-0",width:24,height:24}),(0,s.jsxs)("p",{className:"grid",children:[(0,s.jsx)("span",{className:"text-sm",children:null==p?void 0:p.model}),(0,s.jsx)("span",{className:"text-xs text-default-500",children:null==p?void 0:p.provider})]})]},null==p?void 0:p.provider)},children:y.map(e=>(0,s.jsx)(e8.R,{value:"".concat(e.provider," - ").concat(e.model),textValue:(null==e?void 0:e.label)?"".concat(e.model,":").concat(e.label):e.model,startContent:(0,s.jsx)(eX.T,{provider:e.link,width:24,height:24}),children:(0,s.jsxs)("p",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm",children:e.model}),(0,s.jsxs)("span",{className:"text-xs text-default-500",children:[null==e?void 0:e.provider,(null==e?void 0:e.label)&&" - ".concat(e.label)]})]})},"".concat(e.provider," - ").concat(e.model)))}),(null==p?void 0:p.provider)==="Ollama"&&!g&&!n&&(0,s.jsx)(eO.A,{color:"default",variant:"bordered",size:"md",className:"border- border bg-content4 shadow-md",onPress:()=>{console.log("download model"),(null==p?void 0:p.model)&&j(null==p?void 0:p.model)},children:"Download Model"},"downloadModel"),n&&(0,s.jsx)(e6.W,{label:"Downloading ".concat(d," model"),"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:o,color:"primary",showValueLabel:!0,className:"my-auto max-w-md"}),(null==p?void 0:p.provider)!=="Ollama"&&(0,s.jsx)("div",{className:"mt-2 flex items-center justify-between gap-8 rounded-xl border border-content3 p-3",children:(0,s.jsxs)("p",{className:"text-xs text-default-500",children:["The model to use for code auto-completion. Remember connect your"," ",(0,s.jsx)("u",{children:null==p?void 0:p.provider})," service."]})})]})]})]})]})})}let e9=e=>{let{children:t,className:a}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",width:"24px",viewBox:"0 -960 960 960",className:a,fill:"currentColor",stroke:"currentColor","data-sentry-element":"svg","data-sentry-component":"svgWrapper","data-sentry-source-file":"icons.tsx",children:t})},te=e=>{let{className:t}=e;return e9({className:t,children:(0,s.jsx)("path",{d:"M451-404h58v-134h134v-58H509v-134h-58v134H317v58h134v134ZM104-130.92v-654.46q0-35.05 23.79-58.83Q151.57-868 186.62-868h586.76q35.05 0 58.83 23.79Q856-820.43 856-785.38v438.76q0 35.05-23.79 58.83Q808.43-264 773.38-264h-536.3L104-130.92ZM214-322h559.38q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-438.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H186.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v517.15L214-322Zm-52 0v-488 488Z"})})},tt=e=>{let{className:t}=e;return e9({className:t,children:(0,s.jsx)("path",{d:"M160-360v-80h640v80H160Zm0-160v-80h640v80H160Z"})})};var ta=a(34928);let tn=e=>{let{className:t,...a}=e;return(0,s.jsx)(ta.eh,{className:(0,h.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a,"data-sentry-element":"unknown","data-sentry-component":"ResizablePanelGroup","data-sentry-source-file":"resizable.tsx"})},ts=ta.s_,tl=e=>{let{withHandle:t,className:a,...n}=e;return(0,s.jsx)(ta.OT,{className:(0,h.cn)("focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0",a),...n,"data-sentry-element":"unknown","data-sentry-component":"ResizableHandle","data-sentry-source-file":"resizable.tsx",children:t&&(0,s.jsx)("div",{className:"z-20 flex h-4 w-8 items-center justify-center rounded-lg border border-content4 bg-content2/50 backdrop-blur-sm",children:(0,s.jsx)(tt,{className:"h-4 w-4"})})})},tr=async()=>await d();function to(){let{data:e,mutate:t}=(0,ey.ZP)("history",()=>tr(),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0});return{history:null!=e?e:[],mutate:t}}var ti=a(66846),td=a(58512),tc=a(36020),tu=(0,r.$)("3c61c2869021efab3ae68e1a65c6b7d7f90e71ed"),tm=a(51245),tp=a(25180),tx=a(45592),tf=a(2886),th=a(68382),tg=a(74753),tv=a(72031),ty=a(64542),tb=a(594),tj=a(96609),tw=a(21059),tN=a(76034),tk=a(4263),tC=a(63649),tz=a(99228),tS=a(90699);function tM(e){let{id:t,name:a,description:n,image:l,welcome:r,fromMarketplace:o,promptLibrary:i}=e,{isConnected:d}=(0,eL.T)(),{setIsPopoverOpen:c}=(0,U.Y)(),u=(0,U.Y)(e=>e.selectedProvider),{onSubmit:p}=(0,v.useContext)(m.p);return(0,s.jsxs)("div",{className:"relative mx-auto grid w-full max-w-md select-none content-center items-center justify-center gap-4 pt-16 text-center","data-sentry-component":"AgentCustomHome","data-sentry-source-file":"agent-custom-home.tsx",children:[(0,s.jsxs)("div",{className:"agent-avatar relative mx-auto h-16 w-16 select-none rounded-full",children:[l?(0,s.jsx)(X.J,{src:l,alt:"agent",loading:"eager",disableSkeleton:!0,radius:"full",classNames:{wrapper:"agent-avatar shrink-0 rounded-full bg-content3",img:"agent-avatar shrink-0 rounded-full bg-content3 opacity-100 block"}}):(0,s.jsx)(eX.T,{provider:u,className:"mx-auto h-16 w-16 select-none rounded-full"}),!u.includes("anthropic")&&!u.includes("openai")&&!u.includes("mistral")&&!u.includes("cohere")&&(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 z-10 grid size-8 items-center justify-center rounded-full",children:(0,s.jsx)(eX.T,{provider:u,className:"border-border mx-auto aspect-square select-none rounded-full border-2 shadow-sm dark:border-content1"})})]}),(0,s.jsxs)("div",{className:"flex select-none flex-col items-center justify-center",children:[(0,s.jsx)("p",{className:"relative w-full overflow-hidden truncate text-xl capitalize",children:a}),(0,s.jsx)("p",{className:"relative w-full hyphens-none text-center text-default-500",children:r||n||"Your new AI Code Assistant"})]}),!["ollama","lmstudio","codegptplusbeta"].includes(u)&&(d||u.includes("githubcopilot")?(0,s.jsx)(tb.z,{size:"sm",variant:"dot",color:"success",className:"mx-auto border",children:"Connected"}):(0,s.jsx)(eO.A,{size:"sm",className:"mx-auto w-fit border",variant:"bordered",onPress:()=>c(!0),children:"Set Connection"})),(0,s.jsx)("div",{className:"relative flex flex-wrap justify-center gap-2 overflow-hidden whitespace-nowrap",children:null==i?void 0:i.filter(e=>e.title.length>0).map(e=>(0,s.jsxs)("span",{className:"flex w-fit cursor-pointer items-center gap-2 overflow-hidden rounded-lg border border-content3 px-2 py-1 text-left text-sm text-default-500 hover:bg-content2",onClick:()=>{p({externalInput:e.prompt})},children:[(0,s.jsx)(tS.Z,{className:"size-3 shrink-0 text-default-500"}),(0,s.jsx)("p",{className:"truncate",children:e.title})]},e.id))})]},"custom-home-agent-".concat(t))}function tP(){let{currentProviderModel:e}=(0,U.o)(),t=e[(0,U.Y)(e=>e.selectedProvider)];if(null==t?void 0:t.id){var a;return(0,s.jsx)(tM,{id:t.id,name:t.label,image:null!==(a=t.image)&&void 0!==a?a:(0,h.k)(t.label),description:t.description,welcome:t.welcome,fromMarketplace:t.fromMarketplace,promptLibrary:t.prompt_library})}}var tA=(0,r.$)("2247321fe784d7e3e63f5295fa3dce4f53139461"),tL=(0,r.$)("ec6503d5b2f75fa9005e9021c379f49610ca5395");let tI=()=>{let{setCurrentProgress:e,setCurrentProgressMessage:t,setIsIndexing:a}=N(),n=(0,eU.usePathname)().split("/")[1];return{handleIndexCodebase:async()=>{a(!0),e(0),t("Reading files");try{var s;let a=await fetch("http://localhost:54112/".concat(n,"/api/index-codebase"));if(!a.ok){let e=await a.text();console.error(e);return}let l=null===(s=a.body)||void 0===s?void 0:s.getReader();if(!l)throw Error("No reader available");let r=new TextDecoder;for(;;)try{let{done:a,value:n}=await l.read();if(a){e(100),await new Promise(e=>setTimeout(e,1e3)),t("");break}for(let a of r.decode(n).split("\n\n").filter(Boolean)){let n=JSON.parse(a),s=n.progress;t(n.message),e(s)}}catch(e){console.error("There was an error indexing your codebase. Please try again");break}}catch(e){S.Am.error("There was an error indexing your codebase. Please try again")}finally{a(!1)}}}};var t_=a(54607),tD=a(12562),tT=a(28631),tO=a(79103),tR=a(5022),tZ=a(85364),tF=a(36457);let tE={Github:I.wGg,Gitlab:e=>(0,s.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("title",{children:"GitLab"}),(0,s.jsx)("path",{d:"m23.6004 9.5927-.0337-.0862L20.3.9814a.851.851 0 0 0-.3362-.405.8748.8748 0 0 0-.9997.0539.8748.8748 0 0 0-.29.4399l-2.2055 6.748H7.5375l-2.2057-6.748a.8573.8573 0 0 0-.29-.4412.8748.8748 0 0 0-.9997-.0537.8585.8585 0 0 0-.3362.4049L.4332 9.5015l-.0325.0862a6.0657 6.0657 0 0 0 2.0119 7.0105l.0113.0087.03.0213 4.976 3.7264 2.462 1.8633 1.4995 1.1321a1.0085 1.0085 0 0 0 1.2197 0l1.4995-1.1321 2.4619-1.8633 5.006-3.7489.0125-.01a6.0682 6.0682 0 0 0 2.0094-7.003z"})]}),Bitbucket:e=>(0,s.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("title",{children:"Bitbucket"}),(0,s.jsx)("path",{d:"M.778 1.213a.768.768 0 00-.768.892l3.263 19.81c.084.5.515.868 1.022.873H19.95a.772.772 0 00.77-.646l3.27-20.03a.768.768 0 00-.768-.891zM14.52 15.53H9.522L8.17 8.466h7.561z"})]})};function tV(){let{theme:e}=(0,tF.F)(),[t,a]=(0,v.useState)(!1),[n,r]=(0,v.useState)([]),{selectedGraph:o,setSelectedGraph:i,selectedTab:d,setSelectedTab:c,isModalOpen:u,setIsModalOpen:m}=(0,k.B)(),p="dark"===e,{userData:x}=(0,em.v)(),{loggedIn:f}=x||{},[h,g]=(0,v.useState)({id:"",exists:!1,updatedAt:null}),[y,b]=(0,v.useState)(!1),{handleIndexCodebase:j}=tI(),{currentProgress:w,currentProgressMessage:C,isIndexing:z}=N(),M=(0,v.useCallback)(()=>{f&&(a(!0),fetch("http://localhost:54112/1/api/codegptplusbeta/graph").then(e=>e.json()).then(e=>{r(e),a(!1)}))},[f]);(0,v.useEffect)(()=>{M(),y||z||tA().then(e=>{g({id:e.id,exists:e.exists,updatedAt:e.updatedAt})})},[f,M,z,y]);let P=e=>{i(e),(0,l.setKeyValue)("selectedGraph",e)};return(0,s.jsxs)(eG.Vq,{open:u,onOpenChange:m,"data-sentry-element":"Dialog","data-sentry-component":"GraphSelectorModal","data-sentry-source-file":"graph-selector-modal.tsx",children:[(0,s.jsx)(ez.e,{content:"Codebase",classNames:{content:"bg-content2 text-default-500"},"data-sentry-element":"Tooltip","data-sentry-source-file":"graph-selector-modal.tsx",children:(0,s.jsx)(eG.hg,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"graph-selector-modal.tsx",children:(0,s.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",children:(0,s.jsxs)("div",{className:"relative rounded-full",children:[(0,s.jsxs)("span",{className:"absolute bottom-0 right-0 flex size-1.5",children:[(0,s.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full"}),(0,s.jsx)("span",{className:"relative inline-flex size-1.5 rounded-full "})]}),(0,s.jsx)(tO.Z,{className:"size-4","data-sentry-element":"GitForkIcon","data-sentry-source-file":"graph-selector-modal.tsx"})]})})})}),(0,s.jsxs)(eG.cZ,{className:"pb-4 pt-0",crossClassName:"text-default-500","data-sentry-element":"DialogContent","data-sentry-source-file":"graph-selector-modal.tsx",children:[(0,s.jsx)(eG.$N,{className:"mt-6","data-sentry-element":"DialogTitle","data-sentry-source-file":"graph-selector-modal.tsx",children:"Augmented Context"}),(0,s.jsxs)(t_.n,{selectedKey:d,onSelectionChange:e=>{c(e)},variant:"underlined",color:"default",className:"mt-4",classNames:{tabList:"p-0",panel:"w-full",base:"w-full"},"data-sentry-element":"Tabs","data-sentry-source-file":"graph-selector-modal.tsx",children:[(0,s.jsx)(tD.r,{title:"Codebase","data-sentry-element":"Tab","data-sentry-source-file":"graph-selector-modal.tsx",children:(0,s.jsxs)("div",{className:"".concat(p?"bg-custom-radial":"bg-custom-radial-light"," flex flex-col gap-4 px-2 pb-4"),children:[(0,s.jsx)("div",{className:"grid gap-2",children:(0,s.jsx)("p",{className:"text-sm leading-loose text-default-500",children:"Index your workspace to enable Codebase Context level"})}),z&&(0,s.jsxs)("section",{className:"flex flex-col items-center justify-center gap-1",children:[(0,s.jsx)(e6.W,{label:C,"aria-label":"Indexing...",size:"sm",autoFocus:!0,value:w,color:"primary",className:"my-auto w-full",classNames:{label:"text-xs text-default-500"}}),(0,s.jsxs)("span",{className:"text-xs text-default-500",children:[w,"%"]})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-2",children:[(0,s.jsx)("p",{className:"flex w-full justify-end gap-1 text-xs text-default-500",children:h.updatedAt&&!z?"Last indexing: "+new Date(h.updatedAt).toLocaleString():""}),(0,s.jsx)("button",{disabled:z||y,className:"w-full rounded-md border-blue-400 bg-blue-400 px-4 py-2 text-sm text-default-700 transition-all duration-300 hover:bg-blue-500 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>{j().then(()=>{m(!1)})},children:z?(0,s.jsxs)("div",{className:"flex w-full items-center justify-center gap-1",children:[(0,s.jsx)(tR.Z,{className:"size-4 animate-spin"}),(0,s.jsx)("span",{children:"Indexing"})]}):h.exists?(0,s.jsxs)("div",{className:"flex w-full items-center justify-center gap-1",children:[(0,s.jsx)(tZ.Z,{className:"size-4"}),(0,s.jsx)("span",{children:"Re Sync"})]}):(0,s.jsx)("span",{children:"Create Codebase Index"})}),h.exists&&(0,s.jsxs)("button",{disabled:z||y,className:"flex w-full items-center justify-center gap-1 text-xs text-default-500 underline",onClick:()=>{b(!0),a(!0),tL(h.id).then(()=>{S.Am.success("Index deleted"),g({id:"",exists:!1,updatedAt:null})}).finally(()=>{b(!1)})},children:[y&&(0,s.jsx)(tR.Z,{className:"size-4 animate-spin text-default-500"}),"Delete Codebase"]})]})]})},"codebase"),(0,s.jsx)(tD.r,{title:"Deep Insights","data-sentry-element":"Tab","data-sentry-source-file":"graph-selector-modal.tsx",children:(0,s.jsxs)("div",{className:"".concat(p?"bg-custom-radial":"bg-custom-radial-light"," flex flex-col gap-4 px-2"),children:[(0,s.jsx)("div",{className:"grid gap-2",children:(0,s.jsxs)("p",{className:"prose w-full max-w-md text-sm text-default-500",children:["Connect your workspace with your knowledge graphs to enable"," ",(0,s.jsx)("span",{className:"text-default-700",children:"Deep insights"})," Context level"]})}),n.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(e3.g,{classNames:{popoverContent:"pointer-events-auto"},variant:"bordered",selectedKeys:[null==o?void 0:o.id],onSelectionChange:e=>{let t=n.find(t=>t.id===e.currentKey);t&&P(t)},size:"sm",label:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(tO.Z,{className:"size-4 shrink-0 text-default-500"}),(0,s.jsx)("span",{children:"Select your code graph"})]}),renderValue:e=>e.map(e=>(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("p",{className:"relative flex w-full overflow-hidden text-ellipsis whitespace-nowrap break-words pr-1 font-mono text-sm text-foreground",children:null==e?void 0:e.rendered})},"selected-graph-".concat(e.key))),children:null==n?void 0:n.map(e=>(0,s.jsx)(e8.R,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["github"===e.gitProvider&&(0,s.jsx)(tE.Github,{className:"size-4 shrink-0 text-default-500"}),"gitlab"===e.gitProvider&&(0,s.jsx)(tE.Gitlab,{className:"size-4 shrink-0 text-default-500"}),"bitbucket"===e.gitProvider&&(0,s.jsx)(tE.Bitbucket,{className:"size-4 shrink-0 text-default-500"}),(0,s.jsxs)("span",{children:[e.repoOrg,"/",e.repoName]}),(0,s.jsx)(tb.z,{variant:"flat",size:"sm",color:"primary",classNames:{content:"text-primary-500 select-none"},children:e.branch})]})},e.id))}),(0,s.jsx)(ez.e,{content:"Update graphs",children:(0,s.jsx)(eO.A,{onPress:()=>{M()},variant:"bordered",radius:"md",size:"lg",isIconOnly:!0,disabled:t,children:(0,s.jsx)(tZ.Z,{className:"size-4 shrink-0 text-default-500 ".concat(t&&"animate-spin-reverse")})})})]}),(null==o?void 0:o.id)&&(0,s.jsx)(tT.GG,{asChild:!0,children:(0,s.jsx)(eO.A,{variant:"solid",size:"md",className:"w-full text-foreground",children:"Use Graphs"})})]}):(0,s.jsxs)("div",{className:"card mx-auto flex w-full items-center justify-between gap-2 rounded-xl border border-content3 p-6 text-sm",children:[(0,s.jsx)("p",{className:"text-default-700",children:"Don't have a Code Graph? "}),(0,s.jsx)("button",{className:"rounded-md border-blue-400 bg-blue-400 px-4 py-2 text-sm text-default-700 transition-all duration-300 hover:bg-blue-500 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>{(0,l.Yo)("https://app.codegpt.co/en/graph")},children:"Create a new"})]})]})},"deepinsights")]})]})]})}var tH=a(64848),tB=a(20686),tq=a(8580);let tG=[12,13,14,15,16,17,18,19,20];var tU=a(6240),tY=a(43172),tK=a(79637),tJ=a(69543),tW=a(81181),t$=a(8026);function tQ(e){let{id:t,title:a,date:n,onClick:l,onDelete:r,onEdit:o}=e,[i,d]=(0,v.useState)(!1),[c,u]=(0,v.useState)(a),{historyId:p}=(0,v.useContext)(m.p),x=()=>{i?(o(t,c),d(!1)):d(!0)},f=()=>{u(a),d(!1)},h=()=>{r(t)};if(i)return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{value:c,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()},className:"mr-2 grow rounded-md border border-content3 bg-content1 px-2 py-1.5 text-sm",autoFocus:!0}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),x()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,s.jsx)(et.Z,{className:"size-3"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),f()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,s.jsx)(eP.Z,{className:"size-3"})})]})]});let g=p===t;return(0,s.jsxs)("div",{className:"group flex w-full cursor-pointer items-center justify-between gap-2 rounded-md px-2 py-1 text-left font-normal ".concat(g?"bg-content3":"hover:bg-content2"),onClick:()=>l(t),"data-sentry-component":"ChatHistoryItem","data-sentry-source-file":"chat-history-item.tsx",children:[(0,s.jsxs)("div",{className:"flex w-full grow flex-col items-start overflow-hidden",children:[(0,s.jsx)("span",{className:"w-full truncate text-sm",children:a}),(0,s.jsx)("span",{className:"text-xs text-default-500 first-letter:capitalize",children:n})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),x()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,s.jsx)(tW.Z,{className:"size-3","data-sentry-element":"Pencil","data-sentry-source-file":"chat-history-item.tsx"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),h()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,s.jsx)(t$.Z,{className:"size-3","data-sentry-element":"Trash2","data-sentry-source-file":"chat-history-item.tsx"})})]})]})}function tX(e){let{title:t,chats:a,onChatClick:n,onDelete:l,onEdit:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"ChatHistoryGroup","data-sentry-source-file":"chat-history-group.tsx",children:[(0,s.jsx)("p",{className:"text-xs uppercase text-default-500",children:t}),a.map(e=>(0,s.jsx)(tQ,{id:e.id,title:e.name,date:(0,tK.Q)(new Date(e.date.getTime()-6e4*e.date.getTimezoneOffset()),{addSuffix:!0,locale:tJ._}),onClick:n,onDelete:l,onEdit:r},e.id))]})}var t0=a(94696),t1=a(49945),t2=a(42646),t5=a(2814),t4=a(75009),t3=a(39078);let t8=e=>{let{service:t,url:a}=e;return(0,s.jsxs)(t3.CustomLink,{href:a,isExternal:!0,className:"flex w-full cursor-pointer flex-col gap-2 overflow-hidden rounded-lg border border-content3 p-2","data-sentry-element":"CustomLink","data-sentry-component":"StackOverflowCard","data-sentry-source-file":"stackoverflow-cards.tsx",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjAgMTIwIj48c3R5bGU+LnN0MHtmaWxsOiNiY2JiYmJ9LnN0MXtmaWxsOiNmNDgwMjN9PC9zdHlsZT48cGF0aCBjbGFzcz0ic3QwIiBkPSJNODQuNCA5My44VjcwLjZoNy43djMwLjlIMjIuNlY3MC42aDcuN3YyMy4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zOC44IDY4LjRsMzcuOCA3LjkgMS42LTcuNi0zNy44LTcuOS0xLjYgNy42em01LTE4bDM1IDE2LjMgMy4yLTctMzUtMTYuNC0zLjIgNy4xem05LjctMTcuMmwyOS43IDI0LjcgNC45LTUuOS0yOS43LTI0LjctNC45IDUuOXptMTkuMi0xOC4zbC02LjIgNC42IDIzIDMxIDYuMi00LjYtMjMtMzF6TTM4IDg2aDM4LjZ2LTcuN0gzOFY4NnoiLz48L3N2Zz4=",className:"h-4 w-4 min-w-4 max-w-4",alt:"".concat(t," icon")}),(0,s.jsx)("span",{className:"truncate text-sm capitalize",children:t})]}),(0,s.jsx)("span",{className:"truncate text-xs text-default-500",children:a})]})};var t6=a(47580),t7=a(88090);let t9={CodeBlock:t0.CodeBlock,FileTreeWrap:function(e){let{paths:t,bodyOnly:a}=e;return(0,s.jsx)(t5.default,{paths:t,bodyOnly:a,"data-sentry-element":"FileTree","data-sentry-component":"FileTreeWrap","data-sentry-source-file":"file-tree-wrap.tsx"})},FileTree:t2.default,PlanningCard:t4.default,StackOverflowCards:e=>{let{cards:t}=e;return(0,s.jsx)("div",{className:"cards mb-2 mt-2 flex flex-col gap-2","data-sentry-component":"StackOverflowCards","data-sentry-source-file":"stackoverflow-cards.tsx",children:t.map((e,t)=>(0,s.jsx)(t8,{service:e.service,url:e.url},t))})},StackOverflowBadge:e=>{let{args:t}=e;return(0,s.jsxs)("p",{className:"flex items-center gap-1 text-sm text-default-500","data-sentry-component":"StackOverflowBadge","data-sentry-source-file":"stackoverflow-badge.tsx",children:['Searching on Stack Overflow "',JSON.parse(t).query,'"...']})},Tags:e=>{let{promptType:t,files:a,chunks:n,contextLevel:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"Tags","data-sentry-source-file":"tags.tsx",children:[(0,s.jsxs)("p",{className:"flex select-none items-center gap-2",children:[l?(0,s.jsxs)("span",{className:"command command-bordered command-with-icon animate-slideIn relative h-auto gap-1 overflow-hidden",children:[(0,s.jsx)(t6.Z,{className:"size-4 shrink-0 text-default-500"}),(0,s.jsx)("span",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground",children:l})]}):null,t?(0,s.jsx)("span",{className:"command command-bordered command-with-icon","data-command":"command",style:{alignItems:"end"},children:(0,s.jsx)("span",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground",children:t})}):null,null==a?void 0:a.map(e=>(0,s.jsx)("span",{className:"command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden","data-language":e.path.split(".").pop(),children:(0,s.jsx)("span",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground",children:e.name})},e.path))]}),(null==n?void 0:n.length)>0&&(0,s.jsx)(t1.default,{chunks:n})]})},ChunksCard:t1.default,TerminalExecutor:t7.default},ae=e=>{let{content:t,display:a,props:n,id:l}=e;if(a in t9){let e=t9[a];return l?(0,s.jsx)("div",{id:l,children:(0,s.jsx)(e,{...n})}):(0,s.jsx)(e,{...n})}if("fragment"===a)return t};var at=a(21159),aa=a(95235),an=a(61972);let as=e=>e.map(e=>({...e,date:new Date(e.updated_at)}));function al(){var e;let[t,a]=(0,v.useState)(!1),{history:n,mutate:r}=to(),{historyId:i,clearChat:d,setMessages:p,setHistoryId:x}=(0,v.useContext)(m.p),{selectedProvider:f}=(0,U.Y)(),{setCurrentProviderModel:h,currentProviderModel:g}=(0,U.o)(),y=null===(e=g[f])||void 0===e?void 0:e.id,b=as(n);(0,v.useEffect)(()=>{t&&r()},[r,t]);let j=(0,v.useMemo)(()=>{let e={today:[],yesterday:[],lastWeek:[],lastMonth:[],thisYear:[],older:[]},t=new Date(new Date().getTime()+6e4*new Date().getTimezoneOffset()),a=(0,at.k)(t,7),n=(0,at.k)(t,30),s=t.getFullYear();return b.forEach(l=>{l.date.getDate()===t.getDate()&&l.date.getMonth()===t.getMonth()&&l.date.getFullYear()===t.getFullYear()?e.today.push(l):(0,aa.g)(l.date)?e.yesterday.push(l):l.date>=a?e.lastWeek.push(l):l.date>=n?e.lastMonth.push(l):l.date.getFullYear()===s?e.thisYear.push(l):e.older.push(l)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>t.date.getTime()-e.date.getTime())}),e},[b]),w=e=>{c(e).then(()=>{e===i&&d(),r()})},N=(e,t)=>{u(e,t).then(()=>{r()})},k=e=>{o(e).then(async t=>{if(console.time("restoreHistory"),p(M(t.map(e=>{let t=JSON.parse(e.display);return{role:e.role,content:e.content,display:t.map(e=>{let t;try{t=JSON.parse(e)}catch(a){t=e}return ae({...t})})}}))),x(e),!y){let e=await (0,l.us)();h("codegptplusbeta",{label:e.label,id:e.id,image:e.image,fromMarketplace:e.fromMarketplace,description:e.description})}console.timeEnd("restoreHistory"),a(!1)})};return(0,s.jsxs)(eG.Vq,{open:t,onOpenChange:a,"data-sentry-element":"Dialog","data-sentry-component":"ChatHistoryModal","data-sentry-source-file":"chat-history-modal.tsx",children:[(0,s.jsx)(eG.hg,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"chat-history-modal.tsx",children:(0,s.jsx)(ez.e,{content:"History",classNames:{content:"bg-content2 text-default-500"},"data-sentry-element":"Tooltip","data-sentry-source-file":"chat-history-modal.tsx",children:(0,s.jsx)("button",{onClick:async()=>{a(!0)},className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",children:(0,s.jsx)(an.Z,{className:"size-4","data-sentry-element":"HistoryIcon","data-sentry-source-file":"chat-history-modal.tsx"})})})}),(0,s.jsxs)(eG.cZ,{className:"flex h-full max-h-[60vh] flex-col gap-8 rounded-xl bg-content2","data-sentry-element":"DialogContent","data-sentry-source-file":"chat-history-modal.tsx",children:[(0,s.jsx)(eG.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"chat-history-modal.tsx",children:(0,s.jsx)(eG.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"chat-history-modal.tsx",children:"Chat History"})}),(0,s.jsx)("div",{className:"max-h-[100%] overflow-auto",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[j.today.length>0&&(0,s.jsx)(tX,{title:"Today",chats:j.today,onChatClick:k,onDelete:w,onEdit:N}),j.yesterday.length>0&&(0,s.jsx)(tX,{title:"Yesterday",chats:j.yesterday,onChatClick:k,onDelete:w,onEdit:N}),j.lastWeek.length>0&&(0,s.jsx)(tX,{title:"Last 7 days",chats:j.lastWeek,onChatClick:k,onDelete:w,onEdit:N}),j.lastMonth.length>0&&(0,s.jsx)(tX,{title:"Last 30 days",chats:j.lastMonth,onChatClick:k,onDelete:w,onEdit:N}),j.thisYear.length>0&&(0,s.jsx)(tX,{title:"This year",chats:j.thisYear,onChatClick:k,onDelete:w,onEdit:N}),j.older.length>0&&(0,s.jsx)(tX,{title:"Older",chats:j.older,onChatClick:e=>{k(e)},onDelete:w,onEdit:N})]})})]})]})}function ar(e){let{label:t}=e,{userData:a}=(0,em.v)(),{loginFromEventSource:n}=(0,eD.R)(),r=(0,U.Y)(e=>e.selectedProvider),{isLoading:o}=(0,v.useContext)(m.p),i=(null==a?void 0:a.dailyUsage)||0,d=(null==a?void 0:a.dailyMaxUsage)||-1;return -1===d||"codegptplusbeta"!==r||o?null:(0,s.jsxs)("div",{className:"flex items-center gap-2","data-sentry-component":"WidgetLimitInteractions","data-sentry-source-file":"widget-limit-interactions.tsx",children:[(0,s.jsx)(tb.z,{variant:"dot",size:"sm",classNames:{base:"border border-content2 bg-content2 text-default-500"},color:0===i?"success":i/d>.6&&i/d<1?"warning":i===d?"danger":"success","data-sentry-element":"Chip","data-sentry-source-file":"widget-limit-interactions.tsx",children:(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:[i," of ",d]})})}),i===d&&!a.loggedIn&&(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[(0,s.jsx)("span",{className:"cursor-pointer text-sm text-primary underline",onClick:async()=>{n({type:"signup"}),(0,Y.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions widget"})},children:"Sign Up"}),(0,s.jsx)("p",{className:"text-default-500",children:(0,s.jsx)("span",{children:"to get more interactions"})})]}),i>=d&&a.loggedIn&&(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[(0,s.jsx)("span",{className:"cursor-pointer text-sm text-primary underline",onClick:()=>{(0,l.Yo)("".concat(tc.Ft,"/en/extensions/plans")),(0,Y.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions"})},children:"Upgrade your plan"}),(0,s.jsx)("p",{className:"text-default-500",children:(0,s.jsx)("span",{children:"to get unlimited interactions"})})]})]})}var ao=e=>{let{role:t,content:a,display:n,status:l,index:r,isLastMessage:o,isLoading:i,providerState:d,modelHistory:c,reload:u,image:m,codeSelection:x}=e;return(0,s.jsx)(s.Fragment,{children:(e=>{var t;let{role:a,content:l,image:r,codeSelection:d,status:c}=e;return(0,s.jsxs)("div",{className:"flex flex-col ".concat(i?"streaming":"quiet"," ").concat("user"===a?"ml-auto max-w-[95%] rounded-md bg-content2 p-2":""),"data-sentry-component":"messageCard","data-sentry-source-file":"message.tsx",children:[(0,s.jsxs)("div",{children:[l?(0,s.jsxs)("div",{className:"".concat(a," flex flex-col gap-3"),children:[(null==r?void 0:r.base64)&&(0,s.jsx)("div",{className:"grid gap-2",children:(0,s.jsx)("div",{className:"grid max-w-48 gap-4",children:(0,s.jsxs)("div",{className:"relative grid grid-flow-col items-center justify-start gap-2 overflow-hidden rounded-lg border border-content3 p-2",children:[(0,s.jsx)("div",{className:"relative size-8 overflow-hidden rounded-lg",children:(0,s.jsx)("img",{className:"object-contain",src:"url(".concat(r.base64,")")})}),(0,s.jsxs)("div",{className:"relative grid w-full gap-0.5 overflow-hidden truncate",children:[(0,s.jsxs)("span",{className:"text-xs text-default-500",children:[(0,s.jsx)("span",{className:"uppercase",children:r.name&&r.name.includes(".")?null===(t=r.name)||void 0===t?void 0:t.split(".")[1]:""})," ","Image"]}),(0,s.jsx)("span",{className:"justify-end overflow-hidden text-ellipsis text-left text-xs",children:r.name})]})]})})}),n||(d?(0,s.jsxs)(s.Fragment,{children:[l.replaceAll(d,""),(0,s.jsx)(p.J,{content:d})]}):(0,s.jsx)(p.J,{content:l}))]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(tR.Z,{className:"size-4 animate-spin text-default-500"}),(0,s.jsx)("span",{className:"text-xs text-default-500",children:"Thinking"})]}),o&&"assistant"===a&&i&&l&&(0,s.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,s.jsx)(tR.Z,{className:"size-4 animate-spin text-default-400"})})]}),o&&"assistant"===a&&l&&(0,s.jsx)("footer",{className:"flex gap-2",children:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ar,{}),c&&!(null==c?void 0:c.done)&&(0,s.jsxs)(eO.A,{variant:"light",size:"sm",className:"capitalize text-default-500",children:[(0,s.jsx)(tR.Z,{className:"size-4 text-default-500"}),(null==c?void 0:c.message)||"Writing response..."]})]})})})]})})("assistant"===t?i&&o&&"assistant"===t&&!a?{role:t,status:l}:{role:t,content:a}:{role:t,content:a,image:m,codeSelection:x})})},ai=a(50870),ad=a(94059),ac=a(124);function au(e){var t,a,n,r,o,i,d,c,u,m,p,x;let{isLoading:f}=e,{mutate:h}=(0,eL.T)(),{loginFromEventSource:g}=(0,eD.R)(),[y,b]=(0,v.useState)(!1),{userData:j,mutate:w}=(0,em.v)(),N=async()=>{await (0,ai.j)({accessToken:"",refreshToken:"",expiresAt:""}),await Promise.all([w(),h()]),b(!1)};if(!j)return null;let k=(null==j?void 0:null===(t=j.plan)||void 0===t?void 0:t.toLowerCase())==="free";return(0,s.jsxs)(ad.J2,{open:y,onOpenChange:b,"data-sentry-element":"Popover","data-sentry-component":"PopoverPlan","data-sentry-source-file":"popover-plan.tsx",children:[(0,s.jsx)(ad.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"popover-plan.tsx",children:(0,s.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",disabled:f,children:(0,s.jsx)("div",{className:"flex items-center gap-2 capitalize",children:(null==j?void 0:j.loggedIn)&&(null==j?void 0:null===(a=j.user)||void 0===a?void 0:a.avatarUrl)?(0,s.jsx)("div",{className:"size-5 shrink-0 select-none overflow-hidden rounded-full border bg-content2",children:(0,s.jsx)(X.J,{loading:"eager",disableSkeleton:!0,src:null==j?void 0:null===(n=j.user)||void 0===n?void 0:n.avatarUrl,alt:"user",className:"size-5 shrink-0 select-none rounded-full bg-content3"})}):(0,s.jsx)(ac.Z,{className:"my-auto size-4 h-4 shrink-0 text-default-500"})})})}),(0,s.jsx)(ad.yk,{sideOffset:5,alignOffset:0,align:"end","data-sentry-element":"PopoverContent","data-sentry-source-file":"popover-plan.tsx",children:(0,s.jsx)("div",{className:"flex flex-col gap-4",children:j&&(null==j?void 0:j.loggedIn)&&(null===(r=j.user)||void 0===r?void 0:r.status)==="deleted"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"It seems that your account is canceled, to reactivate please contact us at support"}),(0,s.jsx)(tb.z,{variant:"dot",size:"sm",color:"danger",children:null!==(p=null===(o=j.user)||void 0===o?void 0:o.status)&&void 0!==p?p:"No status"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{className:"flex items-center gap-1 text-sm font-bold capitalize",children:[(0,s.jsx)("span",{children:"Plan"}),j&&(null==j?void 0:j.loggedIn)&&null!==(x=null==j?void 0:null===(d=j.plan)||void 0===d?void 0:null===(i=d.toLowerCase())||void 0===i?void 0:i.replaceAll("codegpt",""))&&void 0!==x?x:"Free"]})}),(0,s.jsx)(tb.z,{variant:"dot",size:"sm",color:j&&(null==j?void 0:j.loggedIn)?(null==j?void 0:null===(c=j.plan)||void 0===c?void 0:c.toLowerCase())!=="canceled"?"success":"danger":"default",classNames:{content:"text-[8px]"},children:j&&(null==j?void 0:j.loggedIn)?(null==j?void 0:null===(u=j.plan)||void 0===u?void 0:u.toLowerCase())!=="canceled"?"Active":"Canceled":"Visitor"})]}),(null==j?void 0:j.loggedIn)&&(0,s.jsx)("p",{className:"text-xs text-default-500",children:null==j?void 0:null===(m=j.user)||void 0===m?void 0:m.email})]}),(0,s.jsx)(eW.j,{className:"bg-content3"}),(0,s.jsxs)("div",{className:"grid gap-2 text-xs",children:[(0,s.jsxs)("p",{className:"text-md flex w-full flex-row justify-between text-default-500",children:[(0,s.jsxs)("span",{children:[k?"Monthly":"Daily"," interactions"]}),(0,s.jsxs)("span",{className:"text-right",children:[null==j?void 0:j.dailyUsage," of ",null==j?void 0:j.dailyMaxUsage]})]}),["Pro Models","Custom Agents","Vision"].map((e,t)=>(0,s.jsxs)("p",{className:"text-md flex w-full flex-row justify-between text-default-500",children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("span",{className:"text-right",children:j&&k?(0,s.jsx)(eP.Z,{className:"size-3"}):(0,s.jsx)(et.Z,{className:"size-3 text-success"})})]},"feature-".concat(t)))]}),(0,s.jsxs)("div",{className:"mt-1 flex gap-2",children:[j&&!(null==j?void 0:j.loggedIn)&&(0,s.jsx)(eO.A,{fullWidth:!0,size:"sm",color:"primary",onPress:async()=>{g({type:"signup"}),(0,Y.q)({eventName:"ads",object:"adButton",message:"popoverPlanCreateAccountButton"})},children:"Create Account"}),j&&j.loggedIn&&k&&(0,s.jsx)(eO.A,{fullWidth:!0,size:"sm",color:"primary",onPress:()=>{(0,l.Yo)("".concat(tc.Ft,"/en/plans")),(0,Y.q)({eventName:"ads",object:"adButton",message:"popoverPlanUpgradeButton"})},children:"Upgrade"}),(null==j?void 0:j.loggedIn)?(0,s.jsx)(eO.A,{fullWidth:!0,variant:"bordered",className:"border",size:"sm",isLoading:f,onPress:()=>N(),children:"Disconnect"}):(0,s.jsx)(eO.A,{fullWidth:!0,variant:"bordered",className:"border",size:"sm",onPress:async()=>{g({type:"login"}),(0,Y.q)({eventName:"ads",object:"adButton",message:"popoverPlanSignInButton"})},children:"Sign In"})]})]})})})]})}let am=[{key:"tools",divider:!0,items:[{key:"chat",label:"Chat",description:"Chat with CodeGPT",href:"",startContent:(0,s.jsx)(tm.Z,{className:"h-4 w-4"}),endcontent:""},{key:"autocomplete",label:"Autocomplete",description:"Configure autocomplete models",startContent:(0,s.jsx)(tw.Z,{className:"h-4 w-4"}),endcontent:""}]},{key:"Help",divider:!0,items:[..."vscode"===ep.L_?[{key:"extDocsLink",label:"Extension Docs",description:"",href:"",startContent:(0,s.jsx)(tN.Z,{className:"h-4 w-4"}),endcontent:""},{key:"apiDocsLink",label:"API Docs",description:"",href:"",startContent:(0,s.jsx)(tp.Z,{className:"h-4 w-4"}),endcontent:""}]:[],{key:"issues",label:"Report an issue",description:"",href:"",startContent:(0,s.jsx)(tx.Z,{className:"h-4 w-4"}),endcontent:""},{key:"feedback",label:"Feedback",description:"",href:"https://codegpt.canny.io/requests",startContent:(0,s.jsx)(tk.Z,{className:"h-4 w-4"}),endcontent:""}]},{key:"Settings",divider:!1,items:[{key:"fontsize",label:"Font Size",description:"Change font size",href:"",startContent:(0,s.jsx)(e=>{let{className:t}=e;return e9({className:t,children:(0,s.jsx)("path",{d:"m40-200 210-560h100l210 560h-96l-51-143H187l-51 143H40Zm176-224h168l-82-232h-4l-82 232Zm504 104v-120H600v-80h120v-120h80v120h120v80H800v120h-80Z"})})},{className:"h-4 w-4"}),endcontent:(0,s.jsx)(function(){let{setThemeFontSize:e,themeFontSize:t}=(0,tB.i)(),a=e=>{(0,Y.q)({eventName:"changeValue",target:null!=e?e:"openMenuTheme",value:e})},n=a=>{if("DecreaseFontSize"===a)t!==tG[0]&&e(t-1);else if("IncreaseFontSize"===a){if(t===tG[tG.length-1])return;e(t+1)}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(tq.g,{radius:"lg",size:"sm",isIconOnly:!0,variant:"bordered","data-sentry-element":"ButtonGroup","data-sentry-source-file":"theme-font-size.tsx",children:[(0,s.jsx)(eO.A,{onPress:()=>{n("DecreaseFontSize"),a("DecreaseFontSize")},className:"h-6",color:"default",size:"sm",startContent:(0,s.jsx)("span",{children:"-A"}),"data-sentry-element":"Button","data-sentry-source-file":"theme-font-size.tsx"}),(0,s.jsx)(eO.A,{onPress:()=>{n("IncreaseFontSize"),a("IncreaseFontSize")},className:"h-6",color:"default",size:"sm",startContent:(0,s.jsx)("span",{children:"+A"}),"data-sentry-element":"Button","data-sentry-source-file":"theme-font-size.tsx"})]})})},{})},{key:"theme",label:"Color Mode",description:"Switch color mode",href:"",startContent:(0,s.jsx)(tC.Z,{className:"h-4 w-4"}),endcontent:(0,s.jsx)(function(){let[e,t]=(0,v.useState)(!1),{theme:a,setTheme:n}=(0,tF.F)();return((0,v.useEffect)(()=>{t(!0)},[]),e)?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eJ.i,{isSelected:"dark"===a,color:"secondary",size:"sm",name:"theme-switcher",startContent:(0,s.jsx)(tU.Z,{}),endContent:(0,s.jsx)(tY.Z,{}),"aria-label":"Toggle theme",onValueChange:()=>{(0,Y.q)({eventName:"changeValue",target:"openMenuTheme",value:"dark"===a?"light":"dark"}),n("dark"===a?"light":"dark")},classNames:{base:"m-0",label:"m-0",wrapper:"m-0 border border-default-200"},"data-sentry-element":"Switch","data-sentry-source-file":"theme-switcher.tsx"})}):null},{})}]}];function ap(e){var t,a,n,r,o,d,c,u,p,x,f;let{initialHistoryId:h}=e,[g,y]=(0,v.useState)({message:"",done:!1}),{selectedProvider:b,setSelectedProvider:j}=(0,U.Y)(),{setOpen:w}=(0,e_.U)(),{currentProviderModel:N,setCurrentProviderModel:k}=(0,U.o)(),{userData:C}=(0,em.v)(),z=null===(t=N[b])||void 0===t?void 0:t.id,M=null!==(x=null===(a=N[b])||void 0===a?void 0:a.fromMarketplace)&&void 0!==x&&x,{image:P,setImage:L,setShowTooltip:I}=eI(),{setOpen:_,setErrorMessage:D}=(0,td.c)(),T=(0,e5.k)(e=>e.providers),{mutate:O}=to(),R="codegptplusbeta"===b,Z=A({provider:b,initialHistoryId:h,onError:e=>{var t,a,n,r;if(!R)return;let o=e.message,i=500,d="";try{let s=JSON.parse(e.message);o=null!==(t=s.message)&&void 0!==t?t:o,i=null!==(a=Number(s.status))&&void 0!==a?a:i,d=null!==(n=s.code)&&void 0!==n?n:""}catch(e){}401===i?w(!0):(_(!0),console.log("useChat Error Provider",e),console.log({errorCode:d}),"DAILY_INTERACTIONS_LIMIT_REACHED"===d?D({title:"Need more messages?",subtitle:"",provider:"/logotypes/codegpt.png",description:o,type:"error",actions:(0,s.jsx)(eO.A,{className:"w-fit bg-blue-500 text-white",onPress:()=>{(0,Y.q)({eventName:"clickOver",target:"upgradeButtonInteractionsLimitReachedModal"}),(0,l.Yo)("".concat(tc.Ft,"/en/extensions/plans"))},children:"Upgrade to Pro"})}):D({title:"An error occurred while interacting with ".concat(b),subtitle:"".concat(b.includes("codegpt")?"CodeGPT Plus":"".concat(b," Message")),provider:"".concat(b.includes("codegpt")?"/logotypes/codegpt.png":"/logotypes/".concat(null!==(r=b.toLowerCase())&&void 0!==r?r:"codegpt",".png")),description:null==o?void 0:o.replaceAll('"',""),type:"error",actions:b.includes("codegpt")&&(0,s.jsx)(eO.A,{size:"sm",variant:"faded",className:"bg-blue-400 text-white",onPress:()=>{(0,Y.q)({eventName:"clickOver",target:"goToDocsButtonFromErrorCard"}),(0,l.Yo)("https://docs.codegpt.co/docs/category/-ai-providers")},children:"Click here for more info about models"})}))},onFinish:()=>{setTimeout(()=>{let e=document.querySelectorAll(".assistant"),t=e[e.length-1],a=null==t?void 0:t.querySelectorAll(".language-label"),n=null==a?void 0:a.length;for(let e=0;e<n;e++){var s;let t=a[e].textContent;(0,Y.q)({eventName:"codeBlock",...t?{code_language:t}:{},provider:b,model:null===(s=N[b])||void 0===s?void 0:s.id})}},500)}}),{messages:F,setMessages:E,isLoading:V,stop:H,reload:B,handleSubmit:q,setHistoryId:G,modelHistory:J,setModelHistory:W}=Z,$=async e=>{var t,a,n,s,r,o,i,d,c,u,m,p,x,f,h,g,v,j,w;let{event:C,externalInput:z,externalModel:S,externalMessages:A,chatRequestOptions:_,codeSelection:D=""}=e;null===(t=eg.current)||void 0===t||t.scrollIntoView({behavior:"auto",block:"end"}),en(),console.log({codeSelectionAlreadyInMessages:F.some(e=>e.content.includes(D))}),D&&F.some(e=>e.content.includes(D))&&(z=null==z?void 0:z.replace(D,""),D="");let O=await (0,l.us)(),Z=(null===(a=N[b])||void 0===a?void 0:a.label)||(null===(s=T.find(e=>e.link===b))||void 0===s?void 0:null===(n=s.models)||void 0===n?void 0:n[0])||O.id,V=F.length+1,H=null===(r=N[b])||void 0===r?void 0:r.image;I(!1),console.log(null===(o=N[b])||void 0===o?void 0:o.label),N[b]&&(null===(i=N[b])||void 0===i?void 0:i.label)!==""||(console.log('modelState[providerState]?.label === ""'),k("codegptplusbeta",{label:O.label,id:O.id,image:O.image,fromMarketplace:O.fromMarketplace,description:O.description}),Z=O.label,H=O.image),W(e=>({...e,[b]:{...e[b],[V]:{model:Z,avatar:H}}}));let B=["codegptplusbeta","ollama"].includes(b);if(null==C||C.preventDefault(),!z)return;let G=[...F],U=crypto.randomUUID(),Y={...B?{id:crypto.randomUUID()}:{},role:"user",content:"".concat(z,"\n").concat(D),...""!==P.base64&&B?{attachment:P}:{},...""!==P.base64&&B?{image:P.base64}:{},...R?{statusId:U}:{},...D?{codeSelection:D}:{}};G.push(Y),R&&fetch("".concat(eN.xf,"/chat/status/").concat(U)).then(async e=>{var t,a;let n=null===(t=e.body)||void 0===t?void 0:t.getReader();if(!n)return;let s=new TextDecoder;for(;;){let{done:e,value:t}=await (null==n?void 0:n.read());if(e)break;let l=null===(a=JSON.parse(s.decode(t).replaceAll("retry 1000\n\n",'{"message":"Connecting...","done":false}').replaceAll("data: ","").replaceAll("\n\n","")))||void 0===a?void 0:a.message;if(y({message:l,done:null==l?void 0:l.done}),l.done)break}}),E(G);let K=null==_?void 0:null===(c=_.options)||void 0===c?void 0:null===(d=c.headers)||void 0===d?void 0:d.promptType,J=null==_?void 0:null===(m=_.options)||void 0===m?void 0:null===(u=m.headers)||void 0===u?void 0:u.customPromptType,$=null==_?void 0:null===(x=_.options)||void 0===x?void 0:null===(p=x.headers)||void 0===p?void 0:p.files,Q=null==_?void 0:null===(h=_.options)||void 0===h?void 0:null===(f=h.headers)||void 0===f?void 0:f.fromMarketplace,X=null==_?void 0:null===(v=_.options)||void 0===v?void 0:null===(g=v.headers)||void 0===g?void 0:g.contextLevel,ee=await q({text:z,...(null===(j=N[b])||void 0===j?void 0:j.id)?{model:S||(null===(w=N[b])||void 0===w?void 0:w.id)}:{},...A?{externalMessages:A}:{},...J?{customPromptType:J}:{},fromMarketplace:Q||M,...""!==P.base64?{image:P}:{},...$?{files:$}:{},...X?{contextLevel:X}:{},...D?{codeSelection:D}:{},...K?{promptType:K}:{},...U?{statusId:U}:{}});return L({base64:"",name:""}),ee},Q=(null===(n=F[F.length-1])||void 0===n?void 0:n.role)==="assistant",X=()=>{E([]),W(e=>({...e,[b]:{}})),i().then(e=>{G(e),O()})},ee=(0,v.useRef)(null),{inView:et}=(0,tj.S1)(ee),ea=null===(o=F[F.length-1])||void 0===o?void 0:null===(r=o.content)||void 0===r?void 0:r.length,en=()=>{if(ee.current){var e;null===(e=ee.current)||void 0===e||e.scrollIntoView({behavior:"auto",block:"end"})}};(0,v.useEffect)(()=>{et&&V&&en()},[F.length,ea,et,V]),(0,v.useEffect)(()=>{let e=e=>{"n"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),S.Am.success("Start a New Chat"),X())};if(F.length>0&&!V)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[F,V]);let[es,el]=(0,v.useState)(!1),er=e4(e=>e.setOpen),{configuration:eo}=e2(),ei=(0,eU.usePathname)(),ed=ei.split("/")[1],ec=null!==(f=ei.split("/")[2])&&void 0!==f?f:"chat",{localVersion:eu,remoteVersion:ep,notify:ex}=(0,ti.j)(e=>e),ef=async()=>{tu({command:"codegpt.updateCodeGPT"})};(0,v.useEffect)(()=>{eu!==ep&&ex&&(console.log("New version ".concat(ep," available!")),(0,S.Am)("New version ".concat(ep," available!"),{action:{label:"update",onClick:()=>{ef()}},duration:1e4,actionButtonStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",appearance:"none",userSelect:"none",whiteSpace:"nowrap",verticalAlign:"middle",textAlign:"center",color:"hsl(var(--nextui-default-foreground) / var(--nextui-default-foreground-opacity, var(--tw-text-opacity)))",backgroundColor:"hsl(var(--nextui-default) / 0.4)",padding:"var(--nextui-spacing-unit-3)",borderRadius:"var(--nextui-radius-small)",border:"1px solid hsl(var(--nextui-primary-400) / 0.1)",fontSize:"var(--nextui-font-size-tiny)",lineHeight:"var(--nextui-line-height-tiny)"},style:{color:"hsl(var(--nextui-default-foreground) / var(--nextui-default-foreground-opacity, var(--tw-text-opacity)))"}}))},[ep]);let eh=(0,v.useRef)(null),eg=(0,v.useRef)(null),ev={...Z,scrollToBottom:en,onSubmit:$,clearChat:X};return(0,s.jsxs)(m.p.Provider,{value:ev,"data-sentry-element":"unknown","data-sentry-component":"Chat","data-sentry-source-file":"chat.tsx",children:[(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[(0,s.jsxs)("div",{id:"sidebar",className:"".concat(es?"visible z-50":"invisible -z-50"," fixed left-0 top-0 h-screen w-screen transition-all"),children:[(0,s.jsx)("div",{className:"".concat(es?"opacity-100":"opacity-0"," absolute left-0 top-0 z-20 h-screen w-screen cursor-pointer bg-white/50 transition-all dark:bg-black/50"),onClick:()=>el(!1)}),(0,s.jsxs)("div",{id:"sidebar-content",className:"".concat(es?"opacity-100":"-translate-x-full opacity-50"," absolute left-0 top-0 z-50 grid h-full w-full max-w-sm grid-flow-row grid-cols-1 grid-rows-[auto_1fr] content-between bg-content1 shadow-lg transition-transform ease-in-out dark:bg-content1"),children:[(0,s.jsxs)("div",{"attr-role":"header",className:"grid grid-flow-col items-center justify-between p-3",children:[(0,s.jsx)(tH.Z,{className:"mr-auto h-3","data-sentry-element":"CodeGPTLogotypeWide","data-sentry-source-file":"chat.tsx"}),(0,s.jsx)(eO.A,{startContent:(0,s.jsx)(tf.Z,{className:"w-4"}),onPress:()=>el(!1),isIconOnly:!0,size:"sm",variant:"bordered",className:"border","data-sentry-element":"Button","data-sentry-source-file":"chat.tsx"})]}),(0,s.jsxs)(tg.o,{className:"items-between grid content-between px-3 pb-6","data-sentry-element":"ScrollShadow","data-sentry-source-file":"chat.tsx",children:[(0,s.jsx)(tv.X,{items:am,variant:"flat","aria-label":"Menu",onAction:e=>{"chat"===e&&((0,Y.q)({eventName:"clickOver",target:"optionMenuChat"}),el(!1)),"marketplace"===e&&((0,Y.q)({eventName:"clickOver",target:"optionMenuMarketplace"}),(0,l.Cl)("http://localhost:54112/".concat(ed,"/marketplace"))),"vision"===e&&((0,Y.q)({eventName:"clickOver",target:"optionMenuReactSandbox"}),(0,l.Yo)("http://localhost:54112/".concat(ed,"/vision"))),"autocomplete"===e&&((0,Y.q)({eventName:"clickOver",target:"optionMenuAutocomplete"}),er(!0)),"extDocsLink"===e&&((0,Y.q)({eventName:"clickOver",target:"optionMenuExtDoc"}),(0,l.os)("https://docs.codegpt.co/docs/intro")),"apiDocsLink"===e&&((0,Y.q)({eventName:"clickOver",target:"optionMenuApiDoc"}),(0,l.os)("https://developers.codegpt.co/reference/agents-beta")),"issues"===e&&((0,Y.q)({eventName:"clickOver",target:"optionMenuReportIssue"}),(0,l.Yo)("https://github.com/JudiniLabs/code-gpt-docs/issues")),"feedback"===e?((0,Y.q)({eventName:"clickOver",target:"optionMenuReportIssue"}),(0,l.Yo)("https://codegpt.canny.io/requests")):console.log(e)},"data-sentry-element":"Listbox","data-sentry-source-file":"chat.tsx",children:e=>(0,s.jsx)(ty.y,{classNames:{heading:"capitalize"},title:e.key,showDivider:e.divider,children:e.items.map(e=>(0,s.jsx)(e8.R,{"aria-label":e.label,textValue:e.label,description:e.description,classNames:{base:"text-default-500 group-hover:text-foreground ".concat(ec===e.key?"bg-transparent data-[hover=true]:bg-transparent":"bg-transparent group-hover:bg-content2/20 data-[hover=true]:bg-content2/20"),title:"transition-none text-sm ".concat(ec===e.key?"text-foreground":""),description:"transition-none text-default-500"},startContent:e.startContent&&(0,s.jsx)("div",{"attr-id":"icon-box","attr-size":"md",className:"\n                            flex h-8 w-8 shrink-0 items-center justify-center rounded-xl\n                            ".concat(ec===e.key?"bg-primary/20 text-primary-600":"bg-content2","\n                            "),children:e.startContent}),endContent:null==e?void 0:e.endcontent,children:e.label},e.key))},e.key)}),(0,s.jsxs)("div",{className:"mt-auto flex items-center justify-center gap-2 pl-3 text-default-500",children:[(0,s.jsx)("span",{className:"text-sm",children:"Version"}),(0,s.jsx)(tb.z,{variant:"bordered",size:"sm",className:"border text-default-500","data-sentry-element":"Chip","data-sentry-source-file":"chat.tsx",children:eu})]})]})]})]}),(0,s.jsx)("div",{className:"relative flex h-screen overflow-hidden",children:(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[(0,s.jsxs)("div",{id:"app-header",ref:eh,"attr-role":"app-header",className:"\n                fixed top-0 z-10\n                flex\n                w-full items-center\n                justify-between gap-4 bg-content1/80\n                px-4 py-2 backdrop-blur-lg\n                transition-all duration-300 ease-in-out\n              ",children:[(0,s.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",onClick:()=>{es||(0,Y.q)({eventName:"clickOver",target:"openMenu"}),el(!es)},children:es?(0,s.jsx)(tf.Z,{className:"w-5"}):(0,s.jsx)(th.Z,{className:"w-5"})},"settings"),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[b&&(null===(d=N[b])||void 0===d?void 0:d.id)&&(0,s.jsx)(ez.e,{content:"Home",placement:"top",classNames:{content:"bg-content2 text-default-500"},children:(0,s.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",disabled:V,onClick:()=>{j("codegptplusbeta"),(0,K.$)(),k("codegptplusbeta",{label:"",id:"",fromMarketplace:!1,image:"",description:"",welcome:"",prompt_library:[]}),X(),(0,Y.q)({eventName:"clickOver",groupBy:"aiSelector",target:"ChatHeaderHomeButton"})},children:(0,s.jsx)(tz.Z,{className:"size-4 shrink-0"})})}),eo&&(0,s.jsx)(ez.e,{content:"Autocomplete Settings",classNames:{content:"bg-content2 text-default-500"},children:(0,s.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",onClick:()=>{(0,Y.q)({eventName:"clickOver",target:"optionMenuAutocompleteHeader"}),er(!0)},children:(0,s.jsx)("div",{className:"relative rounded-full",children:(null==eo?void 0:eo.isEnabled)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"absolute bottom-0 right-0 flex size-1.5",children:[(0,s.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-emerald-400"}),(0,s.jsx)("span",{className:"relative inline-flex size-1.5 rounded-full bg-emerald-400"})]}),(0,s.jsx)(tw.Z,{className:"h-4 w-4 text-foreground"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"absolute bottom-0 right-0 ml-1 h-1.5 w-1.5 rounded-full bg-danger opacity-85"}),(0,s.jsxs)("span",{className:"absolute bottom-0 right-0 flex size-1.5",children:[(0,s.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full"}),(0,s.jsx)("span",{className:"relative inline-flex size-1.5 rounded-full bg-pink-400"})]}),(0,s.jsx)(tw.Z,{className:"h-4 w-4"})]})})},"autocomplete")}),(0,s.jsx)(tV,{"data-sentry-element":"GraphSelectorModal","data-sentry-source-file":"chat.tsx"}),(0,s.jsx)(al,{"data-sentry-element":"ChatHistoryModal","data-sentry-source-file":"chat.tsx"}),F.length>0&&!V&&(0,s.jsx)(ez.e,{content:"New Chat",placement:"bottom",classNames:{content:"bg-content2 text-default-500"},children:(0,s.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",onClick:()=>{let e=null==C?void 0:C.loggedIn;R&&e&&(0,Y.e)({agentId:z}),X()},disabled:V,children:(0,s.jsx)(te,{className:"size-4 shrink-0"})})})]}),(0,s.jsx)(au,{isLoading:V,"data-sentry-element":"PopoverPlan","data-sentry-source-file":"chat.tsx"})]}),(0,s.jsxs)(tn,{direction:"vertical",className:"","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"chat.tsx",children:[(0,s.jsx)(ts,{defaultSize:75,minSize:25,maxSize:85,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"chat.tsx",children:(0,s.jsxs)("div",{className:"h-full gap-6 overflow-y-auto scroll-smooth pt-12",ref:eg,children:[(0,s.jsx)("div",{className:"w-full",children:b&&(null==N?void 0:null===(c=N[b])||void 0===c?void 0:c.label)!==""&&F.length>0?(0,s.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-6 px-4 py-2",children:[F.filter(e=>["user","assistant"].includes(e.role)).map((e,t)=>(0,s.jsx)(ao,{role:e.role,content:e.content,display:e.display,image:e.attachment,index:t,isLastMessage:t===F.length-1,isLoading:V,providerState:b,modelHistory:J,reload:B,codeSelection:e.codeSelection,status:g},"msg-".concat(t))),V&&!Q&&(0,s.jsx)(ao,{role:"assistant",content:"",display:[],index:F.length,isLastMessage:!0,isLoading:!0,providerState:b,modelHistory:J,reload:B,status:g})]}):b&&(null===(u=N[b])||void 0===u?void 0:u.id)?(0,s.jsx)("div",{className:"grid gap-4",children:(0,s.jsx)(tP,{})}):(0,s.jsxs)("div",{className:"mx-auto mt-[12%] max-w-2xl px-2",children:[(0,s.jsx)("h1",{className:"mb-4 text-center text-2xl font-bold",children:"Let's start creating"}),(0,s.jsx)(eB,{currentModel:N[b],modelState:N,providerState:b,onSubmit:$,isLoading:V,stop:H,clearChat:X,rounded:!0,placeholder:"Ask anything"})]})}),(0,s.jsx)("div",{className:"select-none",style:{background:"transparent",width:"100%",height:"3rem",marginTop:"0"},ref:ee})]})}),b&&(null===(p=N[b])||void 0===p?void 0:p.id)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tl,{withHandle:!0}),(0,s.jsx)(ts,{defaultSize:25,minSize:15,children:(0,s.jsx)("footer",{className:"relative mx-auto flex h-full w-full flex-col gap-2 bg-content2",children:(0,s.jsx)(eB,{currentModel:N[b],modelState:N,providerState:b,onSubmit:$,isLoading:V,stop:H,clearChat:X,placeholder:'"/" for slash commands: /Fix, /Explain. "#" for file mentions: #index.html.'})})})]})]})]})})]}),b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e7,{}),(0,s.jsx)(eQ,{})]}):null]})}},49945:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var n=a(57437),s=a(86148),l=a(54650),r=a(32302),o=a(87215);function i(e){let{chunks:t}=e,{files:a,setFiles:i}=(0,l.J)();return(0,n.jsx)("div",{className:"flex ".concat(t.length>1?"h-40":"h-12"," flex-col gap-1 overflow-y-auto"),"data-sentry-component":"ChunksFiles","data-sentry-source-file":"chunks-files.tsx",children:t.map(e=>{var t;let{similarity:l,origin_file:d,start_line:c,end_line:u}=e;return(0,n.jsxs)("div",{className:"command command-with-icon animate-slideIn relative flex h-auto max-h-32 w-full cursor-pointer items-center justify-between gap-2 bg-content2 text-default-500",style:{inlineSize:"auto"},onClick:()=>(0,s.ZB)(d,c,u),children:[(0,n.jsxs)("span",{className:"flex max-w-full items-center gap-2 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 text-xs","data-language":null===(t=d.split("/").at(-1))||void 0===t?void 0:t.split(".").at(-1),children:[d.split("/").at(-1),1!==l?" (".concat(c+1,":").concat(u+1,")"):""]}),(0,n.jsxs)("div",{className:"flex gap-1",children:[1!==l&&(0,n.jsxs)("button",{className:"flex h-6 items-center justify-center gap-1 rounded-md border px-2 text-default-500",onClick:e=>{e.stopPropagation();let t=a.findIndex(e=>e.path===d);-1!==t?i(a.map((e,a)=>a===t?{...e,fromLine:c,toLine:u}:e)):i([...a,{name:d.split("/").at(-1),path:d,fromLine:c,toLine:u}])},children:[(0,n.jsx)(r.Z,{className:"size-3 shrink-0"}),(0,n.jsx)("span",{className:"text-xs",children:"Open"})]}),(0,n.jsxs)("button",{className:"flex h-6 items-center justify-center gap-1 rounded-md border px-2 text-default-500",onClick:e=>{e.stopPropagation();let t=a.findIndex(e=>e.path===d);-1!==t?i(a.map((e,a)=>a===t?{name:d.split("/").at(-1),path:d}:e)):i([...a,{name:d.split("/").at(-1),path:d}])},children:[(0,n.jsx)(o.Z,{className:"size-3 shrink-0"}),(0,n.jsx)("span",{className:"text-xs",children:"Use as context"})]})]})]},d)})})}var d=a(11210),c=a(2265);let u=(0,d.default)(()=>a.e(180).then(a.bind(a,33180)),{loadableGenerated:{webpack:()=>[33180]},ssr:!1});var m=e=>{let{data:t,isDark:a}=e,l=(0,c.useCallback)((e,t,n)=>{let s=e.id,l=12/n;t.font="".concat(l,"px Sans-Serif");let r=[t.measureText(s).width,l].map(e=>e+.2*l);t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,r[1]/2+4,0,2*Math.PI,!1),t.fill(),t.textAlign="center",t.textBaseline="middle",t.fillStyle=a?"white":"black",t.fillText(s,e.x,e.y)},[a]);return(0,n.jsx)("div",{className:"flex h-80 w-full items-center justify-center overflow-hidden rounded-lg bg-content2","data-sentry-component":"FileRelationsGraph","data-sentry-source-file":"files-relation-graph.tsx",children:(0,n.jsx)(u,{graphData:t,nodeId:"id",nodeLabel:e=>e.metadata.path.split("::").at(0),nodeColor:e=>e.color,nodeCanvasObject:l,nodeCanvasObjectMode:()=>"replace",linkDirectionalArrowLength:3.5,linkDirectionalArrowRelPos:1,linkDirectionalArrowColor:()=>a?"#ccc":"#000",linkColor:()=>a?"#ccc":"#000",onNodeClick:e=>{let t=e.metadata.path.split("::").at(0);console.log({file:t}),(0,s.ZB)(t)},"data-sentry-element":"ForceGraph2D","data-sentry-source-file":"files-relation-graph.tsx"})})};function p(e){let t=["#FF5733","#33FF57","#33b8ff","#F3FF33","#FF33F3"],a=t.map(e=>(function(e,t){let a=parseInt(e.slice(1),16),n=Math.round(-127.49999999999999),s=(a>>16)+n,l=(a>>8&255)+n,r=(255&a)+n;return"#".concat((16777216+(s<255?s<1?0:s:255)*65536+(l<255?l<1?0:l:255)*256+(r<255?r<1?0:r:255)).toString(16).slice(1).toUpperCase())})(e,0)),n=e?a:t;return n[Math.floor(Math.random()*n.length)]}var x=a(36457);function f(e){let{chunks:t,graph:a}=e,{theme:s}=(0,x.F)(),l="dark"===s;return a&&0!==a.length||t&&0!==t.length?(0,n.jsxs)("div",{className:"relative w-full","data-sentry-component":"ChunksCard","data-sentry-source-file":"chunks-card.tsx",children:[a&&a.length>0&&(0,n.jsx)("div",{"aria-label":"Graph",title:"Graph",children:(0,n.jsx)(m,{data:function(e,t){let a=[],n=[],s=new Set;return console.log({relations:e}),e.forEach(e=>{let{source:l,target:r}=e,o=l.split("::")[0].split("/").slice(-1)[0],i=r.split("::")[0].split("/").slice(-1)[0];o&&i&&(s.has(o)||(a.push({id:o,color:p(t),size:Math.max(3*o.length,15),metadata:{createdAt:new Date,type:"source",path:l}}),s.add(o)),s.has(i)||(a.push({id:i,color:p(t),size:Math.max(3*i.length,15),metadata:{createdAt:new Date,type:"target",path:r}}),s.add(i)),n.push({source:o,target:i}))}),{nodes:a,links:n}}(a,l),isDark:l})},"Graph"),t&&t.length>0&&(0,n.jsx)("div",{"aria-label":"List of Files",title:"List of Files",children:(0,n.jsx)(i,{chunks:t})},"List of Files")]}):null}},45700:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});let n=(0,a(2265).createContext)({isLoading:!1,messages:[],historyId:"",clearChat:()=>{},setMessages:()=>{},setHistoryId:()=>{},scrollToBottom:()=>{},onSubmit:async()=>[]})},19415:function(e,t,a){"use strict";a.d(t,{default:function(){return i}});var n=a(57437),s=a(58512),l=a(6896),r=a(89866),o=a(25326);function i(){let{isOpen:e,setOpen:t,message:a}=(0,s.c)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.Vq,{open:e,onOpenChange:t,"data-sentry-element":"Dialog","data-sentry-source-file":"error-modal.tsx",children:(0,n.jsxs)(r.cZ,{className:"flex h-fit max-h-[60vh] flex-col gap-8 rounded-xl bg-content2","data-sentry-element":"DialogContent","data-sentry-source-file":"error-modal.tsx",children:[(0,n.jsx)(r.fK,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"error-modal.tsx",children:(0,n.jsx)(r.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"error-modal.tsx",children:(0,n.jsx)("b",{children:a.title})})}),(0,n.jsxs)("div",{className:"grid gap-4",children:[a.subtitle&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[a.provider&&(0,n.jsx)(l.J,{src:a.provider,alt:"agent",className:"h-6 w-6",radius:"full"}),(0,n.jsx)("p",{className:"capitalize text-default-500",children:a.subtitle})]}),(0,n.jsx)("div",{className:"prose prose-slate dark:prose-invert hyphens-none",children:(0,n.jsx)(o.J,{content:a.description,"data-sentry-element":"MarkdownRender","data-sentry-source-file":"error-modal.tsx"})})]}),null==a?void 0:a.actions]})})})}},2814:function(e,t,a){"use strict";a.d(t,{default:function(){return k}});var n=a(57437),s=a(86148),l=a(82720),r=a(79702),o=a(28514),i=a(45428),d=a(88433),c=a(79033),u=a(40358),m=a(41048),p=a(40321),x=a(79627),f=a(68381),h=a(12883),g=a(95538),v=a(12410),y=a(72301),b=a(2265),j=a(7805),w=a(45700);let N=e=>{var t;let a={name:"root",type:"folder",children:[],filePath:""};return(e.forEach(e=>{let t=e.split("/"),n=a;for(let a=0;a<t.length;a++){var s,l;let r=t[a],o=r.includes("."),i=null===(s=n.children)||void 0===s?void 0:s.find(e=>e.name===r);if(i)n=i;else{let s={name:r,type:o?"file":"folder",children:o?void 0:[],filePath:e};a===t.length-1&&o&&(s.filePath=e),null===(l=n.children)||void 0===l||l.push(s),n=s}}}),(null===(t=a.children)||void 0===t?void 0:t.length)===1&&""===a.children[0].name)?a.children[0]:a};var k=(0,b.memo)(e=>{let{paths:t,level:a=0,bodyOnly:k}=e,[C,z]=(0,b.useState)(-1),[S,M]=(0,b.useState)(!1),{messages:P,isLoading:A}=(0,b.useContext)(w.p),{getFirstCodeBlockContent:L}={getFirstCodeBlockContent:function(e){let t=/```(\w+)?\s*([\s\S]*?)\s*```/.exec(e);return t?t[2]:null}},{selectedProvider:I}=(0,r.Y)(),{currentProviderModel:_}=(0,r.o)(),D=_[I],T=(0,y.usePathname)().split("/")[1];if(!t||0===t.length)return null;let O=N(t),R=async()=>{(0,o.q)({eventName:"clickOver",target:"Generate Files and Folders"}),console.log({messages:P});let e=[...P];for(let n of(e.push({role:"system",content:"Please generate the content for the user-selected file only. Do not include any explanations, introductions, or additional text. Provide only the code.",id:crypto.randomUUID()}),t)){var a;e.push({role:"user",content:"Generate content for the following file: ".concat(n),id:crypto.randomUUID()});let t=await fetch("http://localhost:54112/".concat(T,"/api/").concat(I),{method:"POST",body:JSON.stringify({messages:e}),headers:{"Content-Type":"application/json",...(null==D?void 0:D.id)?{model:D.id}:{},...(null==D?void 0:D.fromMarketplace)?{fromMarketplace:"true"}:{}}}),l=await t.text();(0,o.q)({eventName:"codeBuilderCreateFile",provider:I,model:null===(a=_[I])||void 0===a?void 0:a.id,code_language:n.split(".").at(-1),codeLinesNumber:l.split("\n").length}),e.push({role:"assistant",content:l,id:crypto.randomUUID()}),await (0,s.JJ)({filePath:n,content:L(l)||l})||j.Am.error("Failed to write file content"),z(e=>e+1)}},Z=e=>{let{level:t,isLastChild:a}=e;return(0,n.jsxs)("svg",{className:"absolute left-0 top-0 h-full w-6",style:{left:"".concat((t-1)*.2||"0.2","rem")},"data-sentry-element":"svg","data-sentry-component":"TreeLines","data-sentry-source-file":"file-tree-codebuilder.tsx",children:[(0,n.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:a?"50%":"100%",stroke:"white",strokeWidth:"1","data-sentry-element":"line","data-sentry-source-file":"file-tree-codebuilder.tsx"}),t>0&&(0,n.jsx)("line",{x1:"0",y1:"50%",x2:"100%",y2:"50%",stroke:"white",strokeWidth:"1"})]})},F=e=>{let{file:t,level:a,fileIndex:r,isLastChild:o}=e,u=.4*a==0?0:.4*a+1.5;return(0,n.jsxs)("li",{className:"relative flex items-center gap-2 py-1",style:{paddingLeft:"".concat(u,"rem")},"data-sentry-component":"File","data-sentry-source-file":"file-tree-codebuilder.tsx",children:[a>0&&(0,n.jsx)(Z,{level:a,isLastChild:o}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(c.Z,{className:"size-4 fill-primary text-secondary","data-sentry-element":"DocumentIcon","data-sentry-source-file":"file-tree-codebuilder.tsx"}),(0,n.jsx)("span",{className:"ml-2",children:t.name})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[S&&r===C+1?(0,n.jsx)(l.Z,{size:4}):null,r<=C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{className:"mr-1 size-4 text-success"}),(0,n.jsx)("button",{onClick:()=>(0,s.ZB)(t.filePath),children:(0,n.jsx)(d.Z,{className:"size-4 text-default-500"})})]}):null]})]},t.name)},E=e=>{let{folder:t,level:a,fileIndex:s,isLastChild:l}=e,r=.4*a==0?0:.4*a+1.5;return(0,n.jsxs)("li",{className:"relative",style:{paddingLeft:"".concat(r,"rem")},"data-sentry-component":"Folder","data-sentry-source-file":"file-tree-codebuilder.tsx",children:[a>0&&(0,n.jsx)(Z,{level:a,isLastChild:l}),(0,n.jsxs)("div",{className:"flex items-center py-1",children:[(0,n.jsx)(u.Z,{className:"size-4 text-sky-500","data-sentry-element":"FolderIcon","data-sentry-source-file":"file-tree-codebuilder.tsx"}),(0,n.jsx)("span",{className:"ml-2",children:t.name})]}),(0,n.jsx)("ul",{className:"relative",children:t.children&&t.children.map((e,l)=>"file"===e.type?(0,n.jsx)(F,{file:e,level:a+1,fileIndex:s.current++,isLastChild:l===t.children.length-1},"".concat(e.name,"-").concat(l)):(0,n.jsx)(E,{folder:e,level:a+1,fileIndex:s,isLastChild:l===t.children.length-1},"".concat(e.name,"-").concat(l)))})]},t.name)},V={current:0};return(0,n.jsxs)(m.w,{className:"mb-4 select-none bg-zinc-900 text-white","data-sentry-element":"Card","data-sentry-component":"FileTreeCB","data-sentry-source-file":"file-tree-codebuilder.tsx",children:[!k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.u,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.Z,{className:"size-4 text-sky-500"}),"Workspace Generator"]})}),(0,n.jsx)(x.j,{orientation:"horizontal"})]}),(0,n.jsx)(f.G,{"data-sentry-element":"CardBody","data-sentry-source-file":"file-tree-codebuilder.tsx",children:(0,n.jsx)("ul",{className:"relative max-h-48 overflow-y-auto",children:"file"===O.type?(0,n.jsx)(F,{file:O,level:a,fileIndex:V.current++,isLastChild:!0}):(0,n.jsx)(E,{folder:O,level:a,fileIndex:V,isLastChild:!0})})}),!k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.j,{orientation:"horizontal"}),(0,n.jsx)(h.i,{className:"flex justify-end gap-2",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(g.A,{variant:"faded",size:"sm",className:"capitalize text-default-500",isDisabled:S||A,disabled:S||A,onPress:async()=>{M(!0),z(-1),await R().catch(e=>console.log(e)),M(!1)},startContent:S?(0,n.jsx)(l.Z,{size:4}):(0,n.jsx)(v.Z,{className:"size-4 text-primary"}),children:"Create"})})})]})]})})},42646:function(e,t,a){"use strict";var n=a(57437),s=a(87215),l=a(27426),r=a(2265);let o=e=>{var t;let a={name:"root",type:"folder",children:[],filePath:""};return(e.forEach(e=>{let t=e.split("/"),n=a;for(let a=0;a<t.length;a++){var s,l;let r=t[a],o=r.includes("."),i=null===(s=n.children)||void 0===s?void 0:s.find(e=>e.name===r);if(i)n=i;else{let s={name:r,type:o?"file":"folder",children:o?void 0:[],filePath:e};a===t.length-1&&o&&(s.filePath=e),null===(l=n.children)||void 0===l||l.push(s),n=s}}}),(null===(t=a.children)||void 0===t?void 0:t.length)===1&&""===a.children[0].name)?a.children[0]:a},i=(0,r.memo)(e=>{let{paths:t,level:a=0,bodyOnly:r}=e;if(console.log({paths:t,level:a,bodyOnly:r}),!t||0===t.length)return null;let i=o(t),d=e=>{let{level:t,isLastChild:a}=e;return(0,n.jsxs)("svg",{className:"absolute left-0 top-0 h-full w-4 text-default-300",style:{left:"".concat((t-1)*0||"0.1","rem")},"data-sentry-element":"svg","data-sentry-component":"TreeLines","data-sentry-source-file":"file-tree.tsx",children:[(0,n.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:a?"50%":"100%",stroke:"currentColor",strokeWidth:"1","data-sentry-element":"line","data-sentry-source-file":"file-tree.tsx"}),t>0&&(0,n.jsx)("line",{x1:"0",y1:"50%",x2:"100%",y2:"50%",stroke:"currentColor",strokeWidth:"0.5"})]})},c=e=>{let{file:t,level:a,fileIndex:l,isLastChild:r}=e,o=.1*a==0?0:.1*a+1;return(0,n.jsxs)("li",{className:"relative flex items-center gap-2 py-1",style:{paddingLeft:"".concat(o,"rem")},"data-sentry-component":"File","data-sentry-source-file":"file-tree.tsx",children:[a>0&&(0,n.jsx)(d,{level:a,isLastChild:r}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(s.Z,{className:"size-3 text-default-500","data-sentry-element":"FileCode","data-sentry-source-file":"file-tree.tsx"}),(0,n.jsx)("span",{children:t.name})]})]},t.name)},u=e=>{let{folder:t,level:a,fileIndex:s,isLastChild:r}=e,o=.1*a==0?0:.1*a+1;return(0,n.jsxs)("li",{className:"relative",style:{paddingLeft:"".concat(o,"rem")},"data-sentry-component":"Folder","data-sentry-source-file":"file-tree.tsx",children:[a>0&&(0,n.jsx)(d,{level:a,isLastChild:r}),(0,n.jsxs)("div",{className:"flex items-center gap-1 py-1",children:[(0,n.jsx)(l.Z,{className:"size-3 text-sky-500","data-sentry-element":"FolderOpenIcon","data-sentry-source-file":"file-tree.tsx"}),(0,n.jsx)("span",{children:t.name})]}),(0,n.jsx)("ul",{className:"relative",children:t.children&&t.children.map((e,l)=>"file"===e.type?(0,n.jsx)(c,{file:e,level:a+1,fileIndex:s.current++,isLastChild:l===t.children.length-1},"".concat(e.name,"-").concat(l)):(0,n.jsx)(u,{folder:e,level:a+1,fileIndex:s,isLastChild:l===t.children.length-1},"".concat(e.name,"-").concat(l)))})]},t.name)},m={current:0};return(0,n.jsxs)("details",{className:"w-full cursor-pointer rounded-md border border-content3 p-2","data-sentry-component":"FileTree","data-sentry-source-file":"file-tree.tsx",children:[(0,n.jsx)("summary",{className:"select-none text-xs text-default-500",children:"Codebase Context"}),(0,n.jsx)("div",{className:"mt-2 select-none text-xs text-default-500",children:(0,n.jsx)("div",{children:(0,n.jsx)("ul",{className:"relative max-h-48 overflow-y-auto",children:"file"===i.type?(0,n.jsx)(c,{file:i,level:a,fileIndex:m.current++,isLastChild:!0}):(0,n.jsx)(u,{folder:i,level:a,fileIndex:m,isLastChild:!0})})})})]})});t.default=i},75009:function(e,t,a){"use strict";a.d(t,{default:function(){return h}});var n=a(57437),s=a(45700),l=a(92883),r=a(27902),o=a(28514),i=a(41048),d=a(68381),c=a(40321),u=a(6896),m=a(12883),p=a(95538),x=a(12410),f=a(2265);function h(e){let{planningSteps:t}=e,[a,h]=(0,f.useState)(!1),{onSubmit:g,isLoading:v}=(0,f.useContext)(s.p);if(!t||0===t.length)return(0,n.jsx)(i.w,{className:"mx-auto w-full max-w-2xl",children:(0,n.jsx)(d.G,{className:"p-6",children:(0,n.jsx)("p",{className:"text-center text-muted-foreground",children:"No planning steps available."})})});let y=async()=>{let e;h(!0),(0,o.q)({eventName:"clickOver",target:"startPlanningBtn"});for(let a=0;a<t.length;a++){let n=t[a];e=await g({externalInput:"Step ".concat(a+1,") ").concat(n.step),externalModel:n.agentId,externalMessages:e,chatRequestOptions:{options:{headers:{"Content-Type":"application/json",fromMarketplace:"true"}}}})}h(!1)};return(0,n.jsxs)(i.w,{className:"mx-auto w-full max-w-2xl","data-sentry-element":"Card","data-sentry-component":"PlanningCard","data-sentry-source-file":"planning-card.tsx",children:[(0,n.jsxs)(c.u,{className:"relative flex items-center","data-sentry-element":"CardHeader","data-sentry-source-file":"planning-card.tsx",children:[(0,n.jsx)("h2",{className:"mx-auto text-center text-2xl font-bold",children:"Steps and Assigned Agents"}),(0,n.jsx)(l.lU,{"data-sentry-element":"ExperimentalBadge","data-sentry-source-file":"planning-card.tsx"})]}),(0,n.jsx)(d.G,{"data-sentry-element":"CardBody","data-sentry-source-file":"planning-card.tsx",children:(0,n.jsx)("ul",{className:"space-y-4",children:t.map((e,t)=>{var a,s;return(0,n.jsxs)("li",{className:"flex items-start space-x-4 rounded-lg bg-secondary p-4",children:[(0,n.jsxs)("div",{className:"grow",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.J,{src:null!==(a=e.image)&&void 0!==a?a:(0,r.k)(e.agentName),alt:null!==(s=e.agentName)&&void 0!==s?s:"agent",loading:"eager",disableSkeleton:!0,classNames:{img:"size-[1.7rem] rounded-full border border-content3 shrink-0 opacity-100 block"},className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("span",{children:e.agentName})]}),(0,n.jsxs)("p",{className:"mt-2 font-medium",children:["Step: ",e.step]})]}),(0,n.jsx)("div",{className:"flex size-8 shrink-0 select-none items-center justify-center rounded-full bg-primary font-bold text-primary-foreground",children:t+1})]},e.agentId)})})}),(0,n.jsx)(m.i,{className:"flex flex-row-reverse","data-sentry-element":"CardFooter","data-sentry-source-file":"planning-card.tsx",children:(0,n.jsx)(p.A,{variant:"faded",size:"sm",className:"capitalize text-default-500",isDisabled:a||v,disabled:a||v,onPress:y,startContent:(0,n.jsx)(x.Z,{className:"size-4 text-primary"}),"data-sentry-element":"Button","data-sentry-source-file":"planning-card.tsx",children:"Start"})})]})}},7843:function(e,t,a){"use strict";a.d(t,{default:function(){return u}});var n=a(57437),s=a(39078),l=a(64848),r=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:40,height:40,viewBox:"0 0 260 260",preserveAspectRatio:"xMidYMid",...e,"data-sentry-element":"svg","data-sentry-component":"GoogleSVG","data-sentry-source-file":"google.tsx",children:[(0,n.jsx)("path",{fill:"currentColor",d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027","data-sentry-element":"path","data-sentry-source-file":"google.tsx"}),(0,n.jsx)("path",{fill:"currentColor",d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1","data-sentry-element":"path","data-sentry-source-file":"google.tsx"}),(0,n.jsx)("path",{fill:"currentColor",d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782","data-sentry-element":"path","data-sentry-source-file":"google.tsx"}),(0,n.jsx)("path",{fill:"currentColor",d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251","data-sentry-element":"path","data-sentry-source-file":"google.tsx"})]}),o=a(73915),i=a(40213),d=a(44200),c=a(2265);function u(e){let{loggedIn:t}=e,[a,u]=(0,c.useState)(!t),{loginFromEventSource:m}=(0,i.R)(),{userData:p}=(0,o.v)();return(0,c.useEffect)(()=>{(null==p?void 0:p.loggedIn)?u(!1):u(!0)},[null==p?void 0:p.loggedIn]),(0,n.jsxs)("div",{className:"fixed left-0 top-0 z-50 h-screen w-screen ".concat(a?"":"hidden"),"data-sentry-component":"FirstLoginPage","data-sentry-source-file":"first-login-page.tsx",children:[a&&(0,n.jsx)("p",{children:null==p?void 0:p.loggedIn}),(0,n.jsxs)("div",{className:"left-0 top-0 h-screen w-screen max-w-none translate-x-0 gap-0 rounded-none border-none bg-content1 p-0",children:[(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-xs space-y-8",children:[(0,n.jsxs)("div",{className:"space-y-2 text-center",children:[(0,n.jsx)(l.Z,{className:"mx-auto h-6 w-fit","data-sentry-element":"CodeGPTLogotypeWide","data-sentry-source-file":"first-login-page.tsx"}),(0,n.jsx)("h1",{className:"text-xl text-default-500",children:"Sign Up"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg border border-blue-500 bg-blue-500 px-5 py-3 text-blue-50 shadow transition-all duration-300 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>m({provider:"google",callback:()=>u(!1)}),children:[(0,n.jsx)(r,{className:"text-default-950 size-5","data-sentry-element":"GoogleSVG","data-sentry-source-file":"first-login-page.tsx"}),"Continue with Google"]}),(0,n.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg border bg-content2 px-5 py-3 text-base shadow transition-transform duration-300 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>m({provider:"github",callback:()=>u(!1)}),children:[(0,n.jsx)(d.Z,{className:"size-5","data-sentry-element":"Github","data-sentry-source-file":"first-login-page.tsx"}),"Continue with Github"]})]}),(0,n.jsx)("p",{className:"mt-auto cursor-pointer text-center text-sm text-default-500 underline-offset-2 hover:underline",onClick:()=>m({type:"login",callback:()=>u(!1)}),children:"Already have an account? Sign in"})]})}),(0,n.jsxs)("div",{className:"mt-auto flex flex-col gap-1 p-4 text-center text-xs text-default-400 hover:underline-offset-2",children:[(0,n.jsx)("span",{children:"By creating an account, you agree to the "}),(0,n.jsxs)("div",{className:"mx-auto flex w-fit gap-1",children:[(0,n.jsx)(s.CustomLink,{isExternal:!0,href:"https://codegpt.co/terms_and_conditions",className:"cursor-pointer text-default-500 hover:underline hover:underline-offset-2","data-sentry-element":"CustomLink","data-sentry-source-file":"first-login-page.tsx",children:"Terms of Service"}),"and",(0,n.jsx)(s.CustomLink,{isExternal:!0,href:"https://codegpt.co/privacy_policy",className:"cursor-pointer text-default-500 hover:underline","data-sentry-element":"CustomLink","data-sentry-source-file":"first-login-page.tsx",children:"Privacy Policy"})]})]})]})]})}},64848:function(e,t,a){"use strict";var n=a(57437);t.Z=e=>(0,n.jsxs)("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,viewBox:"20 20 327 40","data-sentry-element":"svg","data-sentry-component":"CodeGPTLogotypeWide","data-sentry-source-file":"codegpt-logotype-wide.tsx",children:[(0,n.jsx)("path",{d:"M59.9543 60V51.9817H28.003V28.003H59.9543V20H28.003C25.883 20.008 23.852 20.8538 22.3529 22.3529C20.8538 23.852 20.008 25.883 20 28.003V51.9817C20 54.1057 20.8427 56.1428 22.3431 57.6461C23.8435 59.1494 25.8791 59.9959 28.003 60H59.9543Z","data-sentry-element":"path","data-sentry-source-file":"codegpt-logotype-wide.tsx"}),(0,n.jsx)("path",{d:"M100.563 60C102.687 59.9959 104.723 59.1494 106.223 57.6461C107.723 56.1428 108.566 54.1057 108.566 51.9817V28.003C108.558 25.883 107.712 23.852 106.213 22.3529C104.714 20.8538 102.683 20.008 100.563 20H76.5691C74.4505 20.008 72.4211 20.8543 70.9244 22.3538C69.4277 23.8534 68.5853 25.8844 68.5813 28.003V51.9817C68.5813 54.1031 69.4219 56.1379 70.919 57.6408C72.4162 59.1436 74.4478 59.9919 76.5691 60H100.563ZM76.5691 28.0487H100.563V52.0274H76.5691V28.0487Z","data-sentry-element":"path","data-sentry-source-file":"codegpt-logotype-wide.tsx"}),(0,n.jsx)("path",{d:"M148.855 60C150.975 60 153.008 59.1589 154.509 57.6613C156.009 56.1638 156.854 54.1321 156.858 52.0122V28.003C156.85 25.883 156.004 23.852 154.505 22.3529C153.006 20.8538 150.975 20.008 148.855 20H116.904V60H148.855ZM124.861 28.0487H148.855V52.0274H124.861V28.0487Z","data-sentry-element":"path","data-sentry-source-file":"codegpt-logotype-wide.tsx"}),(0,n.jsx)("path",{d:"M205.287 20H173.336C171.221 20.016 169.198 20.8653 167.705 22.3636C166.213 23.8618 165.371 25.8882 165.363 28.003V51.9817C165.363 54.1031 166.204 56.1379 167.701 57.6408C169.198 59.1436 171.23 59.9919 173.351 60H205.302V51.9817H173.351V43.9939H205.302V36.0669H173.351V28.003H205.302L205.287 20Z","data-sentry-element":"path","data-sentry-source-file":"codegpt-logotype-wide.tsx"}),(0,n.jsx)("path",{d:"M253.914 20H221.963C219.841 20.004 217.808 20.8485 216.308 22.3485C214.808 23.8485 213.964 25.8817 213.96 28.003V51.9969C213.964 54.1183 214.808 56.1515 216.308 57.6515C217.808 59.1515 219.841 59.996 221.963 60H245.957C248.077 59.992 250.108 59.1462 251.607 57.6471C253.106 56.148 253.952 54.117 253.96 51.9969V36.0669H229.905V44.07H245.911V52.0578H221.917V28.003H253.868L253.914 20Z","data-sentry-element":"path","data-sentry-source-file":"codegpt-logotype-wide.tsx"}),(0,n.jsx)("path",{d:"M294.127 20H262.176V60H270.179V44.0091H294.173C296.293 44.0011 298.324 43.1554 299.823 41.6563C301.322 40.1571 302.168 38.1262 302.176 36.0061V28.003C302.168 25.8751 301.316 23.8372 299.807 22.3368C298.298 20.8364 296.255 19.996 294.127 20ZM270.133 36.067V28.003H294.127V36.067H270.133Z","data-sentry-element":"path","data-sentry-source-file":"codegpt-logotype-wide.tsx"}),(0,n.jsx)("path",{d:"M346.421 20H306.451V28.003H322.442V59.9543H330.445V28.003H346.421V20Z","data-sentry-element":"path","data-sentry-source-file":"codegpt-logotype-wide.tsx"})]})},38093:function(e,t,a){"use strict";a.d(t,{T:function(){return l}});var n=a(57437),s=a(6896);let l=e=>{let{provider:t,width:a,height:l,className:r=""}=e,o=t.toLowerCase().replaceAll(" ",""),i=o.includes("codegpt")?"codegpt":null!=o?o:"custom";return(0,n.jsx)(s.J,{radius:"full",disableSkeleton:!0,loading:"lazy",src:"/logotypes/".concat(i,".png"),...a&&{width:a},...l&&{height:l},className:"agent-avatar ".concat(r),alt:i,classNames:{wrapper:"shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block",img:"rounded-full border border-content3 bg-content3 opacity-100 block"},"data-sentry-element":"Image","data-sentry-component":"Logo","data-sentry-source-file":"index.tsx"})}},43608:function(e,t,a){"use strict";var n=a(57437),s=a(36020),l=a(40213),r=a(95538);let o={codegptplusbeta:{name:"CodeGPT Plus",OAuthLogin:()=>{let{loginFromEventSource:e}=(0,l.R)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 content-stretch items-center justify-center gap-2",children:[(0,n.jsx)(r.A,{color:"primary",fullWidth:!0,onPress:async()=>{e({type:"signup"})},children:"Sign Up"}),(0,n.jsx)(r.A,{variant:"bordered",fullWidth:!0,className:"border",onPress:async()=>{e({type:"login"})},children:"Sign In"})]})})},apikey:!0,apikey_placeholder:"CodeGPT Plus ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:"".concat(s.Ft,"/en/apikeys")}],max_tokens:!0,temperature:!0},codegptenterprise:{name:"CodeGPT Enterprise",apikey:!0,apikey_placeholder:"CodeGPT Enterprise ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:"".concat(s.Ft,"/en/apikeys")}],customLink:!0,customLink_placeholder:"Custom Link (https://{API URL}/api/v1)",max_tokens:!0,temperature:!0},openai:{name:"OpenAI",apikey:!0,org:!0,connection_info_link:[{label:"Read more about OpenAI apikey",link:"https://platform.openai.com/api-keys"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about OpenAI config",link:"https://platform.openai.com/docs/api-reference/chat/create"}]},azure:{name:"Azure",apikey:!0,customLink:!0,connection_info_link:[{label:"Read more about Azure apikey",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Azure (OpenAI) config",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions"}]},cohere:{name:"Cohere",apikey:!0,connection_info_link:[{label:"Read more about Cohere apikey",link:"https://dashboard.cohere.com/api-keys"}],temperature:!0,config_info_link:[{label:"Read more about Cohere config",link:"https://docs.cohere.com/docs/cochat-beta#define-the-model-settings"}]},anthropic:{name:"Anthropic",apikey:!0,connection_info_link:[{label:"Read more about Anthropic apikey",link:"https://console.anthropic.com/login"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Anthropic config",link:"https://docs.anthropic.com/claude/reference/messages_post"}]},googleaistudio:{name:"Google AI Studio",apikey:!0,apikey_placeholder:"ApiKey (Google-AI-Studio models)",connection_info_link:[{label:"Read more about Google-Ai-Studio",link:"https://makersuite.google.com/app/apikey"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Google-Ai-Studio config",link:"https://ai.google.dev/docs/gemini_api_overview"}]},vertex:{name:"Vertex",customLink:!0,customLink_placeholder:"Custom Link (Vertex models)",oAuthFile:!0,oAuthFile_placeholder:'Upload JSON file ↑ (Vertex "apikey" (credentials.json))',connection_info_link:[{label:"Read more about Vertex credentials",link:"https://developers.google.com/workspace/guides/create-credentials"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Vertex config",link:"https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini?hl=es-419#request_body"}]},ollama:{name:"Ollama",customLink:!0,customLink_placeholder:"Custom Link (http://localhost:11434)",disableConnection:!0},fireworksai:{name:"FireworksAI",apikey:!0,connection_info_link:[{label:"Read more about FireworksAI apikey",link:"https://app.fireworks.ai/users?tab=apps"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about FireworksAI config",link:"https://readme.fireworks.ai/reference/createchatcompletion"}]},mistral:{name:"Mistral",apikey:!0,connection_info_link:[{label:"Read more about Mistral apikey",link:"https://console.mistral.ai/user/api-keys/"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Mistral config",link:"https://docs.mistral.ai/api"}]},huggingface:{name:"HuggingFace",apikey:!0,connection_info_link:[{label:"Read more about HuggingFace apikey",link:"https://huggingface.co/settings/tokens"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about HuggingFace config",link:"https://huggingface.co/docs/api-inference/detailed_parameters?code=js"}]},custom:{name:"Custom",apikey:!0,customLink:!0,max_tokens:!0,temperature:!0},bedrock:{name:"Bedrock",region:!0,access_key_id:!0,secret_access_key:!0,session_token:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Bedrock connection info",link:"https://aws.amazon.com/bedrock/"}]},perplexity:{name:"Perplexity",apikey:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Perplexity apikey",link:"https://docs.perplexity.ai/reference/post_chat_completions"}]},lmstudio:{name:"LM Studio",max_tokens:!0,temperature:!0,disableConnection:!0},groq:{name:"Groq",apikey:!0,connection_info_link:[{label:"Read more about Groq apikey",link:"https://wow.groq.com/"}],max_tokens:!0,temperature:!0},grok:{name:"Grok",apikey:!0,connection_info_link:[{label:"Read more about Grok apikey",link:"https://docs.x.ai/api/"}],max_tokens:!0,temperature:!0},nvidia:{name:"Nvidia",apikey:!0,connection_info_link:[{label:"Read more about Nvidia apikey",link:"https://build.nvidia.com/"}],max_tokens:!0,temperature:!0},deepseek:{name:"DeepSeek",apikey:!0,connection_info_link:[{label:"Read more about DeepSeek apikey",link:"https://platform.deepseek.com/"}],max_tokens:!0,temperature:!0},github:{name:"Github Models",apikey:!0,connection_info_link:[{label:"Read more about Github models",link:"https://github.com/marketplace/models"}],max_tokens:!0,temperature:!0},githubcopilot:{name:"Github Copilot",apikey:!1,connection_info_link:[{label:"Read more about Github Copilot",link:"https://github.com/features/copilot"}],max_tokens:!0,temperature:!0},cerebras:{name:"Cerebras",apikey:!0,connection_info_link:[{label:"Read more about Cerebras apikey",link:"https://inference-docs.cerebras.ai/introduction/"}],max_tokens:!0,temperature:!0}};t.Z=o},35721:function(e,t,a){"use strict";a.d(t,{default:function(){return el}});var n=a(57437),s=a(86148),l=a(27902),r=a(6896),o=e=>{var t,a,s,o,i,d,c;let{agent:u,comment:m}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2","data-sentry-component":"CustomSelectItem","data-sentry-source-file":"agent-autocomplete-item.tsx",children:[(0,n.jsx)(r.J,{src:null!==(a=null==u?void 0:u.image)&&void 0!==a?a:(0,l.k)(null!==(t=null==u?void 0:u.label)&&void 0!==t?t:null==u?void 0:u.name),alt:null!==(o=null!==(s=null==u?void 0:u.label)&&void 0!==s?s:null==u?void 0:u.name)&&void 0!==o?o:"agent",loading:"eager",disableSkeleton:!0,classNames:{img:"size-[1.7rem] rounded-full border border-content3 shrink-0 opacity-100 block"},className:"size-[1.7rem] rounded-full","data-sentry-element":"Image","data-sentry-source-file":"agent-autocomplete-item.tsx"}),(0,n.jsxs)("p",{className:"relative grid max-w-80 overflow-hidden",children:[(0,n.jsx)("span",{className:"text-ellipsis",children:null!==(i=null==u?void 0:u.label)&&void 0!==i?i:null==u?void 0:u.name}),(0,n.jsx)("span",{className:"truncate text-xs text-default-500",children:null!==(d=null!=m?m:null==u?void 0:u.model)&&void 0!==d?d:null==u?void 0:u.welcome})]})]},null!==(c=u.value)&&void 0!==c?c:u.id)},i=a(17036),d=a(79702),c=a(28514),u=a(19979),m=a(26916),p=a(49355),x=a(83728);function f(e){let{isOnModal:t=!1}=e,{agents:a}=(0,i.X)(e=>e),{setCurrentProviderModel:s}=(0,d.o)(),{setSelectedProvider:l,setIsPopoverOpen:f}=(0,d.Y)(),h=e=>{let{agent:a,index:o}=e;return(0,n.jsxs)("div",{className:"relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-lg bg-content2 px-3 transition-all ".concat(o),onClick:()=>{s("codegptplusbeta",{id:a.id,label:a.name,fromMarketplace:!0,image:a.image,description:"",welcome:null==a?void 0:a.welcome,prompt_library:null==a?void 0:a.prompt_library}),l("codegptplusbeta"),(0,u.$)(),t?(0,c.q)({eventName:"clickOver",groupBy:"aiSelector",target:a.name+"ModalButtonHome"}):(0,c.q)({eventName:"clickOver",target:a.name+"WorkspaceButtonHome"}),f(!1)},"data-sentry-component":"MarketAgentCard","data-sentry-source-file":"marketplace-agents.tsx",children:[(0,n.jsx)(r.J,{disableSkeleton:!0,src:a.image,alt:a.name,loading:"eager",classNames:{wrapper:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"},"data-sentry-element":"Image","data-sentry-source-file":"marketplace-agents.tsx"}),(0,n.jsx)("p",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:a.name})]})},g=a.filter(e=>{var t;return null==e?void 0:null===(t=e.tags)||void 0===t?void 0:t.some(e=>{var t;return null==e?void 0:null===(t=e.toLowerCase())||void 0===t?void 0:t.startsWith("llm")})});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("section",{className:"flex w-full flex-col gap-2 px-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs leading-loose text-default-500",children:"Search for models"}),(0,n.jsx)(m.d,{startContent:(0,n.jsx)(x.Z,{className:"size-4 shrink-0 text-base text-default-500"}),placeholder:"Claude 3.5 Sonnet",classNames:{popoverContent:"pointer-events-auto"},popoverProps:{classNames:{content:"bg-content2 rounded-lg"}},onInputChange:e=>{let n=a.find(t=>t.name===e.toString());n&&(s("codegptplusbeta",{id:n.id,label:n.name,fromMarketplace:!!n,image:n.image,description:null==n?void 0:n.description,welcome:null==n?void 0:n.welcome,...(null==n?void 0:n.prompt_library)?{prompt_library:null==n?void 0:n.prompt_library}:{}}),l("codegptplusbeta"),(0,u.$)(),t?(0,c.q)({eventName:"clickOver",groupBy:"aiSelector",target:n.name+"ModalSearchAgentSelector"}):(0,c.q)({eventName:"clickOver",target:n.name+"SearchAgentSelector"}),f(!1))},itemHeight:64,"data-sentry-element":"Autocomplete","data-sentry-source-file":"marketplace-agents.tsx",children:g.map((e,t)=>(0,n.jsx)(p.R,{value:e.name,textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(o,{agent:e})},"home-".concat(e.id,"-").concat(t)))})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:null==g?void 0:g.slice(0,15).map((e,t)=>(0,n.jsx)(h,{agent:e,index:t},"".concat(t,"-").concat(e.id)))})]})})}var h=a(3439),g=a(89866),v=a(73915),y=a(24574),b=a(40213),j=a(54607),w=a(12562),N=a(2265),k=a(3414);function C(){var e,t,a,n,l;let{providers:r}=(0,y.k)(),{agents:o,mutate:i}=(0,k.P)(),{currentProviderModel:c,setCurrentProviderModel:u}=(0,d.o)(),{selectedProvider:m,setSelectedProvider:p}=(0,d.Y)(),x=null===(e=r.find(e=>e.link===m))||void 0===e?void 0:e.models.map(e=>({label:e,value:e})),f=(null===(a=r.find(e=>e.link===m))||void 0===a?void 0:null===(t=a.installedModels)||void 0===t?void 0:t.map(e=>({label:e,value:e})))||[],h=(null==o?void 0:o.agents)?null===(n=o.agents)||void 0===n?void 0:n.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],g=(null==o?void 0:o.marketplace)?null==o?void 0:o.marketplace.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],v=null===(l=r.find(e=>e.link===m))||void 0===l?void 0:l.editable,b=async e=>{var t,a,n,l,o,i,d,p,y,b;let{model:j,newProvider:w}=e;if(w){let e=localStorage.getItem("current-provider-model-storage");if(e){let t=JSON.parse(e).state.currentProviderModel[w];if(console.log({savedModel:t}),t){u(w,t),(0,s.d8)({model:t.id,provider:w,fromMarketplace:t.fromMarketplace});return}}}let N=[...(null==f?void 0:f.length)?f:[],...(null==x?void 0:x.length)?x:[],...h,...g].find(e=>e.label===j),k=null!==(l=null!==(n=null==N?void 0:N.value)&&void 0!==n?n:j)&&void 0!==l?l:null===(t=c[w])||void 0===t?void 0:t.id,C=null!==(i=null!==(o=null==N?void 0:N.label)&&void 0!==o?o:j)&&void 0!==i?i:null===(a=c[w])||void 0===a?void 0:a.label;if(!k||""===k&&v){let e=null===(p=r.find(e=>e.link===w))||void 0===p?void 0:null===(d=p.installedModels)||void 0===d?void 0:d[0];C=k=null!==(b=null!=e?e:null===(y=r.find(e=>e.link===w))||void 0===y?void 0:y.models[0])&&void 0!==b?b:""}let z=!!g.find(e=>e.label===j);(k||""===k)&&u(null!=w?w:m,{label:C,id:k,fromMarketplace:z,image:null==N?void 0:N.image,description:null==N?void 0:N.description,welcome:null==N?void 0:N.welcome,prompt_library:null==N?void 0:N.prompt_library})};return{handleChangeProvider:e=>{var t,a,n,l;let{e:o,newProvider:d}=e,c=null!=d?d:null==o?void 0:null===(t=o.target)||void 0===t?void 0:t.value;if(!c)return;let u=r.find(e=>e.name===c),m=null!==(a=null==u?void 0:u.link)&&void 0!==a?a:"";b({newProvider:m}),p(m),(0,s.rF)("CodeGPT.apiKey",null!==(l=null!==(n=null==u?void 0:u.id)&&void 0!==n?n:null==u?void 0:u.name)&&void 0!==l?l:""),(null==u?void 0:u.agents)&&setTimeout(()=>{i()},1e3)},handleChangeModel:b,handleChangeProviderAndModel:async e=>{var t,a,n;let{newProvider:l,newModel:o}=e,d=r.find(e=>e.name===l),c=null!==(t=null==d?void 0:d.link)&&void 0!==t?t:"";p(c),(0,s.rF)("CodeGPT.apiKey",null!==(n=null!==(a=null==d?void 0:d.id)&&void 0!==a?a:null==d?void 0:d.name)&&void 0!==n?n:""),(null==d?void 0:d.agents)&&setTimeout(()=>{i()},1e3),u(c,{label:o,id:o,fromMarketplace:!1})}}}var z=a(38093),S=a(50870),M=a(43608),P=a(43088),A=a(77344),L=a(55799),I=a(88433),_=a(51020),D=a(15074),T=a(93014),O=a(2259),R=a(48279),Z=a(7184),F=a(95538),E=a(66589),V=a(7805);function H(){var e,t,a;let[l,r]=(0,N.useState)(""),[o,i]=(0,N.useState)(""),[c,u]=(0,N.useState)(""),[m,p]=(0,N.useState)(""),[x,f]=(0,N.useState)(""),[h,g]=(0,N.useState)(""),[v,b]=(0,N.useState)(""),[j,w]=(0,N.useState)(!1),k=(0,d.Y)(e=>e.selectedProvider),{mutate:C,isConnected:z}=(0,P.T)(),{mutate:H}=(0,y.k)(),B=M.Z[k],{getRootProps:q,getInputProps:G}=(0,E.uI)({onDrop:async e=>{let t=e[0];if("json"!==t.name.split(".").pop()){V.Am.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await t.text();(await (0,s.vC)(e)).ok?V.Am.success("File uploaded",{position:"top-center"}):V.Am.error("Error uploading file",{position:"top-center"})}catch(e){V.Am.error("Error processing json")}},multiple:!1,useFsAccessApi:!1}),U=(0,N.useCallback)(async()=>{await Promise.all([l?(0,s.Lb)(l,k).then(()=>r("")):null,o?(0,s.CG)(o,k).then(()=>i("")):null,c?(0,s.rM)(c,k).then(()=>u("")):null,m?(0,s.TF)(m,k).then(()=>p("")):null,x?(0,s.NV)(x,k).then(()=>f("")):null,h?(0,s.lk)(h,k).then(()=>g("")):null,v?(0,s.W0)(v,k).then(()=>b("")):null]),C(),"Ollama"===B.name&&c&&(await new Promise(e=>setTimeout(e,600)),await (0,s._f)()?(V.Am.success("Connected",{position:"top-center"}),H(),u("")):(V.Am.error("Incorrect Ollama URL",{position:"top-center"}),(0,s.rM)("",k).then(()=>u(""))))},[x,l,c,C,H,o,B.name,m,h,v]),Y=async()=>{B.apikey&&await (0,s.Lb)("",k).then(()=>r("")),B.org&&await (0,s.CG)("",k).then(()=>i("")),B.customLink&&await (0,s.rM)("",k).then(()=>u("")),B.region&&await (0,s.TF)("",k).then(()=>p("")),B.access_key_id&&await (0,s.NV)("",k).then(()=>f("")),B.secret_access_key&&await (0,s.lk)("",k).then(()=>g("")),B.session_token&&(0,s.W0)("",k).then(()=>b("")),"CodeGPT Plus"===B.name&&await (0,S.j)({accessToken:"",refreshToken:"",expiresAt:""}),H(),await C()},K=(e,t)=>{let a=e.target.value;if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&e.target instanceof HTMLInputElement){e.preventDefault();let n=e.target,{selectionStart:l,selectionEnd:o}=n;if(null!==l&&null!==o&&l!==o){let e=n.value.substring(l,o);(0,s.zp)(e).then(()=>{let e=a.substring(0,l)+a.substring(o);"apikey"===t&&r(e),"orgid"===t&&i(e),"customlink"===t&&u(e),"region"===t&&p(e),"accesskeyid"===t&&f(e),"secretaccesskey"===t&&g(e),"sessiontoken"===t&&b(e)})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,s.M1)().then(n=>{let s=e.target,{selectionStart:l,selectionEnd:o}=s,d=a.substring(0,null!=l?l:a.length)+n+a.substring(null!=o?o:a.length);"apikey"===t&&r(d),"orgid"===t&&i(d),"customlink"===t&&u(d),"region"===t&&p(d),"accesskeyid"===t&&f(d),"secretaccesskey"===t&&g(d),"sessiontoken"===t&&b(d),setTimeout(()=>{s.selectionStart=l+n.length,s.selectionEnd=l+n.length},10)})),(0,A.g)(e)};return z?(0,n.jsx)("button",{className:"w-full text-center text-xs text-default-500 underline",onClick:Y,"data-sentry-component":"ProviderConfigForm","data-sentry-source-file":"provider-config-form.tsx",children:"CodeGPT Plus"===B.name?"Disconnect from CodeGPT Plus":"Change connection settings"}):(0,n.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"ProviderConfigForm","data-sentry-source-file":"provider-config-form.tsx",children:[(0,n.jsxs)("label",{className:"text-sm leading-loose text-default-500",children:["Connect to ",B.name]}),B.OAuthLogin&&B.OAuthLogin(),B.apikey&&(0,n.jsx)(Z.Y,{value:l,onChange:e=>r(e.target.value),onKeyDown:e=>K(e,"apikey"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(e=B.apikey_placeholder)&&void 0!==e?e:"API Key",startContent:(0,n.jsx)(L.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onPress:()=>w(!j),children:j?(0,n.jsx)(I.Z,{className:"size-5"}):(0,n.jsx)(_.Z,{className:"size-5"})}),(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,s.M1)().then(e=>r(e)),children:"Paste"})]}),type:j?"text":"password"}),B.org&&(0,n.jsx)(Z.Y,{value:o,onChange:e=>i(e.target.value),onKeyDown:e=>K(e,"orgid"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Organization ID (optional)",startContent:(0,n.jsx)(D.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,s.M1)().then(e=>i(e)),children:"Paste"}),type:"search"}),B.customLink&&(0,n.jsx)(Z.Y,{value:c,onChange:e=>u(e.target.value),onKeyDown:e=>K(e,"customlink"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(t=B.customLink_placeholder)&&void 0!==t?t:"Custom Link",startContent:(0,n.jsx)(T.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,s.M1)().then(e=>u(e)),children:"Paste"}),type:"search"}),B.region&&(0,n.jsx)(Z.Y,{value:m,onChange:e=>p(e.target.value),onKeyDown:e=>K(e,"region"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Region",startContent:(0,n.jsx)(O.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,s.M1)().then(e=>p(e)),children:"Paste"}),type:"search"}),B.access_key_id&&(0,n.jsx)(Z.Y,{value:x,onChange:e=>f(e.target.value),onKeyDown:e=>K(e,"accesskeyid"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Access Key ID",startContent:(0,n.jsx)(L.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,s.M1)().then(e=>f(e)),children:"Paste"}),type:"search"}),B.secret_access_key&&(0,n.jsx)(Z.Y,{value:h,onChange:e=>g(e.target.value),onKeyDown:e=>K(e,"secretaccesskey"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Secret Access Key",startContent:(0,n.jsx)(L.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>w(!j),className:"cursor-pointer",children:j?(0,n.jsx)(I.Z,{className:"size-5"}):(0,n.jsx)(_.Z,{className:"size-5"})}),(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,s.M1)().then(e=>g(e)),children:"Paste"})]}),type:j?"text":"password"}),B.session_token&&(0,n.jsx)(Z.Y,{value:v,onChange:e=>b(e.target.value),onKeyDown:e=>K(e,"sessiontoken"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Session Token",startContent:(0,n.jsx)(L.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>w(!j),className:"cursor-pointer",children:j?(0,n.jsx)(I.Z,{className:"size-5"}):(0,n.jsx)(_.Z,{className:"size-5"})}),(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,s.M1)().then(e=>b(e)),children:"Paste"})]}),type:j?"text":"password"}),B.oAuthFile&&(0,n.jsxs)("div",{...q(),children:[(0,n.jsx)("input",{...G(),className:"hidden"}),(0,n.jsx)("div",{className:"cursor-pointer select-none",children:(0,n.jsx)(Z.Y,{value:"","aria-label":"oAuthFile",variant:"bordered",className:"pointer-events-none",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(a=B.oAuthFile_placeholder)&&void 0!==a?a:"Upload JSON file ↑",startContent:(0,n.jsx)(R.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",className:"border",onPress:()=>{},children:"Upload"})})})]}),(0,n.jsx)("button",{type:"submit",color:"default",onClick:U,className:"mt-4 w-fit rounded-medium border border-purple-500/10 bg-content2 px-4 py-2 text-sm text-default-700",children:"Connect"})]})}var B=a(77752),q=a(39381);function G(){return(0,n.jsxs)("div",{className:"mx-auto flex max-w-xl flex-col gap-4","data-sentry-component":"CloudProviders","data-sentry-source-file":"cloud-providers.tsx",children:[(0,n.jsx)(U,{"data-sentry-element":"RecommendedCloudProviders","data-sentry-source-file":"cloud-providers.tsx"}),(0,n.jsx)(Y,{"data-sentry-element":"OtherCloudProviders","data-sentry-source-file":"cloud-providers.tsx"})]})}function U(){let{handleChangeProviderAndModel:e}=C(),{selectedProvider:t}=(0,d.Y)(),{currentProviderModel:a}=(0,d.o)();return(0,n.jsxs)("div",{className:"","data-sentry-component":"RecommendedCloudProviders","data-sentry-source-file":"cloud-providers.tsx",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsx)("p",{className:"text-xs text-default-500",children:"Recommended Models"})}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 overflow-x-auto py-4 sm:grid-cols-3",children:[{id:"claude-3.5-sonnet",provider:"Anthropic"},{id:"gpt-4o",provider:"OpenAI"},{id:"gemini-2.0-flash",provider:"Google AI Studio"}].map((s,o)=>{var i,d;return(0,n.jsxs)("div",{className:"relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all",onClick:()=>{e({newProvider:s.provider,newModel:s.id})},children:[(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:(0,l.k)(s.id),alt:null!==(d=null===(i=a[t])||void 0===i?void 0:i.label)&&void 0!==d?d:"model",className:"size-6 rounded-full",classNames:{wrapper:"size-6 rounded-full border border-content3 bg-content3",img:"size-6 rounded-full border border-content3 bg-content3 opacity-100 block"}}),(0,n.jsx)("span",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:s.id})]},"model-".concat(s.id,"-").concat(o))})})]})}function Y(){var e,t,a,s,o,i,c,u,x,f,h,g,v,b;let{handleChangeProvider:j,handleChangeModel:w}=C(),{providers:N,mutate:k}=(0,y.k)(),{selectedProvider:S,isProviderSelectOpen:M,setIsProviderSelectOpen:P}=(0,d.Y)(),{currentProviderModel:A}=(0,d.o)(),L=["ollama","lmstudio","codegptplusbeta"],I=N.filter(e=>!L.includes(e.link)),_=null===(e=N.find(e=>e.link===S))||void 0===e?void 0:e.models.map(e=>({label:e,value:e})),D=!!I.find(e=>e.link===S);return(0,n.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 rounded-2xl","data-sentry-component":"OtherCloudProviders","data-sentry-source-file":"cloud-providers.tsx",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsx)("p",{className:"text-xs text-default-500",children:"All Models"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select provider"}),(0,n.jsx)(q.g,{variant:"bordered",selectedKeys:[null===(t=N.find(e=>e.link===S))||void 0===t?void 0:t.name],fullWidth:!0,isOpen:M,onChange:e=>j({e}),onOpenChange:e=>P(e),items:I.filter(e=>e.ides.includes(B.L_)),placeholder:"Anthropic",classNames:{selectorIcon:"right-3",popoverContent:"pointer-events-auto"},renderValue:e=>e.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:S,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.textValue})})]},S)),"data-sentry-element":"Select","data-sentry-source-file":"cloud-providers.tsx",children:I.map(e=>(0,n.jsx)(p.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:e.name,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))})]}),D&&(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select model"}),(0,n.jsx)(m.d,{variant:"bordered",fullWidth:!0,allowsCustomValue:!0,placeholder:"claude-3.5-sonnet",onInputChange:e=>{w({model:e.toString()})},onOpenChange:async()=>{k()},disabledKeys:["loader","disabled"],...L.includes(S)?{}:{defaultSelectedKey:null===(a=A[S])||void 0===a?void 0:a.label,defaultInputValue:null===(s=A[S])||void 0===s?void 0:s.label,inputValue:null===(o=A[S])||void 0===o?void 0:o.label},startContent:!(!(null===(i=A[S])||void 0===i?void 0:i.label)||L.includes(S))&&(0,n.jsx)("div",{className:"size-[1.7rem] shrink-0 rounded-full",children:(null===(u=A[S])||void 0===u?void 0:null===(c=u.image)||void 0===c?void 0:c.length)!==0?(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:A[S]&&(null===(x=A[S])||void 0===x?void 0:x.image)?null===(f=A[S])||void 0===f?void 0:f.image:(0,l.k)(null===(h=A[S])||void 0===h?void 0:h.label),alt:null!==(v=null===(g=A[S])||void 0===g?void 0:g.label)&&void 0!==v?v:"model",className:"size-[1.7rem] shrink-0 rounded-full",classNames:{wrapper:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3",img:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"}}):(0,n.jsx)(z.T,{provider:S,className:"size-[1.7rem] shrink-0 rounded-full"})}),inputProps:{classNames:{base:"overflow-hidden relative",input:"mb-[2px] truncate",label:"bottom-[37%]",inputWrapper:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"]}},popoverProps:{classNames:{content:"bg-content3 pointer-events-auto"}},scrollShadowProps:{offset:8},shouldCloseOnBlur:!0,allowsEmptyCollection:!0,children:null!==(b=null==_?void 0:_.map(e=>(0,n.jsx)(p.R,{value:e.value,textValue:e.label,selectedIcon:!1,endContent:!1,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:S,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.label})})]})},e.value)))&&void 0!==b?b:[]})]}),!L.includes(S)&&"githubcopilot"!==S&&(0,n.jsx)("section",{className:"mt-4",children:(0,n.jsx)(H,{})})]})]})}var K=a(94059),J=a(92021),W=a(20176),$=a(8026),Q=a(5022),X=a(12057);let ee=[{label:"llama3.2-vision:latest",value:"llama3.2-vision:latest"},{label:"qwen2.5-coder:7b",value:"qwen2.5-coder:7b"},{label:"qwen2.5-coder:0.5b",value:"qwen2.5-coder:0.5b"},{label:"mistral:latest",value:"mistral:latest"}];function et(){return(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4","data-sentry-component":"LocalProviders","data-sentry-source-file":"local-providers.tsx",children:[(0,n.jsx)(en,{"data-sentry-element":"InstalledProviders","data-sentry-source-file":"local-providers.tsx"}),(0,n.jsx)(ea,{"data-sentry-element":"OtherProviders","data-sentry-source-file":"local-providers.tsx"})]})}function ea(){var e,t,a,i,c,u,x,f,g,v,b,j,w,k,S,M,P;let{handleChangeModel:A,handleChangeProvider:L}=C(),{providers:I,mutate:_}=(0,y.k)(),{selectedProvider:D,isProviderSelectOpen:T,setIsProviderSelectOpen:O}=(0,d.Y)(),{currentProviderModel:R,setCurrentProviderModel:Z}=(0,d.o)(),[F,E]=(0,N.useState)(!1),[G,U]=(0,N.useState)(!1),[Y,ee]=(0,N.useState)(0),[et,ea]=(0,N.useState)(""),en=(0,N.useRef)(null),es=["ollama","llmstudio"],el=null===(e=I.find(e=>e.link===D&&es.includes(D.toLowerCase())))||void 0===e?void 0:e.models.map(e=>({label:e,value:e})),er=(null===(a=I.find(e=>e.link===D))||void 0===a?void 0:null===(t=a.installedModels)||void 0===t?void 0:t.map(e=>({label:e,value:e})))||[],eo=(null==el?void 0:el.filter(e=>!er.find(t=>t.value===e.value)))||[],ei=er.some(e=>{var t;return e.value===(null===(t=R[D])||void 0===t?void 0:t.id)}),ed=()=>{E(!1),ee(0),ea(""),_()},ec=e=>{let t=e.currentTarget.value;("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,s.M1)().then(a=>{let{selectionStart:n,selectionEnd:s}=e.target,l=t.substring(0,null!=n?n:t.length)+a+t.substring(null!=s?s:t.length);Z(D,{label:l,id:l,fromMarketplace:!1,image:"",description:"",welcome:""})}))},eu=async e=>{var t;if(E(!0),ea(e),!await (0,s._f)()){V.Am.error("Ollama is not running,",{duration:3e3,action:(0,n.jsx)(h.z,{color:"default",variant:"outline",size:"sm",className:"h-auto p-1 underline",onClick:()=>{(0,s.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})}),ed();return}en.current=new AbortController;let a=null===(t=(await fetch("http://localhost:54112/1/api/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:e}),signal:en.current.signal})).body)||void 0===t?void 0:t.getReader();if(!a)throw Error("No reader available");let l=new TextDecoder;(async()=>{for(V.Am.success("Downloading model",{duration:3e3});;){let{done:e,value:t}=await a.read();if(e){ed();break}let n=l.decode(t);try{let e=JSON.parse(n);(null==e?void 0:e.status)==="success"&&(V.Am.success("Model installed successfully",{duration:3e3}),ed());let{completed:t,total:a}=e;if(t&&a){let e=Math.floor(parseInt(t)/parseInt(a)*100);e!==Y&&ee(e)}}catch(e){}}})()},em=async e=>{U(!0),(await fetch("http://localhost:54112/1/api/ollama/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:e})})).ok?(V.Am.success("Model deleted"),_()):V.Am.error("Error deleting model"),U(!1)};return(0,n.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4","data-sentry-component":"OtherProviders","data-sentry-source-file":"local-providers.tsx",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsx)("p",{className:"text-xs text-default-500",children:"All Models"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select local provider"}),(0,n.jsx)(q.g,{variant:"bordered",selectedKeys:[null===(i=I.find(e=>e.link===D))||void 0===i?void 0:i.name],fullWidth:!0,isOpen:T,onChange:e=>L({e}),onOpenChange:e=>O(e),items:I.filter(e=>e.ides.includes(B.L_)),placeholder:"Ollama",classNames:{selectorIcon:"right-3",popoverContent:"pointer-events-auto"},renderValue:e=>e.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:D,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.textValue})})]},D)),"aria-label":"Select local provider","data-sentry-element":"Select","data-sentry-source-file":"local-providers.tsx",children:I.filter(e=>["ollama","lmstudio"].includes(e.link)).map(e=>(0,n.jsx)(p.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:e.name,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))})]}),"ollama"===D&&(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select model"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.d,{variant:"bordered",fullWidth:!0,allowsCustomValue:!0,onInputChange:e=>{A({model:e.toString()})},onOpenChange:async()=>{_(),"ollama"===D&&await (0,s._f)()},onKeyDown:e=>ec(e),disabledKeys:["loader","disabled"],...es.includes(D)?{defaultSelectedKey:null===(c=R[D])||void 0===c?void 0:c.label,defaultInputValue:null===(u=R[D])||void 0===u?void 0:u.label,inputValue:null===(x=R[D])||void 0===x?void 0:x.label}:{},startContent:!(!(null===(f=R[D])||void 0===f?void 0:f.label)||!es.includes(D))&&(0,n.jsx)("div",{className:"size-[1.7rem] shrink-0 rounded-full",children:(null===(v=R[D])||void 0===v?void 0:null===(g=v.image)||void 0===g?void 0:g.length)!==0?(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:R[D]&&(null===(b=R[D])||void 0===b?void 0:b.image)?null===(j=R[D])||void 0===j?void 0:j.image:(0,l.k)(null===(w=R[D])||void 0===w?void 0:w.label),alt:null!==(M=null===(k=R[D])||void 0===k?void 0:k.label)&&void 0!==M?M:"model",className:"size-[1.7rem] shrink-0 rounded-full",classNames:{wrapper:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3",img:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"}}):(0,n.jsx)(z.T,{provider:D,className:"size-[1.7rem] shrink-0 rounded-full"})}),inputProps:{classNames:{base:"overflow-hidden relative",input:"mb-[2px] truncate",label:"bottom-[37%]",inputWrapper:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"]}},popoverProps:{classNames:{content:"bg-content3 pointer-events-auto"}},scrollShadowProps:{offset:8},shouldCloseOnBlur:!0,allowsEmptyCollection:!0,children:null!==(P=null==eo?void 0:eo.map(e=>(0,n.jsx)(p.R,{value:e.value,textValue:e.label,selectedIcon:!1,endContent:!1,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(o,{agent:e})},e.value)))&&void 0!==P?P:[]}),ei&&(0,n.jsxs)(K.J2,{children:[(0,n.jsx)(K.xo,{asChild:!0,children:(0,n.jsx)(h.z,{className:"border border-content3 bg-transparent text-default-500 hover:text-danger-500",disabled:G,variant:"destructive",size:"icon",children:G?(0,n.jsx)(W.Z,{className:"size-5 animate-spin p-0.5"}):(0,n.jsx)($.Z,{className:"size-5 p-0.5"})})}),(0,n.jsx)(K.yk,{className:"w-fit select-none",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{className:"text-sm",children:"Are you sure?"}),(0,n.jsx)("p",{className:"text-xs text-default-500",children:"This action cannot be undone."})]}),(0,n.jsx)(h.z,{className:"mx-auto w-fit bg-danger-500 text-white",disabled:G,onClick:()=>{var e;return em(null===(e=R[D])||void 0===e?void 0:e.id)},variant:"destructive",size:"sm",children:"Delete"})]})})]})]})]}),(0,n.jsxs)("section",{className:"flex flex-col items-center justify-center gap-2",children:[F&&(0,n.jsxs)("section",{className:"flex flex-col items-center justify-center gap-1",children:[(0,n.jsx)(J.W,{label:"Downloading ".concat(et),"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:Y,color:"primary",className:"my-auto w-full",classNames:{label:"text-xs text-default-500"}}),(0,n.jsxs)("span",{className:"text-xs text-default-500",children:[Y,"%"]})]}),(null===(S=R[D])||void 0===S?void 0:S.id)&&!ei&&"ollama"===D&&(0,n.jsx)(h.z,{className:"h-10 w-full rounded-medium",disabled:F,onClick:()=>{var e;return eu(null===(e=R[D])||void 0===e?void 0:e.id)},variant:"default",children:(0,n.jsxs)("div",{className:"mx-auto flex items-center justify-evenly gap-2",children:[F?(0,n.jsx)(Q.Z,{className:"size-4 animate-spin"}):(0,n.jsx)(X.Z,{className:"size-4 rounded-full"}),"Download"]})}),F&&(0,n.jsx)(h.z,{className:"h-10 w-full rounded-medium",variant:"outline",onClick:()=>{var e;null===(e=en.current)||void 0===e||e.abort(),ed()},children:"Cancel"})]}),"ollama"===D&&(0,n.jsx)("section",{children:(0,n.jsx)(H,{})})]})]})}function en(){var e,t;let{providers:a,mutate:s}=(0,y.k)(),{selectedProvider:o,setIsPopoverOpen:i}=(0,d.Y)(),{currentProviderModel:c}=(0,d.o)(),{handleChangeProviderAndModel:u}=C();(0,N.useEffect)(()=>{s()},[s]);let m=(null===(t=a.find(e=>"ollama"===e.link))||void 0===t?void 0:null===(e=t.installedModels)||void 0===e?void 0:e.map(e=>({label:e,value:e})))||[],p=m.length>0;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsxs)("p",{className:"text-xs text-default-500",children:[p?"Installed Models":"Recommended Models"," (Ollama)"]})}),(0,n.jsx)("div",{className:"grid max-h-36 grid-cols-1 gap-2 overflow-x-auto overflow-y-auto p-2",children:(p?m:ee).map((e,t)=>{var a,s;return(0,n.jsxs)("div",{className:"relative flex h-12 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all",onClick:()=>{u({newProvider:"Ollama",newModel:e.value}),p&&i(!1)},children:[(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:(0,l.k)(e.label),alt:null!==(s=null===(a=c[o])||void 0===a?void 0:a.label)&&void 0!==s?s:"model",className:"size-6 rounded-full",classNames:{wrapper:"size-6 rounded-full border border-content3 bg-content3",img:"size-6 rounded-full border border-content3 bg-content3 opacity-100 block"}}),(0,n.jsx)("span",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:e.label})]},"model-".concat(e.value,"-").concat(t))})})]})})})}let es=e=>{var t;let{children:a}=e,{userData:s}=(0,v.v)(),{setIsPopoverOpen:l}=(0,d.Y)(),{loginFromEventSource:r}=(0,b.R)(),o=!(null==s?void 0:s.loggedIn),i=!o&&(null==s?void 0:null===(t=s.plan)||void 0===t?void 0:t.toLowerCase().includes("free")),u=!(null==s?void 0:s.loggedIn)&&(0,n.jsxs)(n.Fragment,{children:["Sign up and unlock ",(0,n.jsx)("span",{className:"font-semibold",children:"8 daily interactions"})," for free"]}),m=i&&(0,n.jsxs)(n.Fragment,{children:["Suscribe to ",(0,n.jsx)("span",{className:"font-semibold",children:"Plus Proffesional"})," plan to get more interactions"]});return(0,n.jsxs)("div",{className:"mx-auto flex w-full max-w-xl flex-col gap-4","data-sentry-component":"Ads","data-sentry-source-file":"index.tsx",children:[i||o&&(0,n.jsx)("div",{className:"rounded-lg bg-content2 text-sm",children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4",children:[(0,n.jsx)("h2",{className:"w-full",children:m||u}),(0,n.jsx)(h.z,{variant:"outline",size:"sm",className:"w-auto rounded-full border-foreground bg-transparent  hover:bg-foreground/20",onClick:()=>{r({type:i?"signup":"login",callback:()=>{l(!1)}}),(0,c.q)({eventName:"ads",groupBy:"aiSelector",target:"ProviderModelModalAdsButton"+(i?"Upgrade":"SignUp")})},children:i?"Upgrade":"Sign Up for free"})]})}),(0,n.jsx)("div",{children:a})]})};function el(){let{isPopoverOpen:e,setIsPopoverOpen:t}=(0,d.Y)(),{handleChangeProvider:a}=C(),{mutate:l}=(0,y.k)(),[r,o]=(0,N.useState)("codegpt");return(0,n.jsx)(g.Vq,{open:e,onOpenChange:e=>{e||t(!1)},"data-sentry-element":"Dialog","data-sentry-component":"CodeGPTInterface","data-sentry-source-file":"index.tsx",children:(0,n.jsxs)(g.cZ,{className:"rounded-xl pb-6 pt-0 dark:bg-content1","data-sentry-element":"DialogContent","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(g.$N,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"index.tsx"}),(0,n.jsxs)(j.n,{"aria-label":"Options",selectedKey:r,onSelectionChange:e=>{var t;"codegpt"===e&&a({newProvider:"CodeGPT Plus"}),o(e);let n=e.toString();"local"===e&&(0,s._f)().then(()=>{l()}),(0,c.q)({eventName:"clickOver",groupBy:"aiSelector",target:"ProviderModelModal".concat(null===(t=n.at(0))||void 0===t?void 0:t.toUpperCase()).concat(n.slice(1),"Tab")})},variant:"underlined",color:"default",className:"w-full pt-6",classNames:{panel:"w-full",base:"w-full",tabList:"gap-8",tab:"p-0 [&_span]:!w-full"},"data-sentry-element":"Tabs","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(w.r,{title:"CodeGPT Cloud","data-sentry-element":"Tab","data-sentry-source-file":"index.tsx",children:(0,n.jsx)(es,{"data-sentry-element":"Ads","data-sentry-source-file":"index.tsx",children:(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)(f,{"data-sentry-element":"MarketplaceAgents","data-sentry-source-file":"index.tsx"})})})},"codegpt"),(0,n.jsx)(w.r,{title:"Local LLMs","data-sentry-element":"Tab","data-sentry-source-file":"index.tsx",children:(0,n.jsx)(es,{"data-sentry-element":"Ads","data-sentry-source-file":"index.tsx",children:(0,n.jsx)(et,{"data-sentry-element":"LocalProviders","data-sentry-source-file":"index.tsx"})})},"local"),(0,n.jsx)(w.r,{title:"LLMs Cloud model","data-sentry-element":"Tab","data-sentry-source-file":"index.tsx",children:(0,n.jsx)(es,{"data-sentry-element":"Ads","data-sentry-source-file":"index.tsx",children:(0,n.jsx)(G,{"data-sentry-element":"CloudProviders","data-sentry-source-file":"index.tsx"})})},"cloud")]})]})})}},88090:function(e,t,a){"use strict";a.d(t,{default:function(){return f}});var n=a(57437),s=a(72301),l=a(2265),r=a(45700),o=a(27902),i=a(51584),d=a(73987);let c=i.fC,u=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(i.ck,{ref:t,className:(0,o.cn)("border-b",a),...s})});u.displayName="AccordionItem";let m=l.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,n.jsx)(i.h4,{className:"flex",children:(0,n.jsxs)(i.xz,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 text-left text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...l,children:[s,(0,n.jsx)(d.v4q,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});m.displayName=i.xz.displayName;let p=l.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,n.jsx)(i.VY,{ref:t,className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...l,children:(0,n.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",a),children:s})})});p.displayName=i.VY.displayName;var x=a(3439);function f(e){let{initialCommand:t="",name:a}=e,[o,i]=(0,l.useState)(t),[d,f]=(0,l.useState)([]),[h,g]=(0,l.useState)(!1),[v,y]=(0,l.useState)(""),b=(0,l.useRef)(null),j=(0,l.useRef)(null),w=(0,l.useRef)(null),{setMessages:N,messages:k}=(0,l.useContext)(r.p),C=(0,s.usePathname)().split("/")[1];(0,l.useEffect)(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[d]),(0,l.useEffect)(()=>()=>{j.current&&j.current.abort()},[]);let z=async()=>{j.current&&(j.current.abort(),j.current=null);try{await fetch("http://localhost:54112/".concat(C,"/api/terminal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:"\x03",name:a})})}catch(e){console.error("Error sending interrupt signal:",e)}if(w.current){try{await w.current.cancel()}catch(e){console.error("Error canceling the reader:",e)}w.current=null}g(!1)},S=async()=>{if(o.trim()){j.current&&j.current.abort(),j.current=new AbortController,g(!0),f(["$ ".concat(o)]),y("output");try{var e;let t=await fetch("http://localhost:54112/".concat(C,"/api/terminal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:o,name:a}),signal:j.current.signal});if(!t.ok)throw Error("Error: ".concat(t.status," ").concat(t.statusText));let n=null===(e=t.body)||void 0===e?void 0:e.getReader();if(!n)throw Error("Could not get stream reader");w.current=n;let s=new TextDecoder,l=["$ ".concat(o)];for(;;){let{done:e,value:t}=await n.read();if(e)break;for(let e of s.decode(t).split("\n\n"))if(e.startsWith("data: "))try{let t=JSON.parse(e.substring(6));t.message?(l.push(t.message),f([...l])):t.error&&(l.push("Error: ".concat(t.error)),f([...l]))}catch(t){e.substring(6).trim()&&(l.push(e.substring(6)),f([...l]))}}N(k.map((e,t)=>t===k.length-1?{...e,content:"".concat(e.content,"\n              executing ").concat(o," :\n              ").concat(l.join("\n"))}:e))}catch(e){"AbortError"===e.name||f(t=>[...t,"Error: ".concat(e.message)])}finally{g(!1),w.current=null,j.current=null}}};return(0,n.jsxs)("div",{className:"mx-auto mb-4 flex w-full max-w-3xl flex-col space-y-2 rounded-md border border-content3 bg-content1 p-3 shadow-md","data-sentry-component":"TerminalExecutor","data-sentry-source-file":"terminal-executor.tsx",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Execute terminal command."}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center rounded-sm border border-content3 bg-content1 px-2 ",children:[(0,n.jsx)("span",{className:"mr-2 text-muted-foreground",children:"$"}),(0,n.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&S(),className:"w-full bg-transparent py-1 text-sm focus:outline-none",disabled:h})]}),h?(0,n.jsx)("div",{className:"flex space-x-2",children:(0,n.jsx)(x.z,{onClick:z,variant:"destructive",size:"sm",className:"w-20",children:"Stop"})}):(0,n.jsx)(x.z,{onClick:S,disabled:h,variant:"default",size:"sm",className:"w-20",children:"Run"})]}),0===d.length?(0,n.jsx)("div",{className:"py-2 text-center text-sm text-muted-foreground",children:"Execute a command to see the results"}):(0,n.jsx)(c,{type:"single",collapsible:!0,value:v,onValueChange:y,className:"rounded-sm border",children:(0,n.jsxs)(u,{value:"output",className:"border-0",children:[(0,n.jsx)(m,{className:"bg-content2/20 px-3 py-2 hover:bg-content2/30 hover:no-underline",children:(0,n.jsx)("span",{className:"text-sm font-medium",children:"Command Result"})}),(0,n.jsx)(p,{children:(0,n.jsx)("div",{ref:b,className:"max-h-60 overflow-y-auto p-2 font-mono text-xs leading-relaxed",style:{scrollbarWidth:"thin"},children:d.map((e,t)=>(0,n.jsx)("div",{className:"whitespace-pre-wrap py-0.5",children:e},t))})})]})})]})}},92883:function(e,t,a){"use strict";a.d(t,{RO:function(){return d},lU:function(){return c}});var n=a(57437),s=a(594),l=a(88725),r=a(95538),o=a(81136),i=a(82312);a(36457);let d=()=>(0,n.jsx)(s.z,{variant:"flat",size:"sm",color:"primary",startContent:(0,n.jsx)(o.Z,{className:"mb-px aspect-square size-3 shrink-0 text-primary-500"}),classNames:{content:"text-primary-500 select-none"},"data-sentry-element":"Chip","data-sentry-component":"PlusBadge","data-sentry-source-file":"badges.tsx",children:"Plus"}),c=()=>(0,n.jsx)(l.e,{content:"Experimental feature",placement:"bottom",color:"success","data-sentry-element":"Tooltip","data-sentry-component":"ExperimentalBadge","data-sentry-source-file":"badges.tsx",children:(0,n.jsx)(r.A,{variant:"flat",size:"sm",isIconOnly:!0,color:"success",className:"cursor-auto rounded-full border border-success/20","data-sentry-element":"Button","data-sentry-source-file":"badges.tsx",children:(0,n.jsx)(i.Z,{className:"mb-px aspect-square size-3 shrink-0 text-green-600","data-sentry-element":"FlaskConical","data-sentry-source-file":"badges.tsx"})})})},89866:function(e,t,a){"use strict";a.d(t,{$N:function(){return f},Be:function(){return h},Vq:function(){return i},cN:function(){return x},cZ:function(){return m},fK:function(){return p},hg:function(){return d}});var n=a(57437),s=a(27902),l=a(28631),r=a(73987),o=a(2265);let i=l.fC,d=l.xz,c=l.h_;l.x8;let u=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(l.aV,{ref:t,className:(0,s.cn)("DialogOverlay data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",a),...r})});u.displayName=l.aV.displayName;let m=o.forwardRef((e,t)=>{let{className:a,children:o,crossClassName:i,onClickCross:d,hideCloseButton:m,...p}=e;return(0,n.jsx)(c,{children:(0,n.jsx)(u,{children:(0,n.jsxs)(l.VY,{ref:t,className:(0,s.cn)("DialogContent data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[10%] z-50 flex w-[95%] max-w-lg translate-x-[-50%] flex-col gap-4 rounded-xl border border-content2 bg-content1 p-6 shadow-lg duration-200 dark:bg-content2",a),...p,children:[o,!m&&(0,n.jsxs)(l.x8,{className:(0,s.cn)("data-[state=open]:bg-accent absolute right-4 top-4 rounded-md border bg-content1 opacity-70 transition-opacity hover:opacity-100  focus:outline-none disabled:pointer-events-none data-[state=open]:text-muted-foreground  dark:bg-content2",i),onClick:d,children:[(0,n.jsx)(r.Pxu,{className:"size-6 rounded-lg p-1"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})})})});m.displayName=l.VY.displayName;let p=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a,"data-sentry-component":"DialogHeader","data-sentry-source-file":"dialog.tsx"})};p.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a,"data-sentry-component":"DialogFooter","data-sentry-source-file":"dialog.tsx"})};x.displayName="DialogFooter";let f=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(l.Dx,{ref:t,className:(0,s.cn)("text-lg font-normal leading-none text-default-700",a),...r})});f.displayName=l.Dx.displayName;let h=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(l.dk,{ref:t,className:(0,s.cn)("text-sm text-default-500",a),...r})});h.displayName=l.dk.displayName},94059:function(e,t,a){"use strict";a.d(t,{J2:function(){return o},xo:function(){return i},yk:function(){return d}});var n=a(57437),s=a(27902),l=a(9647),r=a(2265);let o=l.fC,i=l.xz;l.ee;let d=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:o=4,...i}=e;return(0,n.jsx)(l.h_,{children:(0,n.jsx)(l.VY,{ref:t,align:r,sideOffset:o,className:(0,s.cn)("text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-xl border border-content3 bg-content1 p-4 shadow-lg outline-none dark:bg-content2",a),...i})})});d.displayName=l.VY.displayName},77344:function(e,t,a){"use strict";a.d(t,{g:function(){return s}});var n=a(86148);let s=e=>{if(("c"===e.key.toLowerCase()||"KeyC"===e.code)&&(e.metaKey||e.ctrlKey)){e.preventDefault();let t=window.getSelection();t&&t.toString().length>0&&(0,n.zp)(t.toString())}if(("a"===e.key.toLowerCase()||"KeyA"===e.code)&&(e.metaKey||e.ctrlKey)){e.preventDefault();let{target:t}=e;if(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)t.select();else{let e=document.createRange();e.selectNodeContents(t);let a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(e))}}}}},40213:function(e,t,a){"use strict";a.d(t,{R:function(){return c}});var n=a(86148),s=a(50870),l=a(73915),r=a(36020),o=a(33308),i=a(77752);let d=async()=>{let e=await fetch("http://localhost:54112/api/distinct_id");return(await e.json()).distinct_id},c=()=>{let{mutate:e}=(0,l.v)();return{loginFromEventSource:async t=>{let{next:a,type:l,provider:c,callback:u}=t,m=crypto.randomUUID(),p=new URLSearchParams({source:i.L_,distinct_id:await d(),connection_id:m,flow_version:"1.1",...c?{provider:c}:{},...a?{next:a}:{}});c&&(l="login"),await (0,n.Yo)("".concat(r.Ft,"/").concat(l,"?").concat(p.toString()));let x=new EventSource("".concat(o.xf,"/extensions/connection/").concat(m));x.onmessage=t=>{let{refresh_token:a,access_token:n,expires_at:l}=JSON.parse(t.data);(0,s.j)({accessToken:n,refreshToken:a,expiresAt:l}).then(()=>{e()}).finally(()=>{x.close(),null==u||u()})}}}}},77073:function(e,t,a){"use strict";a.d(t,{e_:function(){return n}}),a(86148);let n=e=>e.map(e=>({role:null==e?void 0:e.role,content:(null==e?void 0:e.content)||""}))},64263:function(e,t,a){"use strict";a.d(t,{prompts:function(){return n}});let n={english:{explain:"Act as an experienced programming mentor. Analyze and explain the following code clearly and concisely, highlighting its main purpose, functionality, and key concepts used.",comment:"Act as a senior developer. Add concise and descriptive comments to each relevant section of the following code, explaining the purpose of each line or block where necessary. Keep comments brief and helpful.",fix:"Act as a senior software developer. Review and fix any issues in the following code. Provide only the corrected code and a brief list of changes. If no fixes are needed, respond with: 'No issues found to fix.'",document:"Act as an expert developer. Add standard code documentation (using the language's conventional format like docstrings, JSDoc, etc.) to the following code. Provide only the documented version of the code without additional explanations or markdown reports.",refactor:"Act as a senior software architect. Analyze and improve the following code by applying SOLID principles, design patterns, and best practices. Maintain the original functionality while optimizing its structure, readability, and maintainability.",unitTest:"Act as a software testing specialist. Create comprehensive unit tests for the following code, covering positive, negative, and edge cases. Use testing best practices and the language's standard testing framework.",debug:"Act as a debugging expert. Analyze the following code to identify and resolve any bugs or issues. Provide only the corrected code and a brief explanation of the debugging process."},spanish:{explain:"Act\xfaa como un mentor experimentado en programaci\xf3n. Analiza y explica el siguiente c\xf3digo de manera clara y concisa, destacando su prop\xf3sito principal, funcionalidad y los conceptos clave utilizados.",comment:"Act\xfaa como un desarrollador s\xe9nior. Agrega comentarios concisos y descriptivos a cada secci\xf3n relevante del siguiente c\xf3digo, explicando el prop\xf3sito de cada l\xednea o bloque donde sea necesario. Mant\xe9n los comentarios breves y \xfatiles.",fix:"Act\xfaa como un desarrollador s\xe9nior de software. Revisa y corrige cualquier problema en el siguiente c\xf3digo. Proporciona solo el c\xf3digo corregido y una breve lista de cambios. Si no se necesitan correcciones, responde con: 'No se encontraron problemas para corregir.'",document:"Act\xfaa como un desarrollador experto. Agrega documentaci\xf3n est\xe1ndar al c\xf3digo (usando el formato convencional del lenguaje como docstrings, JSDoc, etc.) al siguiente c\xf3digo. Proporciona solo la versi\xf3n documentada del c\xf3digo sin explicaciones adicionales o informes en markdown.",refactor:"Act\xfaa como un arquitecto de software s\xe9nior. Analiza y mejora el siguiente c\xf3digo aplicando los principios SOLID, patrones de dise\xf1o y mejores pr\xe1cticas. Mant\xe9n la funcionalidad original optimizando su estructura, legibilidad y mantenibilidad.",unitTest:"Act\xfaa como un especialista en pruebas de software. Crea pruebas unitarias completas para el siguiente c\xf3digo, cubriendo casos positivos, negativos y l\xedmites. Usa las mejores pr\xe1cticas de pruebas y el marco de pruebas est\xe1ndar del lenguaje.",debug:"Act\xfaa como un experto en depuraci\xf3n. Analiza el siguiente c\xf3digo para identificar y resolver cualquier error o problema. Proporciona solo el c\xf3digo corregido y una breve explicaci\xf3n del proceso de depuraci\xf3n."},portuguese:{explain:"Atue como um mentor experiente em programa\xe7\xe3o. Analise e explique o c\xf3digo a seguir de forma clara e concisa, destacando seu principal prop\xf3sito, funcionalidade e conceitos-chave utilizados.",comment:"Atue como um desenvolvedor s\xeanior. Adicione coment\xe1rios concisos e descritivos em cada se\xe7\xe3o relevante do c\xf3digo a seguir, explicando o prop\xf3sito de cada linha ou bloco onde necess\xe1rio. Mantenha os coment\xe1rios breves e \xfateis.",fix:"Atue como um desenvolvedor s\xeanior de software. Revise e corrija quaisquer problemas no c\xf3digo a seguir. Forne\xe7a apenas o c\xf3digo corrigido e uma breve lista de mudan\xe7as. Se n\xe3o houver corre\xe7\xf5es necess\xe1rias, responda com: 'Nenhum problema encontrado para corrigir.'",document:"Atue como um desenvolvedor especialista. Adicione documenta\xe7\xe3o padr\xe3o ao c\xf3digo (usando o formato convencional da linguagem, como docstrings, JSDoc, etc.) no c\xf3digo a seguir. Forne\xe7a apenas a vers\xe3o documentada do c\xf3digo, sem explica\xe7\xf5es adicionais ou relat\xf3rios em markdown.",refactor:"Atue como um arquiteto de software s\xeanior. Analise e melhore o c\xf3digo a seguir aplicando os princ\xedpios SOLID, padr\xf5es de design e melhores pr\xe1ticas. Mantenha a funcionalidade original enquanto otimiza sua estrutura, legibilidade e manutenibilidade.",unitTest:"Atue como um especialista em testes de software. Crie testes unit\xe1rios abrangentes para o c\xf3digo a seguir, cobrindo casos positivos, negativos e de borda. Use as melhores pr\xe1ticas de teste e o framework de teste padr\xe3o da linguagem.",debug:"Atue como um especialista em depura\xe7\xe3o. Analise o c\xf3digo a seguir para identificar e resolver quaisquer bugs ou problemas. Forne\xe7a apenas o c\xf3digo corrigido e uma breve explica\xe7\xe3o do processo de depura\xe7\xe3o."}}},79725:function(){},83570:function(){}},function(e){e.O(0,[541,310,414,537,300,699,2,681,971,491,744],function(){return e(e.s=82548)}),_N_E=e.O()}]);